{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/_myProject/campustaxi-2-webview/src/components/BottomModal.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { BottomSheet } from \"react-spring-bottom-sheet\";\nimport { useRecoilState } from \"recoil\";\nimport { BottomModalState, ChatRoomListState, CreateBottomModalState, endPosState, pathState, startPosState } from \"../components/recoil\";\nimport \"react-spring-bottom-sheet/dist/style.css\";\nimport \"../style/switch.css\";\nimport { GRAY7, ORANGE, SCREEN_HEIGHT } from \"../style\";\nimport { GRAY8, GRAY6 } from \"./../style/index\";\nimport { createRef, useMemo, useRef, useState } from \"react\";\nimport { getfetch, posInit, postfetch } from \"./common\";\nimport { Input, InputMap, InputSearch } from \"./Input/index\";\nimport { Switch } from \"./Input/switch\";\nimport { Radio } from \"./Input/radio\";\nimport { PositionCard } from \"./card/PositionCard\";\nimport { RoomCard } from \"./card/RoomCard\";\nimport _ from \"lodash\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const BottomModal = () => {\n  _s();\n\n  const [visible, setVisible] = useRecoilState(BottomModalState);\n  const [chatRoomList] = useRecoilState(ChatRoomListState); //setChatRoomList\n\n  const [chatRoomListFilterd, setChatRoomListFilterd] = useState([]);\n  const filterSearchTxt = useRef(\"\");\n  const bottomRef = useRef();\n\n  const onClickRoom = () => {\n    bottomRef.current.snapTo(() => SCREEN_HEIGHT * 0.4 + 30, {\n      source: \"custom\",\n      velocity: 0\n    });\n  };\n\n  const onChangeFilterSearchTxt = async t => {\n    if (t.length === 0) {\n      setChatRoomListFilterd([]);\n    } else {\n      const list = await chatRoomList.filter(room => // 추후 방장이름도 추가\n      room.title.includes(t) || room.start_route[0].road_address_name.includes(t) || room.start_route[0].place_name.includes(t) || room.start_route[0].phone.includes(t) || room.start_route[0].address_name.includes(t) || room.start_route[0].category_name.includes(t) || room.end_route[0].road_address_name.includes(t) || room.end_route[0].place_name.includes(t) || room.end_route[0].phone.includes(t) || room.end_route[0].address_name.includes(t) || room.end_route[0].category_name.includes(t));\n      setChatRoomListFilterd(list);\n    }\n  };\n\n  const LIST = filterSearchTxt.current.length > 0 ? chatRoomListFilterd : chatRoomList;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(BottomSheet, {\n      ref: bottomRef,\n      blocking: false,\n      open: visible,\n      onDismiss: () => setVisible(false),\n      snapPoints: ({\n        minHeight,\n        maxHeight\n      }) => [maxHeight * 0.4 + 30, maxHeight * 0.5, maxHeight * 0.7, maxHeight * 0.9],\n      defaultSnap: ({\n        lastSnap,\n        snapPoints\n      }) => [SCREEN_HEIGHT * 0.4],\n      header: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontFamily: \"roboto\",\n            fontWeight: \"bold\",\n            fontSize: 15,\n            color: GRAY7,\n            float: \"left\"\n          },\n          children: \"\\uB354 \\uB9CE\\uC740 \\uCC44\\uD305\\uBC29\\uC744 \\uAC80\\uC0C9\\uD574\\uBCF4\\uC138\\uC694!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontFamily: \"roboto\",\n            fontWeight: \"bold\",\n            fontSize: 15,\n            color: GRAY6,\n            float: \"right\"\n          },\n          onClick: () => setVisible(false),\n          children: \"\\uB2EB\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this),\n      expandOnContentDrag: false,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: \"0 10px 80px 10px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"center\",\n            marginTop: 16\n          },\n          children: /*#__PURE__*/_jsxDEV(InputSearch, {\n            value: filterSearchTxt,\n            placeholder: \"검색 장소를 입력해주세요.\",\n            onChange: onChangeFilterSearchTxt\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), chatRoomList.length > 0 && LIST.map((room, i) => {\n          const ref = /*#__PURE__*/createRef();\n\n          const handleClick = () => {\n            ref.current.scrollIntoView({\n              behavior: \"smooth\",\n              block: \"start\"\n            });\n          };\n\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: ref,\n            children: /*#__PURE__*/_jsxDEV(RoomCard, {\n              room: room,\n              onClick: () => {\n                onClickRoom();\n                handleClick(); // let timerId = setInterval(handleClick, 100);\n                // setTimeout(() => clearInterval(timerId), 1000);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 19\n            }, this)\n          }, i.toString(), false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 17\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}; //2021-10-05T21:50\n\n_s(BottomModal, \"jBiUFmGIUX1ngAhFzj5ZgxhS2tU=\", false, function () {\n  return [useRecoilState, useRecoilState];\n});\n\n_c = BottomModal;\nconst defaultValueDate = new Date().toJSON().split(\".\")[0];\nexport const CreateBottomModal = () => {\n  _s2();\n\n  const [visible, setVisible] = useRecoilState(CreateBottomModalState);\n  const [title, setTitle] = useState(\"\");\n  const [date, setDate] = useState(defaultValueDate);\n  const [personLimit, setPersonLimit] = useState(2); //보낼때 +2\n\n  const [genderLimit, setGenderLimit] = useState(false);\n  const [startPos, setStartPos] = useRecoilState(startPosState);\n  const [endPos, setEndPos] = useRecoilState(endPosState);\n  const [path] = useRecoilState(pathState); //setPath\n\n  const [, setChatRoomList] = useRecoilState(ChatRoomListState); //chatRoomList\n\n  const closeCondition = useMemo(() => title !== \"\" || startPos.place_name !== \"\" || endPos.place_name !== \"\", [title, startPos.place_name, endPos.place_name]);\n  const postCondition = useMemo(() => startPos.place_name !== \"\" && endPos.place_name !== \"\" && path.distance > 0, [startPos.place_name, endPos.place_name, path.distance]);\n\n  const postCreateChatRoom = async () => {\n    if (!postCondition) {\n      alert(\"출발지/도착지/출발시간을 확인해주세요.\");\n    } else {\n      // getfetch(\"/users\").then((d) => console.debug(d));\n      const response = await postfetch(\"/chat-rooms\", {\n        title: title,\n        gender: genderLimit ? \"M\" : \"None\",\n        creator_id: \"0\",\n        chat_user: [\"0\"],\n        \"start_route[]\": JSON.stringify({\n          __component: \"route.route\",\n          ...startPos,\n          naver_id: startPos.id,\n          x: Number(startPos.x),\n          y: Number(startPos.y)\n        }),\n        \"end_route[]\": JSON.stringify({\n          __component: \"route.route\",\n          ...endPos,\n          naver_id: endPos.id,\n          x: Number(endPos.x),\n          y: Number(endPos.y)\n        }),\n        person_limit: personLimit,\n        start_at: date,\n        path: path.path,\n        taxiFare: path.taxiFare,\n        distance: path.distance,\n        duration: path.duration,\n        departureTime: path.departureTime // course_id: 0,\n\n      });\n\n      if (typeof response.id === \"number\") {\n        setTitle(\"\");\n        setDate(defaultValueDate);\n        setStartPos(posInit);\n        setEndPos(posInit);\n        setPersonLimit(2);\n        setGenderLimit(false);\n        setVisible(false); // # 새로 방 업데이트\n\n        getfetch(\"/chat-rooms\").then(d => setChatRoomList(d.map(room => {\n          return { ...room,\n            path: _.chunk(_.split(room.path, \",\"), 2)\n          };\n        })));\n      } else if (response.statusCode === 200) {\n        try {\n          alert(JSON.stringify(response.data.errors));\n        } catch (e) {\n          console.debug(e);\n        }\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(BottomSheet, {\n      blocking: false,\n      open: visible,\n      onDismiss: () => setVisible(false),\n      snapPoints: ({\n        minHeight,\n        maxHeight\n      }) => [maxHeight * 0.3, maxHeight * 0.5, maxHeight * 0.7, maxHeight * 0.9],\n      defaultSnap: ({\n        lastSnap,\n        snapPoints\n      }) => [SCREEN_HEIGHT * 0.7],\n      expandOnContentDrag: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: \"12px 20px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontFamily: \"roboto\",\n              fontWeight: \"bold\",\n              fontSize: 17,\n              color: GRAY8,\n              float: \"left\"\n            },\n            children: \"\\uCC44\\uD305\\uBC29\\uC744 \\uB9CC\\uB4E4\\uC5B4\\uBCF4\\uC138\\uC694!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), closeCondition ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontFamily: \"roboto\",\n              fontWeight: \"bold\",\n              fontSize: 15,\n              color: postCondition ? ORANGE : GRAY6,\n              float: \"right\"\n            },\n            onClick: postCreateChatRoom,\n            children: \"\\uC0DD\\uC131\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontFamily: \"roboto\",\n              fontWeight: \"bold\",\n              fontSize: 15,\n              color: GRAY6,\n              float: \"right\"\n            },\n            onClick: () => setVisible(false),\n            children: \"\\uB2EB\\uAE30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 40\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12\n            },\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              defaultValue: title,\n              onChange: setTitle,\n              placeholder: \"\\uCC44\\uD305\\uBC29 \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694. (\\uC120\\uD0DD)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12\n            },\n            children: [/*#__PURE__*/_jsxDEV(InputMap, {\n              value: startPos,\n              placeholder: \"\\uCD9C\\uBC1C\\uC9C0\\uB97C \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694.\",\n              position: \"start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this), startPos.place_name ? /*#__PURE__*/_jsxDEV(PositionCard, {\n              address: startPos.address_name,\n              title: startPos.place_name,\n              desc: startPos.category_name,\n              url: startPos.place_url,\n              img: \"https://picsum.photos/200\",\n              onClickDelete: () => setStartPos(posInit)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this) : false]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12\n            },\n            children: [/*#__PURE__*/_jsxDEV(InputMap, {\n              value: endPos,\n              placeholder: \"\\uB3C4\\uCC29\\uC9C0\\uB97C \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694.\",\n              position: \"end\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this), endPos.place_name ? /*#__PURE__*/_jsxDEV(PositionCard, {\n              address: endPos.address_name,\n              title: endPos.place_name,\n              desc: endPos.category_name,\n              url: endPos.place_url,\n              img: \"https://picsum.photos/200\",\n              onClickDelete: () => setEndPos(posInit)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this) : false]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: \"bold\",\n                margin: \"0 12px 12px\",\n                color: GRAY7\n              },\n              children: \"\\uCD9C\\uBC1C \\uC2DC\\uAC04\\uC744 \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              defaultValue: date,\n              onChange: setDate,\n              type: \"datetime-local\",\n              id: \"appt\",\n              name: \"appt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 0,\n              padding: 8\n            },\n            children: /*#__PURE__*/_jsxDEV(Switch, {\n              defaultValue: genderLimit,\n              title: genderLimit ? \"성별제한\" : \"성별무관 탑승\",\n              onChange: setGenderLimit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12,\n              color: GRAY7,\n              padding: \"0 8px\",\n              fontSize: 15\n            },\n            children: [\"\\uC778\\uC6D0 \\uC81C\\uD55C\\uC744 \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694.\", /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 8\n              },\n              children: /*#__PURE__*/_jsxDEV(Radio, {\n                data: [2, 3, 4, 5, 6, 7],\n                defaultIndex: personLimit,\n                onClick: setPersonLimit\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s2(CreateBottomModal, \"aOSnSDlJty4rN0JxYye/PLLNquo=\", false, function () {\n  return [useRecoilState, useRecoilState, useRecoilState, useRecoilState, useRecoilState];\n});\n\n_c2 = CreateBottomModal;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"BottomModal\");\n$RefreshReg$(_c2, \"CreateBottomModal\");","map":{"version":3,"sources":["/Users/macbook/_myProject/campustaxi-2-webview/src/components/BottomModal.js"],"names":["BottomSheet","useRecoilState","BottomModalState","ChatRoomListState","CreateBottomModalState","endPosState","pathState","startPosState","GRAY7","ORANGE","SCREEN_HEIGHT","GRAY8","GRAY6","createRef","useMemo","useRef","useState","getfetch","posInit","postfetch","Input","InputMap","InputSearch","Switch","Radio","PositionCard","RoomCard","_","BottomModal","visible","setVisible","chatRoomList","chatRoomListFilterd","setChatRoomListFilterd","filterSearchTxt","bottomRef","onClickRoom","current","snapTo","source","velocity","onChangeFilterSearchTxt","t","length","list","filter","room","title","includes","start_route","road_address_name","place_name","phone","address_name","category_name","end_route","LIST","minHeight","maxHeight","lastSnap","snapPoints","fontFamily","fontWeight","fontSize","color","float","padding","display","justifyContent","marginTop","map","i","ref","handleClick","scrollIntoView","behavior","block","toString","defaultValueDate","Date","toJSON","split","CreateBottomModal","setTitle","date","setDate","personLimit","setPersonLimit","genderLimit","setGenderLimit","startPos","setStartPos","endPos","setEndPos","path","setChatRoomList","closeCondition","postCondition","distance","postCreateChatRoom","alert","response","gender","creator_id","chat_user","JSON","stringify","__component","naver_id","id","x","Number","y","person_limit","start_at","taxiFare","duration","departureTime","then","d","chunk","statusCode","data","errors","e","console","debug","place_url","margin"],"mappings":"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","sourcesContent":["import { BottomSheet } from \"react-spring-bottom-sheet\";\nimport { useRecoilState } from \"recoil\";\nimport {\n  BottomModalState,\n  ChatRoomListState,\n  CreateBottomModalState,\n  endPosState,\n  pathState,\n  startPosState,\n} from \"../components/recoil\";\nimport \"react-spring-bottom-sheet/dist/style.css\";\nimport \"../style/switch.css\";\nimport { GRAY7, ORANGE, SCREEN_HEIGHT } from \"../style\";\nimport { GRAY8, GRAY6 } from \"./../style/index\";\nimport { createRef, useMemo, useRef, useState } from \"react\";\nimport { getfetch, posInit, postfetch } from \"./common\";\nimport { Input, InputMap, InputSearch } from \"./Input/index\";\nimport { Switch } from \"./Input/switch\";\nimport { Radio } from \"./Input/radio\";\nimport { PositionCard } from \"./card/PositionCard\";\nimport { RoomCard } from \"./card/RoomCard\";\nimport _ from \"lodash\";\n\nexport const BottomModal = () => {\n  const [visible, setVisible] = useRecoilState(BottomModalState);\n\n  const [chatRoomList] = useRecoilState(ChatRoomListState); //setChatRoomList\n  const [chatRoomListFilterd, setChatRoomListFilterd] = useState([]);\n  const filterSearchTxt = useRef(\"\");\n  const bottomRef = useRef();\n\n  const onClickRoom = () => {\n    bottomRef.current.snapTo(() => SCREEN_HEIGHT * 0.4 + 30, {\n      source: \"custom\",\n      velocity: 0,\n    });\n  };\n\n  const onChangeFilterSearchTxt = async (t) => {\n    if (t.length === 0) {\n      setChatRoomListFilterd([]);\n    } else {\n      const list = await chatRoomList.filter(\n        (room) =>\n          // 추후 방장이름도 추가\n          room.title.includes(t) ||\n          room.start_route[0].road_address_name.includes(t) ||\n          room.start_route[0].place_name.includes(t) ||\n          room.start_route[0].phone.includes(t) ||\n          room.start_route[0].address_name.includes(t) ||\n          room.start_route[0].category_name.includes(t) ||\n          room.end_route[0].road_address_name.includes(t) ||\n          room.end_route[0].place_name.includes(t) ||\n          room.end_route[0].phone.includes(t) ||\n          room.end_route[0].address_name.includes(t) ||\n          room.end_route[0].category_name.includes(t)\n      );\n      setChatRoomListFilterd(list);\n    }\n  };\n  const LIST = filterSearchTxt.current.length > 0 ? chatRoomListFilterd : chatRoomList;\n  return (\n    <>\n      <BottomSheet\n        ref={bottomRef}\n        blocking={false}\n        open={visible}\n        onDismiss={() => setVisible(false)}\n        snapPoints={({ minHeight, maxHeight }) => [\n          maxHeight * 0.4 + 30,\n          maxHeight * 0.5,\n          maxHeight * 0.7,\n          maxHeight * 0.9,\n        ]}\n        defaultSnap={({ lastSnap, snapPoints }) => [SCREEN_HEIGHT * 0.4]}\n        header={\n          <div>\n            <div style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY7, float: \"left\" }}>\n              더 많은 채팅방을 검색해보세요!\n            </div>\n            <div\n              style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY6, float: \"right\" }}\n              onClick={() => setVisible(false)}\n            >\n              닫기\n            </div>\n          </div>\n        }\n        expandOnContentDrag={false}\n      >\n        <div style={{ padding: \"0 10px 80px 10px\" }}>\n          <div style={{ display: \"flex\", justifyContent: \"center\", marginTop: 16 }}>\n            <InputSearch\n              value={filterSearchTxt}\n              placeholder={\"검색 장소를 입력해주세요.\"}\n              onChange={onChangeFilterSearchTxt}\n            />\n          </div>\n          {chatRoomList.length > 0 &&\n            LIST.map((room, i) => {\n              const ref = createRef();\n              const handleClick = () => {\n                ref.current.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n              };\n              return (\n                <div key={i.toString()} ref={ref}>\n                  {/* DB 모든 채팅방 */}\n                  <RoomCard\n                    room={room}\n                    onClick={() => {\n                      onClickRoom();\n                      handleClick();\n                      // let timerId = setInterval(handleClick, 100);\n                      // setTimeout(() => clearInterval(timerId), 1000);\n                    }}\n                  />\n                </div>\n              );\n            })}\n        </div>\n      </BottomSheet>\n    </>\n  );\n};\n\n//2021-10-05T21:50\nconst defaultValueDate = new Date().toJSON().split(\".\")[0];\nexport const CreateBottomModal = () => {\n  const [visible, setVisible] = useRecoilState(CreateBottomModalState);\n\n  const [title, setTitle] = useState(\"\");\n  const [date, setDate] = useState(defaultValueDate);\n  const [personLimit, setPersonLimit] = useState(2); //보낼때 +2\n  const [genderLimit, setGenderLimit] = useState(false);\n\n  const [startPos, setStartPos] = useRecoilState(startPosState);\n  const [endPos, setEndPos] = useRecoilState(endPosState);\n  const [path] = useRecoilState(pathState); //setPath\n  const [, setChatRoomList] = useRecoilState(ChatRoomListState);//chatRoomList\n\n  const closeCondition = useMemo(\n    () => title !== \"\" || startPos.place_name !== \"\" || endPos.place_name !== \"\",\n    [title, startPos.place_name, endPos.place_name]\n  );\n  const postCondition = useMemo(\n    () => startPos.place_name !== \"\" && endPos.place_name !== \"\" && path.distance > 0,\n    [startPos.place_name, endPos.place_name, path.distance]\n  );\n\n  const postCreateChatRoom = async () => {\n    if (!postCondition) {\n      alert(\"출발지/도착지/출발시간을 확인해주세요.\");\n    } else {\n      // getfetch(\"/users\").then((d) => console.debug(d));\n      const response = await postfetch(\"/chat-rooms\", {\n        title: title,\n        gender: genderLimit ? \"M\" : \"None\",\n        creator_id: \"0\",\n        chat_user: [\"0\"],\n        \"start_route[]\": JSON.stringify({\n          __component: \"route.route\",\n          ...startPos,\n          naver_id: startPos.id,\n          x: Number(startPos.x),\n          y: Number(startPos.y),\n        }),\n        \"end_route[]\": JSON.stringify({\n          __component: \"route.route\",\n          ...endPos,\n          naver_id: endPos.id,\n          x: Number(endPos.x),\n          y: Number(endPos.y),\n        }),\n        person_limit: personLimit,\n        start_at: date,\n        path: path.path,\n        taxiFare: path.taxiFare,\n        distance: path.distance,\n        duration: path.duration,\n        departureTime: path.departureTime,\n        // course_id: 0,\n      });\n      if (typeof response.id === \"number\") {\n        setTitle(\"\");\n        setDate(defaultValueDate);\n        setStartPos(posInit);\n        setEndPos(posInit);\n        setPersonLimit(2);\n        setGenderLimit(false);\n        setVisible(false);\n        // # 새로 방 업데이트\n        getfetch(\"/chat-rooms\").then((d) =>\n          setChatRoomList(\n            d.map((room) => {\n              return { ...room, path: _.chunk(_.split(room.path, \",\"), 2) };\n            })\n          )\n        );\n      } else if (response.statusCode === 200) {\n        try {\n          alert(JSON.stringify(response.data.errors));\n        } catch (e) {\n          console.debug(e);\n        }\n      }\n    }\n  };\n  return (\n    <>\n      <BottomSheet\n        blocking={false}\n        open={visible}\n        onDismiss={() => setVisible(false)}\n        snapPoints={({ minHeight, maxHeight }) => [maxHeight * 0.3, maxHeight * 0.5, maxHeight * 0.7, maxHeight * 0.9]}\n        defaultSnap={({ lastSnap, snapPoints }) => [SCREEN_HEIGHT * 0.7]}\n        expandOnContentDrag={true}\n      >\n        <div style={{ padding: \"12px 20px\" }}>\n          <div>\n            <div style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 17, color: GRAY8, float: \"left\" }}>\n              채팅방을 만들어보세요!\n            </div>\n            {closeCondition ? (\n              <div\n                style={{\n                  fontFamily: \"roboto\",\n                  fontWeight: \"bold\",\n                  fontSize: 15,\n                  color: postCondition ? ORANGE : GRAY6,\n                  float: \"right\",\n                }}\n                onClick={postCreateChatRoom}\n              >\n                생성\n              </div>\n            ) : (\n              <div\n                style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY6, float: \"right\" }}\n                onClick={() => setVisible(false)}\n              >\n                닫기\n              </div>\n            )}\n          </div>\n          <div style={{ marginTop: 40 }}>\n            <div style={{ marginTop: 12 }}>\n              <Input defaultValue={title} onChange={setTitle} placeholder=\"채팅방 이름을 입력해주세요. (선택)\" />\n            </div>\n            <div style={{ marginTop: 12 }}>\n              <InputMap value={startPos} placeholder=\"출발지를 선택해주세요.\" position={\"start\"} />\n              {startPos.place_name ? (\n                <PositionCard\n                  address={startPos.address_name}\n                  title={startPos.place_name}\n                  desc={startPos.category_name}\n                  url={startPos.place_url}\n                  img={\"https://picsum.photos/200\"}\n                  onClickDelete={() => setStartPos(posInit)}\n                />\n              ) : (\n                false\n              )}\n            </div>\n            <div style={{ marginTop: 12 }}>\n              <InputMap value={endPos} placeholder=\"도착지를 선택해주세요.\" position={\"end\"} />\n              {endPos.place_name ? (\n                <PositionCard\n                  address={endPos.address_name}\n                  title={endPos.place_name}\n                  desc={endPos.category_name}\n                  url={endPos.place_url}\n                  img={\"https://picsum.photos/200\"}\n                  onClickDelete={() => setEndPos(posInit)}\n                />\n              ) : (\n                false\n              )}\n            </div>\n            <div style={{ marginTop: 12 }}>\n              <div style={{ fontWeight: \"bold\", margin: \"0 12px 12px\", color: GRAY7 }}>출발 시간을 선택해주세요.</div>\n              <Input defaultValue={date} onChange={setDate} type=\"datetime-local\" id=\"appt\" name=\"appt\" />\n            </div>\n            <div style={{ marginTop: 0, padding: 8 }}>\n              <Switch\n                defaultValue={genderLimit}\n                title={genderLimit ? \"성별제한\" : \"성별무관 탑승\"}\n                onChange={setGenderLimit}\n              />\n            </div>\n            <div style={{ marginTop: 12, color: GRAY7, padding: \"0 8px\", fontSize: 15 }}>\n              인원 제한을 선택해주세요.\n              <div style={{ marginTop: 8 }}>\n                <Radio data={[2, 3, 4, 5, 6, 7]} defaultIndex={personLimit} onClick={setPersonLimit} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </BottomSheet>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}