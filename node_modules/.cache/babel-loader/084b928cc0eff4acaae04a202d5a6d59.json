{"ast":null,"code":"var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nimport { useState, useRef } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\nimport useConstant from './useConstant';\nexport function isActorWithState(actorRef) {\n  return 'state' in actorRef;\n}\n\nfunction isDeferredActor(actorRef) {\n  return 'deferred' in actorRef;\n}\n\nvar noop = function () {\n  /* ... */\n};\n\nfunction defaultGetSnapshot(actorRef) {\n  return 'getSnapshot' in actorRef ? actorRef.getSnapshot() : isActorWithState(actorRef) ? actorRef.state : undefined;\n}\n\nexport function useActor(actorRef, getSnapshot) {\n  if (getSnapshot === void 0) {\n    getSnapshot = defaultGetSnapshot;\n  }\n\n  var actorRefRef = useRef(actorRef);\n  var deferredEventsRef = useRef([]);\n\n  var _a = __read(useState(function () {\n    return getSnapshot(actorRef);\n  }), 2),\n      current = _a[0],\n      setCurrent = _a[1];\n\n  var send = useConstant(function () {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var event = args[0];\n\n      if (process.env.NODE_ENV !== 'production' && args.length > 1) {\n        console.warn(\"Unexpected payload: \" + JSON.stringify(args[1]) + \". Only a single event object can be sent to actor send() functions.\");\n      }\n\n      var currentActorRef = actorRefRef.current; // If the previous actor is a deferred actor,\n      // queue the events so that they can be replayed\n      // on the non-deferred actor.\n\n      if (isDeferredActor(currentActorRef) && currentActorRef.deferred) {\n        deferredEventsRef.current.push(event);\n      } else {\n        currentActorRef.send(event);\n      }\n    };\n  });\n  useIsomorphicLayoutEffect(function () {\n    actorRefRef.current = actorRef;\n    setCurrent(getSnapshot(actorRef));\n    var subscription = actorRef.subscribe({\n      next: function (emitted) {\n        return setCurrent(emitted);\n      },\n      error: noop,\n      complete: noop\n    }); // Dequeue deferred events from the previous deferred actorRef\n\n    while (deferredEventsRef.current.length > 0) {\n      var deferredEvent = deferredEventsRef.current.shift();\n      actorRef.send(deferredEvent);\n    }\n\n    return function () {\n      subscription.unsubscribe();\n    };\n  }, [actorRef]);\n  return [current, send];\n}","map":{"version":3,"sources":["/Users/macbook/_myProject/campustaxi-2-webview/node_modules/@xstate/react/es/useActor.js"],"names":["__read","o","n","m","Symbol","iterator","i","call","r","ar","e","next","done","push","value","error","useState","useRef","useIsomorphicLayoutEffect","useConstant","isActorWithState","actorRef","isDeferredActor","noop","defaultGetSnapshot","getSnapshot","state","undefined","useActor","actorRefRef","deferredEventsRef","_a","current","setCurrent","send","args","_i","arguments","length","event","process","env","NODE_ENV","console","warn","JSON","stringify","currentActorRef","deferred","subscription","subscribe","emitted","complete","deferredEvent","shift","unsubscribe"],"mappings":"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","sourcesContent":["var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { useState, useRef } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\nimport useConstant from './useConstant';\nexport function isActorWithState(actorRef) {\n    return 'state' in actorRef;\n}\nfunction isDeferredActor(actorRef) {\n    return 'deferred' in actorRef;\n}\nvar noop = function () {\n    /* ... */\n};\nfunction defaultGetSnapshot(actorRef) {\n    return 'getSnapshot' in actorRef\n        ? actorRef.getSnapshot()\n        : isActorWithState(actorRef)\n            ? actorRef.state\n            : undefined;\n}\nexport function useActor(actorRef, getSnapshot) {\n    if (getSnapshot === void 0) { getSnapshot = defaultGetSnapshot; }\n    var actorRefRef = useRef(actorRef);\n    var deferredEventsRef = useRef([]);\n    var _a = __read(useState(function () { return getSnapshot(actorRef); }), 2), current = _a[0], setCurrent = _a[1];\n    var send = useConstant(function () { return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var event = args[0];\n        if (process.env.NODE_ENV !== 'production' && args.length > 1) {\n            console.warn(\"Unexpected payload: \" + JSON.stringify(args[1]) + \". Only a single event object can be sent to actor send() functions.\");\n        }\n        var currentActorRef = actorRefRef.current;\n        // If the previous actor is a deferred actor,\n        // queue the events so that they can be replayed\n        // on the non-deferred actor.\n        if (isDeferredActor(currentActorRef) && currentActorRef.deferred) {\n            deferredEventsRef.current.push(event);\n        }\n        else {\n            currentActorRef.send(event);\n        }\n    }; });\n    useIsomorphicLayoutEffect(function () {\n        actorRefRef.current = actorRef;\n        setCurrent(getSnapshot(actorRef));\n        var subscription = actorRef.subscribe({\n            next: function (emitted) { return setCurrent(emitted); },\n            error: noop,\n            complete: noop\n        });\n        // Dequeue deferred events from the previous deferred actorRef\n        while (deferredEventsRef.current.length > 0) {\n            var deferredEvent = deferredEventsRef.current.shift();\n            actorRef.send(deferredEvent);\n        }\n        return function () {\n            subscription.unsubscribe();\n        };\n    }, [actorRef]);\n    return [current, send];\n}\n"]},"metadata":{},"sourceType":"module"}