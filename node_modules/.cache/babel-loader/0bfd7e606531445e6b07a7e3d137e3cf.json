{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/_myProject/campustaxi-2-webview/src/components/modal/CourseCreateModal.js\",\n    _s = $RefreshSig$();\n\nimport { BottomSheet } from \"react-spring-bottom-sheet\";\nimport \"react-spring-bottom-sheet/dist/style.css\";\nimport { GRAY7 } from \"../../style\";\nimport { GRAY6 } from \"../../style/index\";\nimport { useRecoilState } from \"recoil\";\nimport { commandInputListState, commandWindowState, CreateRouteBottomModalState, FilePathInit, loadingState } from \"../recoil\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { Textarea } from \"../Input/index\";\nimport { InputImage } from \"../Input/InputImage\";\nimport { BookmarkBtn } from \"../Btn/BookmarkBtn\";\nimport { ProfileCard } from \"../card/ProfileCard\";\nimport { CommandArea } from \"../Input/CommandArea\";\nimport { FilePathState } from \"./../recoil\";\nimport { ORANGE } from \"./../../style/index\";\nimport { postfetch } from \"../common\";\nimport { getItems } from \"./../Input/CommandInput/dndFunc\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CourseCreateModal = () => {\n  _s();\n\n  const [, setLoading] = useRecoilState(loadingState); //loading\n\n  const [visibleRoute, setVisibleRoute] = useRecoilState(CreateRouteBottomModalState);\n  const [commandWindow, setCommandWindow] = useRecoilState(commandWindowState);\n  const [filepath, setFilepath] = useRecoilState(FilePathState);\n  const [commandInputList, setCommandInputList] = useRecoilState(commandInputListState);\n  const [CloseData, setCloseData] = useState({\n    text: \"닫기\",\n    BtnColor: GRAY6,\n    type: 0\n  });\n  const bottomRef = useRef();\n  const titleRef = useRef(\"\");\n  const descRef = useRef(\"\"); // const onClick = (e) => {\n  //   // 명령어창이 아닌 추천코스 생성창 터치 시 명령어창 닫기\n  //   console.debug(\"outer\", e.nativeEvent.target.outerText, e.nativeEvent.target.outerText[0]);\n  //   if (e.nativeEvent.target.outerText[0] != \"#\") setCommandWindow({ ...commandWindow, visible: false, index: -1 });\n  // };\n\n  const onScrollCapture = e => {\n    // 명령어창이 아닌 추천코스 생성창 스크롤 시 명령어창 닫기\n    if (e.nativeEvent.target.outerText[0] !== \"#\") setCommandWindow({ ...commandWindow,\n      visible: false,\n      index: -1\n    });\n  }; //#region 닫기 or 생성\n\n\n  useEffect(() => {\n    // 배경 사진이 있거나 내용이 있을경우(\"text\" and content) or others 회색 \"생성\" 버튼으로\n    if (filepath.file !== \"\" && filepath.type === \"CourseCreateMainImg\" || commandInputList[0].content !== \"\" || commandInputList[0].type !== \"text\") {\n      if (filepath.file === \"\" && filepath.type === \"\") setCloseData({\n        text: \"생성\",\n        BtnColor: GRAY6,\n        type: 1\n      });else if (commandInputList[0].content === \"\" && commandInputList[0].type === \"text\") setCloseData({\n        text: \"생성\",\n        BtnColor: GRAY6,\n        type: 2\n      });else setCloseData({\n        text: \"생성\",\n        BtnColor: ORANGE,\n        type: 3\n      });\n    } else if (CloseData.type !== 0) setCloseData({\n      text: \"닫기\",\n      BtnColor: GRAY6,\n      type: 0\n    });\n  }, [filepath.file, commandInputList[0].content, commandInputList[0].type]);\n\n  const onClickClose = () => {\n    switch (CloseData.type) {\n      case 0:\n        setVisibleRoute(false);\n        break;\n\n      case 1:\n        alert(\"[필수] 배경 사진을 선택해주세요.\");\n        break;\n\n      case 2:\n        alert(\"[필수] 내용을 입력해주세요.\");\n        break;\n\n      default:\n        if (titleRef.current.value === \"\") {\n          alert(\"코스 제목을 입력해주세요.\");\n          break;\n        } else if (descRef.current.value === \"\") {\n          alert(\"간단한 소개를 입력해주세요.\");\n          break;\n        } else {\n          setLoading(true);\n          setTimeout(() => {\n            setLoading(false);\n            titleRef.current.value = \"\";\n            descRef.current.value = \"\";\n            setFilepath(FilePathInit);\n            setCommandInputList(getItems(1));\n            alert(\"생성완료~!\");\n          }, 1000); // postfetch(\"/course\", {\n          //   title: titleRef.current.value,\n          //   description: descRef.current.value,\n          //   creator_id: \"0\",\n          //   image: filepath.file,\n          //   content: JSON.stringify(commandInputList),\n          // })\n          //   .then((d) => {\n          //     console.log(d);\n          //   })\n          //   .finally(() => setLoading(false));\n        }\n\n        break;\n    }\n  }; //#endregion\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(BottomSheet, {\n      ref: bottomRef,\n      blocking: false,\n      open: visibleRoute,\n      onDismiss: () => setVisibleRoute(false),\n      snapPoints: ({\n        minHeight,\n        maxHeight\n      }) => [maxHeight * 0.995],\n      defaultSnap: ({\n        lastSnap,\n        snapPoints\n      }) => [snapPoints[1]],\n      onScrollCapture: onScrollCapture,\n      header: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontFamily: \"roboto\",\n            fontWeight: \"bold\",\n            fontSize: 15,\n            color: GRAY7,\n            float: \"left\"\n          },\n          children: \"\\uCD94\\uCC9C \\uCF54\\uC2A4\\uB97C \\uB9CC\\uB4E4\\uC5B4\\uBCF4\\uC138\\uC694!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontFamily: \"roboto\",\n            fontWeight: \"bold\",\n            fontSize: 15,\n            color: CloseData.BtnColor,\n            float: \"right\"\n          },\n          onClick: onClickClose,\n          children: CloseData.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this),\n      expandOnContentDrag: false,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(InputImage, {\n          placeholder: \"배경 사진을 선택해주세요!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: \"0 16px 80px 16px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: -30\n            },\n            children: [/*#__PURE__*/_jsxDEV(Textarea, {\n              ref: titleRef,\n              placeholder: \"코스 제목을 입력해주세요.\",\n              style: {\n                border: \"none\",\n                width: \"100%\",\n                fontSize: 19,\n                paddingRight: 6,\n                padding: 2,\n                fontFamily: \"AppleSDGothic\",\n                backgroundColor: \"transparent\",\n                resize: \"none\",\n                outline: \"none\"\n              },\n              maxrows: 2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 12\n              },\n              children: /*#__PURE__*/_jsxDEV(Textarea, {\n                ref: descRef,\n                style: {\n                  border: \"none\",\n                  width: \"100%\",\n                  fontSize: 15,\n                  paddingRight: 6,\n                  fontFamily: \"AppleSDGothic\",\n                  backgroundColor: \"transparent\",\n                  resize: \"none\",\n                  overflow: \"hidden\",\n                  outline: \"none\"\n                },\n                maxrows: 3,\n                placeholder: \"간단한 소개 (최대 3줄)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(BookmarkBtn, {\n              disable: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ProfileCard, {\n              address: \"캠퍼스택시\",\n              title: \"서울시 강남구\",\n              desc: \"팔로워 3,456명\",\n              img: \"img\",\n              disable: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 6\n              },\n              children: /*#__PURE__*/_jsxDEV(CommandArea, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(CourseCreateModal, \"Fz2QrIFWgRzB0kC9K3U7j20lMyc=\", false, function () {\n  return [useRecoilState, useRecoilState, useRecoilState, useRecoilState, useRecoilState];\n});\n\n_c = CourseCreateModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"CourseCreateModal\");","map":{"version":3,"sources":["/Users/macbook/_myProject/campustaxi-2-webview/src/components/modal/CourseCreateModal.js"],"names":["BottomSheet","GRAY7","GRAY6","useRecoilState","commandInputListState","commandWindowState","CreateRouteBottomModalState","FilePathInit","loadingState","useEffect","useMemo","useRef","useState","Textarea","InputImage","BookmarkBtn","ProfileCard","CommandArea","FilePathState","ORANGE","postfetch","getItems","CourseCreateModal","setLoading","visibleRoute","setVisibleRoute","commandWindow","setCommandWindow","filepath","setFilepath","commandInputList","setCommandInputList","CloseData","setCloseData","text","BtnColor","type","bottomRef","titleRef","descRef","onScrollCapture","e","nativeEvent","target","outerText","visible","index","file","content","onClickClose","alert","current","value","setTimeout","minHeight","maxHeight","lastSnap","snapPoints","fontFamily","fontWeight","fontSize","color","float","padding","marginTop","border","width","paddingRight","backgroundColor","resize","outline","overflow"],"mappings":"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","sourcesContent":["import { BottomSheet } from \"react-spring-bottom-sheet\";\nimport \"react-spring-bottom-sheet/dist/style.css\";\nimport { GRAY7 } from \"../../style\";\nimport { GRAY6 } from \"../../style/index\";\nimport { useRecoilState } from \"recoil\";\nimport {\n  commandInputListState,\n  commandWindowState,\n  CreateRouteBottomModalState,\n  FilePathInit,\n  loadingState,\n} from \"../recoil\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { Textarea } from \"../Input/index\";\nimport { InputImage } from \"../Input/InputImage\";\nimport { BookmarkBtn } from \"../Btn/BookmarkBtn\";\nimport { ProfileCard } from \"../card/ProfileCard\";\nimport { CommandArea } from \"../Input/CommandArea\";\nimport { FilePathState } from \"./../recoil\";\nimport { ORANGE } from \"./../../style/index\";\nimport { postfetch } from \"../common\";\nimport { getItems } from \"./../Input/CommandInput/dndFunc\";\n\nexport const CourseCreateModal = () => {\n  const [, setLoading] = useRecoilState(loadingState); //loading\n  const [visibleRoute, setVisibleRoute] = useRecoilState(CreateRouteBottomModalState);\n  const [commandWindow, setCommandWindow] = useRecoilState(commandWindowState);\n  const [filepath, setFilepath] = useRecoilState(FilePathState);\n  const [commandInputList, setCommandInputList] = useRecoilState(commandInputListState);\n  const [CloseData, setCloseData] = useState({ text: \"닫기\", BtnColor: GRAY6, type: 0 });\n  const bottomRef = useRef();\n  const titleRef = useRef(\"\");\n  const descRef = useRef(\"\");\n\n  // const onClick = (e) => {\n  //   // 명령어창이 아닌 추천코스 생성창 터치 시 명령어창 닫기\n  //   console.debug(\"outer\", e.nativeEvent.target.outerText, e.nativeEvent.target.outerText[0]);\n  //   if (e.nativeEvent.target.outerText[0] != \"#\") setCommandWindow({ ...commandWindow, visible: false, index: -1 });\n  // };\n  const onScrollCapture = (e) => {\n    // 명령어창이 아닌 추천코스 생성창 스크롤 시 명령어창 닫기\n    if (e.nativeEvent.target.outerText[0] !== \"#\") setCommandWindow({ ...commandWindow, visible: false, index: -1 });\n  };\n\n  //#region 닫기 or 생성\n  useEffect(() => {\n    // 배경 사진이 있거나 내용이 있을경우(\"text\" and content) or others 회색 \"생성\" 버튼으로\n    if (\n      (filepath.file !== \"\" && filepath.type === \"CourseCreateMainImg\") ||\n      commandInputList[0].content !== \"\" ||\n      commandInputList[0].type !== \"text\"\n    ) {\n      if (filepath.file === \"\" && filepath.type === \"\") setCloseData({ text: \"생성\", BtnColor: GRAY6, type: 1 });\n      else if (commandInputList[0].content === \"\" && commandInputList[0].type === \"text\")\n        setCloseData({ text: \"생성\", BtnColor: GRAY6, type: 2 });\n      else setCloseData({ text: \"생성\", BtnColor: ORANGE, type: 3 });\n    } else if (CloseData.type !== 0) setCloseData({ text: \"닫기\", BtnColor: GRAY6, type: 0 });\n  }, [filepath.file, commandInputList[0].content, commandInputList[0].type]);\n\n  const onClickClose = () => {\n    switch (CloseData.type) {\n      case 0:\n        setVisibleRoute(false);\n        break;\n      case 1:\n        alert(\"[필수] 배경 사진을 선택해주세요.\");\n        break;\n      case 2:\n        alert(\"[필수] 내용을 입력해주세요.\");\n        break;\n      default:\n        if (titleRef.current.value === \"\") {\n          alert(\"코스 제목을 입력해주세요.\");\n          break;\n        } else if (descRef.current.value === \"\") {\n          alert(\"간단한 소개를 입력해주세요.\");\n          break;\n        } else {\n          setLoading(true);\n          setTimeout(() => {\n            setLoading(false);\n            titleRef.current.value = \"\";\n            descRef.current.value = \"\";\n            setFilepath(FilePathInit);\n            setCommandInputList(getItems(1));\n            alert(\"생성완료~!\")\n          }, 1000);\n          // postfetch(\"/course\", {\n          //   title: titleRef.current.value,\n          //   description: descRef.current.value,\n          //   creator_id: \"0\",\n          //   image: filepath.file,\n          //   content: JSON.stringify(commandInputList),\n          // })\n          //   .then((d) => {\n          //     console.log(d);\n          //   })\n          //   .finally(() => setLoading(false));\n        }\n        break;\n    }\n  };\n  //#endregion\n  return (\n    <>\n      <BottomSheet\n        ref={bottomRef}\n        blocking={false}\n        open={visibleRoute}\n        onDismiss={() => setVisibleRoute(false)}\n        snapPoints={({ minHeight, maxHeight }) => [maxHeight * 0.995]}\n        defaultSnap={({ lastSnap, snapPoints }) => [snapPoints[1]]}\n        onScrollCapture={onScrollCapture}\n        header={\n          <div>\n            <div style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY7, float: \"left\" }}>\n              추천 코스를 만들어보세요!\n            </div>\n            <div\n              style={{\n                fontFamily: \"roboto\",\n                fontWeight: \"bold\",\n                fontSize: 15,\n                color: CloseData.BtnColor,\n                float: \"right\",\n              }}\n              onClick={onClickClose}\n            >\n              {CloseData.text}\n            </div>\n          </div>\n        }\n        expandOnContentDrag={false}\n      >\n        <div>\n          <InputImage placeholder={\"배경 사진을 선택해주세요!\"} />\n          <div style={{ padding: \"0 16px 80px 16px\" }}>\n            <div style={{ marginTop: -30 }}>\n              <Textarea\n                ref={titleRef}\n                placeholder={\"코스 제목을 입력해주세요.\"}\n                style={{\n                  border: \"none\",\n                  width: \"100%\",\n                  fontSize: 19,\n                  paddingRight: 6,\n                  padding: 2,\n                  fontFamily: \"AppleSDGothic\",\n                  backgroundColor: \"transparent\",\n                  resize: \"none\",\n                  outline: \"none\",\n                }}\n                maxrows={2}\n              />\n              <div style={{ marginTop: 12 }}>\n                <Textarea\n                  ref={descRef}\n                  style={{\n                    border: \"none\",\n                    width: \"100%\",\n                    fontSize: 15,\n                    paddingRight: 6,\n                    fontFamily: \"AppleSDGothic\",\n                    backgroundColor: \"transparent\",\n                    resize: \"none\",\n                    overflow: \"hidden\",\n                    outline: \"none\",\n                  }}\n                  maxrows={3}\n                  placeholder={\"간단한 소개 (최대 3줄)\"}\n                />\n              </div>\n              <BookmarkBtn disable />\n              <ProfileCard address={\"캠퍼스택시\"} title={\"서울시 강남구\"} desc={\"팔로워 3,456명\"} img={\"img\"} disable />\n              <div style={{ marginTop: 6 }}>\n                <CommandArea />\n              </div>\n            </div>\n          </div>\n        </div>\n      </BottomSheet>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}