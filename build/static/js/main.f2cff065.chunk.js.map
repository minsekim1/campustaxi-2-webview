{"version":3,"sources":["components/common/index.js","components/Input/CommandInput/dndFunc.tsx","components/common/function/localStorageEffect.js","style/index.tsx","components/common/Icon.js","components/Icon/ProfileIcon.tsx","components/card/CourseCard.tsx","components/list/CouseList.tsx","hook/useWindowDimensions.tsx","components/CourseArea.tsx","components/recoil.tsx","components/common/function/getPlatform.js","components/Btn/LoginBtn.tsx","components/BottomHeader.js","components/BottomTabBar.js","components/Btn/CreateBtn.js","components/common/function/getPath.js","components/PathInfo.js","components/NMap.js","components/Input/index.tsx","components/SearchPosition.js","components/card/PositionCard.js","components/SelectMapModal.js","components/Input/switch.js","components/Input/radio.js","components/common/Tag.js","components/common/prettyDate.js","components/card/RoomCard.js","components/BottomModal.tsx","screen/HomeScreen.js","components/card/ProfileCard.tsx","screen/SearchScreen.tsx","components/Btn/CourseActionField.tsx","components/Input/CourseImage.tsx","components/BackHeader.js","hook/useSWR/fetcher.tsx","components/Input/CommandInput/CPlace.js","components/Input/CommandInput/CTextarea.tsx","components/Input/CommandInput/CImage.js","components/Input/CommandInput/CH.tsx","components/Input/CommandInput/CTag.tsx","components/Input/CommandInput/CContour.js","components/modal/CourseProductModal.js","components/Input/CommandInput/CProduct.js","components/Input/CommandInput/CItem.tsx","screen/CourseDetailScreen.tsx","components/Btn/CreateBtnCourse.js","components/Input/InputImage.js","components/FadeDiv/index.js","components/Input/CommandInput/CommandListRenderItem.js","components/Icon/Rowdot.js","components/Input/CommandArea.js","components/modal/CourseCreateModal.js","components/common/function/getCroppedImg.js","components/modal/CropScreen.js","components/Dialog/AlertDialog.js","screen/CourseScreen.js","screen/ShopScreen.js","screen/MyChatScreen.tsx","components/BackHeaderRight.tsx","screen/UserScreen.js","components/card/MessageChatCard.tsx","screen/ChatScreen.tsx","screen/HomeScreenPre.js","App.js","reportWebVitals.js","index.js"],"names":["API_URL","window","location","protocol","API_URL_NO_Proxy","postfetch","url","params","isCustom","method","Promise","resolve","reject","fetch","headers","Accept","body","then","d","json","catch","e","formBody","property","encodedKey","encodeURIComponent","encodedValue","push","join","getfetch","posInit","address_name","category_group_code","category_group_name","category_name","distance","id","phone","place_name","place_url","road_address_name","x","y","ChatRoomInit","departureTime","created_at","deleted_at","disable_at","end_route","gender","path","person_limit","start_at","start_route","taxiFare","title","NAVER_API_KEY","getItems","count","offset","type","content","Array","from","length","v","k","map","Date","getTime","getItemStyle","isDragging","draggableStyle","translate","transform","Number","split","slice","userSelect","onDragEnd","result","list","setList","destination","arr","startIndex","endIndex","splice","removed","reorder","source","index","localStorageEffect","key","setSelf","onSet","savedValue","localStorage","getItem","JSON","parse","newValue","setItem","stringify","GRAY1","GRAY2","GRAY3","GRAY4","GRAY5","GRAY6","GRAY7","GRAY8","GRAY9","ORANGE","SCREEN_HEIGHT","innerHeight","textOverflowHidden","overflow","textOverflow","display","WebkitLineClamp","styleCenter","alignItems","justifyContent","AbsoluteCenter","position","top","left","Icon","name","size","opacity","color","iconList","fal","far","fas","icon","undefined","ProfileIcon","img","style","height","onClick","inlineStyle","noStyleBtn","border","borderRadius","backgroundColor","width","alt","src","marginTop","marginLeft","borderStyle","borderColor","borderWidth","fontSize","fontWeight","TagBlack","padding","marginRight","CourseCard","course","history","useHistory","_","filter","item","image","images","includes","imageCSS","backgroundImage","backgroundRepeat","backgroundBlendMode","backgroundPosition","backgroundSize","margin","flexDirection","flex","tags","tag","i","toString","minWidth","textShadow","maxHeight","creator_id","profile_image","VirtualizeSwipeableViews","virtualize","SwipeableViews","CourseList","useRecoilState","CourseListState","slidesPerView","direction","speed","CourseListisEqual","prevProps","nextProps","MCourseList","memo","Title","beforeTxt","text","afterTxt","TitleisEqual","MTitle","getWindowDimensions","innerWidth","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","tagInitList","CourseArea","setCourseList","TagListState","tagList","setTagList","CourseIndexState","setIndex","CreateRouteBottomModalState","visibleRoute","a","sortBy","groupBy","n","reverse","unshift","onChangeIndex","slideRenderer","p","indexMod","mod","tagInitListItem","Math","floor","random","commandInputListState","atom","default","inputValue","effects_UNSTABLE","loadingState","commandWindowState","visible","pos","pathState","duration","alertDialogInit","handleConfirm","alertDialogState","deleteModePosState","placePosState","endPosState","startPosState","ChatRoomSeletedState","ChatRoomListState","SearchPosResultState","documents","meta","is_end","pageable_count","total_count","SearchPositionState","FilePathInit","file","previewURL","FilePathState","CropInit","File","CropState","CourseProductModalState","CreateBottomModalState","BottomModalState","MyPosState","lat","lng","homeTabIndexState","bottomTabIndexState","shareModalState","searchState","rooms","users","courses","lastMessageMarginBottomState","userDataState","KaKaoLoginBtn","BottomHeader","noProfile","userData","homeTabIndex","setHomeTabIndex","paddingTop","barFlexInner","flexL","noStyleBtnActive","alignSelf","alert","float","BtnProfile","BottomTabBar","setVisible","bottomTabIndex","setBottomTabIndex","pathname","replace","bottom","boxShadow","barTxt","textAlign","CreateBtn","right","faEdit","getPath","x1","y1","x2","y2","Base_URL","mode","route","traoptimal","summary","toFixed","PathInfo","data","paddingBottom","NMAP","ncpClientId","error","loading","NaverMapAPI","visibleSearch","setVisibleSearch","searchResult","setSearchResult","visibleCreate","setVisibleCreate","setLoading","myPos","startPos","setStartPos","endPos","setEndPos","setPath","navermaps","naver","maps","LatLngBounds","LatLng","bounds","setBounds","chatRoomList","setChatRoomList","naverMapRef","useRef","chatRoomSeleted","setChatRoomSeleted","toISOString","room","chunk","Pos","current","ref","mapDivId","outline","defaultCenter","onBoundsChanged","ImageMarker","strokeColor","strokeOpacity","strokeWeight","animation","onClickMarker","line","strokeStyle","strokeLineCap","strokeLineJoin","startIcon","startIconSize","endIcon","endIconSize","props","Size","anchor","Point","Input","onChange","placeholder","inputMode","readOnly","disabled","defaultValue","inputRef","target","value","Textarea","maxrows","TextareaRef","rowIndex","setRowIndex","onChangeInput","useCallback","scrollHeight","maxRows","resize","fontFamily","InputSearch","autoFocus","InputMap","SearchPosition","zIndex","t","Authorization","PositionCard","desc","address","onClickDelete","imgWidth","maxWidth","PositionCardReverse","SelectMapModal","setPlacePos","goBackPlace","onDismiss","blocking","open","snapPoints","minHeight","defaultSnap","lastSnap","header","expandOnContentDrag","Switch","clicked","setClicked","className","checked","b","Radio","defaultIndex","Tag","lineHeight","prototype","toJSON","timezoneOffsetInHours","this","getTimezoneOffset","sign","leadingZero","abs","correctedDate","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","setHours","RoomCard","noClick","enterTag","chat_user","dateString","str","YMD","HMS","day","getDay","YMD_today","prettyDate","isSeleted","onClickRoom","isParentBtn","marginBottom","BottomModal","chatRoomListFilterd","setChatRoomListFilterd","filterSearchTxt","bottomRef","onChangeFilterSearchTxt","LIST","createRef","snapTo","velocity","scrollIntoView","behavior","block","defaultValueDate","CreateBottomModal","setTitle","date","setDate","personLimit","setPersonLimit","genderLimit","setGenderLimit","closeCondition","useMemo","postCondition","getPostRoute","responseStartRoute","responseEndRoute","naver_id","postCreateChatRoom","responseRoute","console","log","String","response","statusCode","errors","debug","BlockLogin","HomeScreen","document","getElementsByTagName","setAttribute","togglerFollow","myUserData","other_user_id","ProfileCard","userId","disable","setUserData","background","styles","tabs","slide","SearchBar","removeAttribute","cancelToken","axios","CancelToken","cancel","checkCount","checkList","get","token","ResultTabs","Tabs","Tab","label","user","nickname","greeting","device","username","SearchScreen","fontStyle","CourseActionField","mutate","modalInfo","setModalInfo","courseId","useParams","isLikeRef","like_courses","onClickLike","uniq","concat","Checkbox","defaultChecked","checkedIcon","like_users","views","href","onCopy","CourseImage","isEdit","imgUrl","filepath","setFilepath","inputFileCSSNone","inputFileCSS","cursor","BackHeader","goBack","fetcher","r","CPlace","platform","test","navigator","userAgent","CTextarea","setPlaceHolder","commandWindow","setCommandWindow","commandInputList","setCommandInputList","beforeInput","innerHTML","origin","onInput","len","nativeEvent","heightCommand","beforeInnerHTML","onBlur","onFocus","dangerouslySetInnerHTML","__html","contentEditable","suppressContentEditableWarning","spellCheck","loadXHR","xhr","XMLHttpRequest","responseType","onerror","onload","status","send","err","CImage","crop","setCrop","isCrop","setIsCrop","f","htmlFor","accept","preventDefault","reader","FileReader","files","onloadend","readAsDataURL","CH","KeyCodes","delimiters","CTag","ReactTags","maxLength","allowDeleteFromEmptyInput","inline","handleDelete","handleAddition","CContour","numberWithCommas","noTags","procductInfoInit","items","brand","category1","category2","category3","category4","link","lprice","maker","mallName","productId","productType","start","total","lastBuildDate","CourseProductModal","setVisibleRoute","visibleRouteProduct","setVisibleRouteProduct","procductInfo","setProcductInfo","product","CProduct","CItem","MCItem","isEqual","checkProps","isMatch","pick","BtnStyle","IconStyle","ShareModal","flexFlow","EmailShareButton","subject","EmailIcon","TwitterShareButton","TwitterIcon","LineShareButton","LineIcon","FacebookShareButton","hashtag","FacebookIcon","HatenaShareButton","HatenaIcon","InstapaperShareButton","InstapaperIcon","LinkedinShareButton","LinkedinIcon","LivejournalShareButton","LivejournalIcon","MailruShareButton","MailruIcon","OKShareButton","OKIcon","PinterestShareButton","media","PinterestIcon","PocketShareButton","PocketIcon","RedditShareButton","RedditIcon","TelegramShareButton","TelegramIcon","TumblrShareButton","TumblrIcon","ViberShareButton","ViberIcon","VKShareButton","VKIcon","WhatsappShareButton","WhatsappIcon","WorkplaceShareButton","WorkplaceIcon","paddingRight","description","email","follower","CommandArea","justifyItems","CourseDetailScreen","useSWR","CreateBtnCourse","InputImage","box_active","transition","box_hidden","FadeDiv","children","select","setSelect","setDisable","handleClick","setTimeout","CommandListRenderItem","Rowdot","deleteMode","setDeleteMode","alertDialogInfo","setAlertDialogInfo","placePos","CommandRect","droppableId","provided","snapshot","innerRef","isDraggingOver","draggableId","draggableProps","dragHandleProps","DeleteBlock","Button","textTransform","variant","dataURLtoFile","dataurl","fileName","mime","match","bstr","atob","u8arr","Uint8Array","charCodeAt","CourseCreateModal","BtnColor","CloseData","setCloseData","titleRef","descRef","onClickClose","postTagList","tagCommand","tagIdList","post","flatten","FormData","filename","append","imgId","dataCourse","onScrollCapture","outerText","createImage","Image","getRadianAngle","degreeValue","PI","getCroppedImg","imageSrc","pixelCrop","rotation","canvas","createElement","ctx","getContext","maxSize","max","safeArea","sqrt","rotate","drawImage","getImageData","putImageData","round","toDataURL","CropScreen","cropXY","setCropXY","zoom","setZoom","croppedAreaPixels","setCroppedAreaPixels","setCroppedImage","onCropComplete","croppedArea","showCroppedImage","croppedImage","paddingLeft","aspect","onCropChange","onZoomChange","AlertDialog","handleClose","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","CourseScreen","ShopCard","Card","sx","CardActionArea","CardMedia","component","CardContent","Typography","gutterBottom","ShopScreen","ChatRoomArea","chatRooms","MyChatScreen","BackHeaderRight","userImg","roomId","fullWidth","LogList","sampleLog","user_id","sampleLogList","MyScreen","kakao_email","MessageChatCard","mref","isLast","DefaultChat","lastMessageMarginBottom","isMy","year","month","hour","min","time","wordBreak","message","CircularProgress","MessageArea","isInit","messageareaRef","MessageList","parentRef","pageYOffset","getElementsByClassName","scroll","scrollY","m","forwardRef","setLastMessageMarginBottom","setText","textRef","isConfirm","setIsConfirm","onClickSend","MessageChatInit","chat_room_id","TextareaAutosize","caretColor","published_at","updated_at","ChatScreen","textareaRef","refreshInterval","dataU","errorU","HomeScreenPre","resetServerContext","LoadingPage","LinearProgress","App","exact","UserScreen","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f2cff065.chunk.js","sourcesContent":["export const isHttp = window.location.protocol !== \"https:\";\r\n// export const ProxyURL = isHttp\r\n//   ? \"http://circlin-web-react-proxy.herokuapp.com/\"\r\n//   : \"https://circlin-web-react-proxy.herokuapp.com/\";\r\nexport const ProxyURL = \"http://circlin-web-react-proxy.herokuapp.com/\";\r\nexport const FTP_URL = \"http://218.153.157.69/ftp/\"; //http://218.153.157.69/ftp/1636779791516_874ca4a993.jpeg\r\nexport const API_URL = (isHttp ? ProxyURL : \"\") + \"https://www.campus-taxi.com:444\"; //\r\nexport const API_URL_NO_Proxy =\"https://www.campus-taxi.com:444\"; //\r\n//\"https://www.campus-taxi.com:444\";\r\n/**\r\n * Example\r\n * await fetchWithTimeout('/games', {timeout:6000})\r\n * @param {string} resource\r\n * @param {object} options\r\n * @returns\r\n */\r\nexport const fetchWithTimeout = async ({ resource, options = {} }) => {\r\n  const { timeout = 8000 } = options;\r\n  const controller = new AbortController();\r\n  const id = setTimeout(() => controller.abort(), timeout);\r\n  const response = await fetch(resource, {\r\n    ...options,\r\n    signal: controller.signal,\r\n  });\r\n  clearTimeout(id);\r\n  return response;\r\n};\r\n\r\nexport const postfetch = (url, params, isCustom = false, method) => {\r\n  if (isCustom) {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`${API_URL_NO_Proxy}${url}`, {\r\n        method: method ? method : \"POST\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: params,\r\n      })\r\n        .then((d) => d.json())\r\n        .then((d) => resolve(d))\r\n        .catch((e) => reject(e));\r\n    });\r\n  } else {\r\n    let formBody = [];\r\n    for (let property in params) {\r\n      let encodedKey = encodeURIComponent(property);\r\n      let encodedValue = encodeURIComponent(params[property]);\r\n      formBody.push(encodedKey + \"=\" + encodedValue);\r\n    }\r\n    formBody = formBody.join(\"&\");\r\n\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`${API_URL}${url}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/x-www-form-urlencoded;charset=UTF-8\",\r\n        },\r\n        body: formBody,\r\n      })\r\n        .then((d) => d.json())\r\n        .then((d) => resolve(d))\r\n        .catch((e) => reject(e));\r\n    });\r\n  }\r\n};\r\n\r\nexport const getfetch = (url, params) => {\r\n  let formBody = [];\r\n  for (let property in params) {\r\n    let encodedKey = encodeURIComponent(property);\r\n    let encodedValue = encodeURIComponent(params[property]);\r\n    formBody.push(encodedKey + \"=\" + encodedValue);\r\n  }\r\n  formBody = formBody.join(\"&\");\r\n\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${API_URL}${url}${formBody}`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded;charset=UTF-8\",\r\n      },\r\n    })\r\n      .then((d) => d.json())\r\n      .then((d) => resolve(d))\r\n      .catch((e) => reject(e));\r\n  });\r\n};\r\n\r\nexport const getfetchCommon = (url, params, headers) => {\r\n  let formBody = [];\r\n  for (let property in params) {\r\n    let encodedKey = encodeURIComponent(property);\r\n    let encodedValue = encodeURIComponent(params[property]);\r\n    formBody.push(encodedKey + \"=\" + encodedValue);\r\n  }\r\n  formBody = formBody.join(\"&\");\r\n\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${url}${formBody}`, {\r\n      method: \"GET\",\r\n      headers,\r\n    })\r\n      .then((d) => d.json())\r\n      .then((d) => resolve(d))\r\n      .catch((e) => reject(e));\r\n  });\r\n};\r\n\r\nexport const posInit = {\r\n  address_name: \"\",\r\n  category_group_code: \"\",\r\n  category_group_name: \"\",\r\n  category_name: \"\",\r\n  distance: \"\",\r\n  id: -1,\r\n  phone: \"\",\r\n  place_name: \"\",\r\n  place_url: \"\",\r\n  road_address_name: \"\",\r\n  x: \"\", //127.036586636975\r\n  y: \"\", //37.5090312068588\r\n};\r\n\r\nexport const ChatRoomInit = {\r\n  ...posInit,\r\n  departureTime: \"\",\r\n  created_at: \"\",\r\n  deleted_at: \"\",\r\n  disable_at: \"\",\r\n  distance: \"\",\r\n  end_route: [],\r\n  gender: \"\",\r\n  path: [],\r\n  person_limit: -1,\r\n  start_at: \"\",\r\n  start_route: [],\r\n  taxiFare: -1,\r\n  title: \"\",\r\n};\r\n\r\nexport const NAVER_API_KEY = \"lxll2d6397\";\r\nexport const NAVER_API_SECRET_KEY = \"cqaiGWouBEzt1W2A1re3KJb50znmMmx0qwBx8KpU\";\r\n","//#region CommandArea Functions\r\n// fake data generator\r\nexport const getItems = (count: number, offset = 0, type = \"text\", content:any = \"\") =>\r\n  Array.from({ length: count }, (v, k) => k).map((k) => ({\r\n    id: `item-${k + offset + new Date().getTime()}`,\r\n    content: content,\r\n    type: type,\r\n  }));\r\n// a little function to help us with reordering the result\r\nconst reorder = (list: Iterable<unknown> | ArrayLike<unknown>, startIndex: number, endIndex: number) => {\r\n  const result = Array.from(list);\r\n  const [removed] = result.splice(startIndex, 1);\r\n  result.splice(endIndex, 0, removed);\r\n\r\n  return result;\r\n};\r\n\r\nexport const getItemStyle = (isDragging: any, draggableStyle: { transform: any; }) => {\r\n  let translate = draggableStyle.transform;\r\n  if (isDragging && typeof draggableStyle.transform == \"string\") {\r\n    let y = Number(translate.split(\",\")[1].split(\"x\")[0].slice(1, -1));\r\n    translate = translate.split(\",\")[0] + `, ${y - 40}px)`;\r\n    draggableStyle.transform = translate;\r\n  }\r\n  return {\r\n    // some basic styles to make the items look a bit nicer\r\n    userSelect: \"none\",\r\n    // change background colour if dragging\r\n    // styles we need to apply on draggables\r\n    ...draggableStyle,\r\n    // transform: `translate(${draggableStyle.style.transform.x}px, ${draggableStyle.style.transform.y}px)`,\r\n  };\r\n};\r\nexport const getListStyle = () => ({\r\n  flex: 1,\r\n});\r\nexport const onDragEnd = (result: { destination: { index: any; }; source: { index: any; }; }, list: { id: string; content: any; type: string; }[], setList: { (valOrUpdater: { id: string; content: any; type: string; }[] | ((currVal: { id: string; content: any; type: string; }[]) => { id: string; content: any; type: string; }[])): void; (arg0: unknown[]): void; }) => {\r\n  if (!result.destination) return;\r\n  const arr = reorder(list, result.source.index, result.destination.index);\r\n  setList(arr);\r\n};\r\n//#endregion\r\n","export const localStorageEffect =\r\n  (key) =>\r\n  ({ setSelf, onSet }) => {\r\n    const savedValue = localStorage.getItem(key);\r\n    if (savedValue != null) {\r\n      setSelf(JSON.parse(savedValue));\r\n    }\r\n\r\n    onSet((newValue) => {\r\n      localStorage.setItem(key, JSON.stringify(newValue));\r\n    });\r\n  };\r\n","export const GRAY0 = \"#f8f9fa\";\r\nexport const GRAY1 = \"#f1f3f5\";\r\nexport const GRAY2 = \"#E8ECEF\";\r\nexport const GRAY3 = \"#dee2e6\";\r\nexport const GRAY4 = \"#CED4DA\";\r\nexport const GRAY5 = \"#adb5bd\";\r\nexport const GRAY6 = \"#868E96\";\r\nexport const GRAY7 = \"#495057\";\r\nexport const GRAY8 = \"#343A40\";\r\nexport const GRAY9 = \"#212529\";\r\nexport const RED = \"#ff0000\";\r\nexport const WHITE = \"#ffffff\";\r\nexport const BLACK = \"#000000\";\r\nexport const PINK = \"#f50057\";\r\nexport const ORANGE = \"#ff5e00\";\r\nexport const TRANS = \"transparent\";\r\nexport const BGN = \"#ADB5BD\";\r\nexport const ADV = \"#FCC419\";\r\nexport const SEN = \"#5C7CFA\";\r\nexport const SPR = \"#CC5DE8\";\r\nexport const PRO = \"#ff5e00\";\r\nexport const SUB_BLUE = \"#0075FF\";\r\nexport const MAIN_BLUE = \"#0052B3\";\r\nexport const KAKAO_BG = \"#FDEA4E\";\r\nexport const FACEBOOK_BG = \"#4469B0\";\r\nexport const BLUE01 = \"#2f8ded\";\r\nexport const RED01 = \"#eb5757\";\r\nexport const SCREEN_HEIGHT = window.innerHeight;\r\nexport const HEADER_HEIGHT = 56;\r\nexport const textOverflowHidden = {\r\n  overflow: \"hidden\",\r\n  textOverflow: \"ellipsis\",\r\n  display: \"-webkit-box\",\r\n  WebkitLineClamp: 1, //줄수\r\n  // WebkitBoxOrient: \"vertical\",\r\n};\r\nexport const styleCenter = {\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n};\r\nexport const AbsoluteCenter: any = {\r\n  position: \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n};\r\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport * as fal from \"@fortawesome/pro-light-svg-icons\";\r\nimport * as fas from \"@fortawesome/free-solid-svg-icons\";\r\nimport * as far from \"@fortawesome/pro-regular-svg-icons\";\r\nimport { GRAY9 } from \"../../style\";\r\n\r\n/**\r\n * 아이콘 기본형: 'solid'\r\n * @param {{name:string,icon?:string ,size?:'lg' | 'sm' | 'xs' | '2x' | number, opacity?: number , color?: string, type?:'light' | 'regular' | 'solid', style ?: any}} params\r\n */\r\nexport const Icon = ({ name, size, opacity, color, type }) => {\r\n  const iconList = type === \"light\" ? fal : type === \"regular\" ? far : fas;\r\n  return (\r\n    <FontAwesomeIcon\r\n      icon={iconList[name ?? \"faHome\"]}\r\n      size={typeof size === \"string\" ? size : \"1x\"}\r\n      opacity={opacity ?? 1}\r\n      color={color ?? GRAY9}\r\n      transform={{ size: typeof size === \"number\" ? size : undefined }}\r\n      \r\n    />\r\n  );\r\n};\r\n","import { Icon } from \"../common/Icon\";\r\n\r\nexport const ProfileIcon = ({ size = 12, icon, img = \"https://interactive-examples.mdn.mozilla.net/media/cc0-images/grapefruit-slice-332-332.jpg\" }: { size?: number | string, icon?: string, img?:string}) => (\r\n  <div style={{ height: size == \"sm\" ? 50 : 58 }}>\r\n    <div\r\n      onClick={() => {}}\r\n      style={{\r\n        ...inlineStyle.noStyleBtn,\r\n        border: `3px solid white`,\r\n        borderRadius: 200,\r\n        backgroundColor: \"white\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        display: \"flex\",\r\n        width: size === \"sm\" ? 44 : 52,\r\n        height: size === \"sm\" ? 44 : 52,\r\n      }}\r\n    >\r\n      <img\r\n        alt={' '}\r\n        width={size === \"sm\" ? 40 : 48}\r\n        height={size === \"sm\" ? 40 : 48}\r\n        style={{ borderRadius: 200 }}\r\n        src={img}\r\n      ></img>\r\n    </div>\r\n    {icon ? (\r\n      <div\r\n        style={{\r\n          position: \"relative\",\r\n          marginTop: size === \"sm\" ? 26 : 30,\r\n          marginLeft: size === \"sm\" ? 26 : 30,\r\n          height: size === \"sm\" ? 16 : 18,\r\n          width: size === \"sm\" ? 16 : 18,\r\n          backgroundColor: \"#0075FF\",\r\n          borderStyle: \"solid\",\r\n          borderColor: \"white\",\r\n          borderWidth: 1.5,\r\n          borderRadius: 20,\r\n          alignItems: \"center\",\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          top: -52,\r\n          left: 8,\r\n        }}\r\n      >\r\n        <Icon name={icon} color={\"white\"} size={\"xs\"} />\r\n      </div>\r\n    ) : (\r\n      false\r\n    )}\r\n  </div>\r\n);\r\nconst inlineStyle = {\r\n  noStyleBtn: { backgroundColor: \"transparent\", border: \"none\", fontSize: 15, fontWeight: 400, width: \"3em\" },\r\n};\r\n","import { GRAY2, GRAY3, GRAY4, GRAY6, GRAY7, textOverflowHidden } from \"../../style\";\r\nimport { Icon } from \"../common/Icon\";\r\nimport { ProfileIcon } from \"../Icon/ProfileIcon\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport useWindowDimensions from \"../../hook/useWindowDimensions\";\r\nimport { CourseType } from \"../../types/Course\";\r\nimport _ from \"lodash\";\r\nimport axios from \"axios\";\r\nexport const TagBlack = ({ title }: { title: string }) => {\r\n  return (\r\n    <div\r\n      style={{\r\n        ...textOverflowHidden,\r\n        padding: \"4px 12px\",\r\n        backgroundColor: GRAY7,\r\n        color: \"white\",\r\n        fontSize: 11,\r\n        borderRadius: 20,\r\n        fontWeight: \"bold\",\r\n        marginRight: 4,\r\n      }}\r\n    >\r\n      {title}\r\n    </div>\r\n  );\r\n};\r\ntype CourseCardType = {\r\n  course?: CourseType;\r\n  width: number;\r\n};\r\ntype ContentType = {\r\n  content: string; //\"문화\"\r\n  id: string; //\"item-1636275004918\"\r\n  type: string; //\"text\"\r\n};\r\nexport const CourseCard = ({ course, width }: CourseCardType) => {\r\n  const history = useHistory();\r\n  const content = course\r\n    ? course.content\r\n      ? _.join(\r\n          JSON.parse(course.content)\r\n            .filter((item: ContentType) => item.type === \"text\")\r\n            .map((item: ContentType) => item.content),\r\n          \" \"\r\n        )\r\n      : null\r\n    : null;\r\n  let image = null;\r\n  if (course && course.images && course.images.length > 0)\r\n    if (course.images[0].url.includes(\"218\")) image = course.images[0].url;\r\n  // axios\r\n  //   .get(, {\r\n  //     headers: {\r\n  //       \"Content-Type\": \"application/json\",\r\n  //       \"X-Requested-With\": \"XMLHttpRequest\",\r\n  //       \"Access-Control-Allow-Origin\": \"*\",\r\n  //       \"Access-Control-Allow-Headers\": \"X-Requested-With\",\r\n  //     },\r\n  //   })\r\n  //   .then((d) => console.log(d));\r\n\r\n  const imageCSS = image\r\n    ? {\r\n        backgroundImage: `url('${image}')`,\r\n        backgroundRepeat: \"no-repeat\",\r\n        backgroundBlendMode: \"darken\",\r\n        backgroundPosition: \"center\",\r\n        backgroundSize: \"cover\",\r\n        backgroundColor: GRAY2,\r\n      }\r\n    : { backgroundColor: GRAY4 };\r\n  return (\r\n    <div style={{ margin: width > 340 ? \"16px 24px\" : \"8px 16px 0 16px\" }}>\r\n      <div\r\n        onClick={() => history.push(`/course/detail/${course && (course.id ?? \"\")}`)}\r\n        style={{\r\n          width: \"100%\",\r\n          borderRadius: 10,\r\n          height: 240,\r\n          ...imageCSS,\r\n        }}\r\n      >\r\n        <div style={{ padding: 16 }}>\r\n          <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            {/* 좌우 태그 */}\r\n            <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n              <div style={{ flex: 3, display: \"flex\", flexDirection: \"row\" }}>\r\n                {/* 왼쪽 태그 */}\r\n                {course &&\r\n                  course.tags &&\r\n                  course.tags.map((tag, i: number) => (\r\n                    <TagBlack key={i.toString()} title={tag.name === \"이벤트\" ? \"EVENT\" : tag.name} />\r\n                  ))}\r\n              </div>\r\n              <div style={{ flex: 1, minWidth: 120, display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                {/* 오른쪽 태그 */}\r\n                {/* <TagBlack title={\"매주 커피 3잔!\"} /> */}\r\n              </div>\r\n            </div>\r\n            {/* 타이틀/상세내용 */}\r\n            <div\r\n              style={{\r\n                fontSize: 18,\r\n                marginTop: 12,\r\n                fontWeight: \"bold\",\r\n                color: \"white\",\r\n                textShadow: \"2px 2px 2px gray\",\r\n              }}\r\n            >\r\n              {course && course.title ? course.title : \"\"}\r\n            </div>\r\n            <div\r\n              style={{\r\n                ...textOverflowHidden,\r\n                WebkitLineClamp: 3,\r\n                padding: 6,\r\n                marginTop: 6,\r\n                color: \"white\",\r\n                fontSize: 13,\r\n                maxHeight: 48,\r\n                textShadow: \"2px 2px 2px gray\",\r\n              }}\r\n            >\r\n              {content}\r\n            </div>\r\n            {/* 유저사진, 댓글, 북마크수 */}\r\n            <div style={{ display: \"flex\", flexDirection: \"row\", marginTop: 12, alignItems: \"flex-end\" }}>\r\n              <div style={{ flex: 1, display: \"flex\", flexDirection: \"row\", alignItems: \"baseline\" }}>\r\n                <ProfileIcon\r\n                  icon={\"faCrown\"}\r\n                  img={course && course.creator_id && (course.creator_id.profile_image ?? undefined)}\r\n                />\r\n                {/* 두번째 유저 */}\r\n                {/* <div style={{ marginLeft: 3 }}>\r\n                  <ProfileIcon size={\"sm\"} />\r\n                </div> */}\r\n                {/* 세번째유저 */}\r\n                {/* {width > 340 ? (\r\n                  <div style={{ marginLeft: 3 }}>\r\n                    <ProfileIcon size={\"sm\"} />\r\n                  </div>\r\n                ) : (\r\n                  false\r\n                )} */}\r\n              </div>\r\n              {/* <div\r\n                style={{\r\n                  backgroundColor: \"white\",\r\n                  padding: \"6px 12px\",\r\n                  borderRadius: 10,\r\n                  display: \"flex\",\r\n                  maxHeight: 20,\r\n                }}\r\n              >\r\n                <div\r\n                  style={{\r\n                    flex: 1,\r\n                    display: \"flex\",\r\n                    flexDirection: \"row\",\r\n                    justifyContent: \"flex-end\",\r\n                  }}\r\n                >\r\n                  <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n                    <Icon name={\"faBookmark\"} type={\"regular\"} size={\"sm\"} color={GRAY7} />\r\n                    <div style={{ marginLeft: 6, color: GRAY7, fontSize: 11 }}>45</div>\r\n                  </div>\r\n                  <div style={{ marginLeft: 12, display: \"flex\", alignItems: \"center\" }}>\r\n                    <Icon name={\"faComment\"} type={\"regular\"} size={\"sm\"} color={GRAY7} />\r\n                    <div style={{ marginLeft: 6, color: GRAY7, fontSize: 11 }}>244565</div>\r\n                  </div>\r\n                </div>\r\n              </div> */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { memo, useCallback, useEffect } from \"react\";\r\nimport { CourseCard } from \"../card/CourseCard\";\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport { virtualize } from \"react-swipeable-views-utils\";\r\nimport { mod } from \"react-swipeable-views-core\";\r\nimport { Icon } from \"../common/Icon\";\r\nimport { GRAY4, GRAY6, } from \"../../style/index\";\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\nimport \"swiper/swiper-bundle.min.css\";\r\nimport \"swiper/swiper.min.css\";\r\nimport useWindowDimensions from \"../../hook/useWindowDimensions\";\r\nimport { CourseListState } from \"../recoil\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { CourseType } from \"../../types/Course\";\r\n// Import Swiper styles\r\n// import 'swiper/';\r\n// import 'swiper/css/pagination';\r\n// import 'swiper/css/scrollbar';\r\n\r\nexport const VirtualizeSwipeableViews = virtualize(SwipeableViews);\r\n\r\n\r\nexport const slideRenderer = ({ index, key }: { index: number, key: number }, tagList: string[], width: number) => {\r\n  const indexMod = mod(index, tagList.length);\r\n  return (\r\n    <div key={key}>\r\n      <MTitle\r\n        width={width}\r\n        beforeTxt={indexMod === 0 ? tagList[tagList.length - 1] : tagList[indexMod - 1]}\r\n        text={`${tagList[indexMod]} 코스`}\r\n        afterTxt={indexMod === tagList.length - 1 ? tagList[0] : tagList[indexMod + 1]}\r\n      />\r\n      <MCourseList width={width} tag={tagList[indexMod]} />\r\n    </div>\r\n  );\r\n};\r\n\r\ntype CourseListType = {\r\n  width: number,\r\n  tag: string,\r\n}\r\nconst CourseList = ({ width, tag }:CourseListType) => {\r\n  const [courseList,] = useRecoilState<CourseType[]>(CourseListState);//setCourseList\r\n  const list = courseList.filter(item => item.tags.filter((item) => item.name === tag).length > 0)\r\n  \r\n  return (\r\n    <>\r\n      <Swiper slidesPerView={1} direction={\"vertical\"} speed={500} height={260}>\r\n        {list.map((course,i:number) =>\r\n          <SwiperSlide key={i.toString()}>\r\n            <CourseCard width={width} course={course}/>\r\n          </SwiperSlide>)}\r\n      </Swiper>\r\n    </>\r\n  );\r\n};\r\nconst CourseListisEqual = (prevProps: any, nextProps: any) => prevProps.width === nextProps.width && prevProps.tag === nextProps.tag;\r\nconst MCourseList = memo(CourseList, CourseListisEqual);\r\n\r\ntype TitleType = {\r\n  beforeTxt: string, text: string, afterTxt: string, width: number\r\n}\r\nconst Title = ({ beforeTxt, text, afterTxt }: TitleType) => {\r\n  return (\r\n    <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n      <div\r\n        style={{\r\n          flex: 1,\r\n          padding: \"16px 0 16px 24px\",\r\n          display: \"flex\",\r\n          position: \"sticky\",\r\n          top: 0,\r\n          left: 0,\r\n        }}\r\n      >\r\n        <Icon name={\"faChevronLeft\"} color={GRAY4} type={\"light\"} size={\"sm\"} />\r\n        <div\r\n          style={{\r\n            fontSize: 13,\r\n            fontWeight: \"normal\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            color: GRAY6,\r\n            padding: \"0 8px\",\r\n          }}\r\n        >\r\n          {beforeTxt}\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          flex: 2,\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          fontSize: 712 < 375 ? 18 : 20,\r\n          fontWeight: \"bold\",\r\n        }}\r\n      >\r\n        {text}\r\n      </div>\r\n      <div style={{ flex: 1, padding: \"16px 24px 16px 0\", display: \"flex\", justifyContent: \"flex-end\" }}>\r\n        <div\r\n          style={{\r\n            fontSize: 13,\r\n            fontWeight: \"normal\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            color: GRAY6,\r\n            padding: \"0 8px\",\r\n          }}\r\n        >\r\n          {afterTxt}\r\n        </div>\r\n        <Icon name={\"faChevronRight\"} color={GRAY4} type={\"light\"} size={\"sm\"} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nconst TitleisEqual = (prevProps: any, nextProps: any) => prevProps.beforeTxt === nextProps.beforeTxt && prevProps.text === nextProps.text;\r\nconst MTitle = memo(Title, TitleisEqual);","import { useState, useEffect } from 'react';\r\n\r\nfunction getWindowDimensions() {\r\n\tconst { innerWidth: width, innerHeight: height } = window;\r\n\treturn {\r\n\t\twidth,\r\n\t\theight\r\n\t};\r\n}\r\n\r\n//  const { height, width } = useWindowDimensions();\r\nexport default function useWindowDimensions() {\r\n\tconst [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n\tuseEffect(() => {\r\n\t\tfunction handleResize() {\r\n\t\t\tsetWindowDimensions(getWindowDimensions());\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('resize', handleResize);\r\n\t\treturn () => window.removeEventListener('resize', handleResize);\r\n\t}, []);\r\n\r\n\treturn windowDimensions;\r\n}","import { VirtualizeSwipeableViews, slideRenderer } from \"./list/CouseList\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { getfetch } from \"./common\";\r\nimport useWindowDimensions from \"../hook/useWindowDimensions\";\r\nimport { CourseType } from \"../types/Course\";\r\nimport _ from 'lodash'\r\nimport { useRecoilState } from \"recoil\";\r\nimport { CourseIndexState, CourseListState,  CreateRouteBottomModalState,  TagListState } from \"./recoil\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nexport const tagInitList = [\"문화\", \"힐링\", \"놀이\", \"이벤트\", \"데이트\", \"여행\", \"기타\"];\r\n\r\nexport const CourseArea = () => {\r\n  const [courseList, setCourseList] = useRecoilState<CourseType[]>(CourseListState);\r\n  const [tagList, setTagList] = useRecoilState<string[]>(TagListState);\r\n  const [index, setIndex] = useRecoilState<number>(CourseIndexState);\r\n  const { height, width } = useWindowDimensions();\r\n  const [visibleRoute, setVisibleRoute] = useRecoilState(CreateRouteBottomModalState);\r\n  \r\n  //#region 코스 데이터 가져오기\r\n  useEffect(() => {\r\n    getfetch(\"/courses\").then(async (d: CourseType[]) => {\r\n      setCourseList(d)\r\n      //#region 태그별 계산해서 높은 순으로 보여주기(좌우스크롤)\r\n      // 많이 본 순서로 정렬, 이벤트는 무조건 처음.\r\n      let tagList: string[] = []\r\n      await d.map((course) => course.tags.map((tag) => tagList.push(tag.name)))\r\n      tagList = await _.sortBy(_.groupBy(tagList), ['length']).map(n => n[0]).reverse().filter(i => i !== \"이벤트\")\r\n      tagList.unshift(\"이벤트\") //첫번째는 무조건 이벤트 먼저\r\n      setTagList(tagList)\r\n      //#endregion\r\n    });\r\n  }, [visibleRoute]);\r\n  //#endregion\r\n  if (tagList.length === 0) return false\r\n  return <VirtualizeSwipeableViews index={index} onChangeIndex={setIndex} slideRenderer={(p: { index: number, key: number }) => slideRenderer(p, tagList, width)} />;\r\n};\r\n","// import { User } from \"./model/User\";\r\nimport { atom } from \"recoil\";\r\nimport { ChatRoomInit, posInit } from \"./common\";\r\nimport { getItems } from \"./Input/CommandInput/dndFunc\";\r\nimport { localStorageEffect } from \"./common/function/localStorageEffect\";\r\nimport { tagInitList } from \"./CourseArea\";\r\nimport { CourseType } from \"../types/Course\";\r\nimport { UserType } from \"../types/User\";\r\nimport { ChatRoomType } from \"../types/ChatRoom\";\r\nimport { ContentItemType } from \"../types/Command\";\r\n\r\n//#region userData token\r\n/**\r\n * 유저 데이터 Badge, user 포함\r\n * localForageEffect(key) ; key 이름으로 저장 = AscnyStorage(key, data)\r\n */\r\n// export const userState = atom({\r\n//   key: \"recoil/user\",\r\n//   default: new User(),\r\n//   // effects_UNSTABLE: [localForageEffectObject(\"recoil/user\", \"object\")],\r\n// });\r\n\r\n/**\r\n *\r\n * address_name category_group_code category_group_name category_name distance id phone place_name place_url road_address_name x y\r\n */\r\n\r\n\r\nconst tagInitListItem = tagInitList[Math.floor(Math.random() * tagInitList.length)];\r\nexport const commandInputListState = atom<ContentItemType[]>({\r\n  key: \"recoil/commandInputList\",\r\n  default: [\r\n    ...getItems(1),\r\n    ...getItems(1, 1, \"contour\"),\r\n    ...getItems(1, 2, \"tag\", {\r\n      inputValue: \"\",\r\n      tagList: [\r\n        {\r\n          id: tagInitListItem,\r\n          text: tagInitListItem,\r\n        },\r\n      ],\r\n    }),\r\n  ],\r\n  effects_UNSTABLE: [localStorageEffect(\"recoil/cache/commandInputList\")],\r\n});\r\n\r\nexport const loadingState = atom({\r\n  key: \"recoil/loading\",\r\n  default: false,\r\n});\r\ntype CommandWindowProps = {\r\n  color: \"red\" | 'blue' | 'brown' | 'purple' | 'yellow' | 'orange' | 'gray' | \"\";\r\n  visible: boolean; top: number; left: number; index: number; height: number; pos: number;\r\n  beforeInnerHTML?: any;\r\n}\r\nexport const commandWindowState = atom<CommandWindowProps>({\r\n  key: \"recoil/commandWindow\",\r\n  default: { color: \"\", visible: false, top: 0, left: 0, index: -1, height: 0, pos: 0 },\r\n});\r\n\r\n/**\r\n *  출발지/도착지 선택 후 도착 장소 결과\r\n */\r\nexport const SearchEndPosState = atom({\r\n  key: \"recoil/searchEndPos\",\r\n  default: {\r\n    address_name: \"\",\r\n    category_group_code: \"\",\r\n    category_group_name: \"\",\r\n    category_name: \"\",\r\n    distance: -1,\r\n    id: -1,\r\n    phone: \"\",\r\n    place_name: \"\",\r\n    place_url: \"\",\r\n    x: -1,\r\n    y: -1,\r\n  },\r\n});\r\n/**\r\n *  출발지/도착지 선택 후 출발 장소 결과\r\n */\r\nexport const SearchStartPosState = atom({\r\n  key: \"recoil/searchStartPos\",\r\n  default: {\r\n    address_name: \"\",\r\n    category_group_code: \"\",\r\n    category_group_name: \"\",\r\n    category_name: \"\",\r\n    distance: -1,\r\n    id: -1,\r\n    phone: \"\",\r\n    place_name: \"\",\r\n    place_url: \"\",\r\n    x: -1,\r\n    y: -1,\r\n  },\r\n});\r\n\r\n/**\r\n *  도착지\r\n * address_name category_group_code category_group_name category_name distance id phone place_name place_url road_address_name x y\r\n */\r\nexport const pathState = atom({\r\n  key: \"recoil/path\",\r\n  default: { path: [], distance: -1, duration: -1, taxiFare: -1, departureTime: \"2020-01-01T00:00:00\" },\r\n});\r\n/**\r\n *  AlertDialog 띄우기\r\n *  { visible: false, text: \"\" }\r\n */\r\nexport const alertDialogInit = { visible: false, title: \"\", text: \"\", handleConfirm: () => { } };\r\nexport const alertDialogState = atom({\r\n  key: \"recoil/alertDialog\",\r\n  default: alertDialogInit,\r\n});\r\n/**\r\n *  코스 생성시 삭제모드\r\n * {visible: false, index: -1, isDialog: false}\r\n */\r\nexport const deleteModePosState = atom({\r\n  key: \"recoil/deleteMode\",\r\n  default: { visible: false, index: -1 },\r\n});\r\n/**\r\n *  코스 생성시 장소 선택\r\n * address_name category_group_code category_group_name category_name distance id phone place_name place_url road_address_name x y\r\n */\r\nexport const placePosState = atom({\r\n  key: \"recoil/placePos\",\r\n  default: posInit,\r\n});\r\n/**\r\n *  도착지\r\n * address_name category_group_code category_group_name category_name distance id phone place_name place_url road_address_name x y\r\n */\r\nexport const endPosState = atom({\r\n  key: \"recoil/endPos\",\r\n  default: posInit,\r\n});\r\n/**\r\n * 출발지\r\n * address_name category_group_code category_group_name category_name distance id phone place_name place_url road_address_name x y\r\n */\r\nexport type posInitType = {\r\n  address_name: string;\r\n  category_group_code: string;\r\n  category_group_name: string;\r\n  category_name: string;\r\n  distance: string;\r\n  id: number;\r\n  phone: string;\r\n  place_name: string;\r\n  place_url: string;\r\n  road_address_name: string;\r\n  x: string; //127.036586636975\r\n  y: string; //37.5090312068588\r\n};\r\nexport const startPosState = atom<posInitType>({\r\n  key: \"recoil/startPos\",\r\n  default: posInit,\r\n});\r\n/**\r\n *  검색 후 고른 채팅방 1개\r\n * address_name* / category_group_code / category_group_name / category_name*\r\n * distance / id / phone* / place_name* / place_url / x* / y*\r\n */\r\nexport const ChatRoomSeletedState = atom({\r\n  key: \"recoil/chatRoomSeleted\",\r\n  default: ChatRoomInit,\r\n});\r\n/**\r\n *  DB에 있는 모든 채팅방\r\n * address_name* / category_group_code / category_group_name / category_name*\r\n * distance / id / phone* / place_name* / place_url / x* / y*\r\n */\r\nexport const ChatRoomListState = atom({\r\n  key: \"recoil/chatRoomList\",\r\n  default: [],\r\n  effects_UNSTABLE: [localStorageEffect(\"recoil/chatRoomList\")],\r\n});\r\n\r\n/**\r\n *  출발지/도착지 선택 후 장소 검색 결과\r\n * address_name* / category_group_code / category_group_name / category_name*\r\n * distance / id / phone* / place_name* / place_url / x* / y*\r\n */\r\nexport const SearchPosResultState = atom({\r\n  key: \"recoil/searchPosResult\",\r\n  default: { documents: [posInit], meta: { is_end: true, pageable_count: -1, total_count: -1 } },\r\n});\r\n\r\n/**\r\n *  출발지/도착지 선택 시 지도에서 검색하기\r\n *  position : \"start\" | \"end\" | \"place\" | \"\"\r\n */\r\nexport const SearchPositionState = atom<{ visible: boolean; position: \"start\" | \"end\" | \"place\" | \"\" }>({\r\n  key: \"recoil/searchPosition\",\r\n  default: { visible: false, position: \"\" },\r\n});\r\n//#region bttomTabIndex\r\n\r\nexport const FilePathInit = { file: \"\", previewURL: \"\", type: \"\", name: \"\" };\r\n/**\r\n * type : \"\" | \"CourseCreateMainImg\"\r\n */\r\nexport const FilePathState = atom({\r\n  key: \"recoil/filepath\",\r\n  default: FilePathInit,\r\n  effects_UNSTABLE: [localStorageEffect(\"recoil/cache/filepath\")],\r\n});\r\n/**\r\n *  이미지 수정 crop\r\n */\r\nexport const CropInit = { visible: false, file: new File([], \"\"), previewURL: \"\", type: \"\" };\r\nexport const CropState = atom({\r\n  key: \"recoil/crop\",\r\n  default: CropInit,\r\n});\r\n/**\r\n *  코스에 새 상품 추가\r\n */\r\nexport const CourseProductModalState = atom({\r\n  key: \"recoil/CourseProductModalState\",\r\n  default: false,\r\n});\r\n/**\r\n *  새Route 만들기\r\n */\r\nexport const CreateRouteBottomModalState = atom({\r\n  key: \"recoil/createRouteBottomModal\",\r\n  default: false,\r\n});\r\n/**\r\n *  새채팅방 만들기\r\n */\r\nexport const CreateBottomModalState = atom({\r\n  key: \"recoil/createBottomModal\",\r\n  default: false,\r\n});\r\nexport const BottomModalState = atom({\r\n  key: \"recoil/bottomModal\",\r\n  default: false,\r\n});\r\n//#endregion\r\n//#region bttomTabIndex\r\n/**\r\n *  지도옮길시 내 위치 저장\r\n */\r\nexport const MyPosState = atom({\r\n  key: \"recoil/myPosState\",\r\n  default: { lat: 37.554722, lng: 126.970833 },\r\n});\r\n//#endregion\r\n//#region bttomTabIndex\r\n/**\r\n *  코스 / 지도 전환 2개 탭 인덱스\r\n */\r\nexport const homeTabIndexState = atom({\r\n  key: \"recoil/homeTabIndex\",\r\n  default: 1,\r\n});\r\n\r\n//#endregion\r\n//#region bttomTabIndex\r\n/**\r\n *  바텀탭 4개 인덱스\r\n */\r\nexport const bottomTabIndexState = atom({\r\n  key: \"recoil/bottomTabIndex\",\r\n  default: 0,\r\n});\r\n//#endregion\r\n\r\n//#region /course\r\nexport const CourseListState = atom<CourseType[]>({\r\n  key: \"recoil/CourseListState\",\r\n  default: [],\r\n  effects_UNSTABLE: [localStorageEffect(\"recoil/CourseListState\")],\r\n});\r\nexport const TagListState = atom<string[]>({\r\n  key: \"recoil/TagListState\",\r\n  default: [],\r\n  effects_UNSTABLE: [localStorageEffect(\"recoil/TagListState\")],\r\n});\r\nexport const CourseIndexState = atom<number>({\r\n  key: \"recoil/CourseIndexState\",\r\n  default: 0,\r\n  effects_UNSTABLE: [localStorageEffect(\"recoil/CourseIndexState\")],\r\n});\r\nexport const shareModalState = atom<{ visible: boolean }>({\r\n  key: \"recoil/shareModalState\",\r\n  default: { visible: false },\r\n});\r\n//#endregion\r\n\r\n//#region /search\r\n/**\r\n *  사용자 / 채팅방 / 코스 검색\r\n */\r\n// { users: any[]; rooms: any[]; course: any[] }\r\n\r\nexport const searchState = atom<{ users: UserType[]; rooms: ChatRoomType[]; courses: CourseType[] }>({\r\n  key: \"recoil/searchState\",\r\n  default: { rooms: [], users: [], courses: [] },\r\n});\r\n//#endregion\r\n\r\n//#region  /chat 채팅방\r\nexport const lastMessageMarginBottomState = atom<number>({\r\n  key: \"recoil/lastMessageMarginBottomState\",\r\n  default: 0,\r\n});\r\n//#endregion\r\n\r\n//#region /users 회원가입\r\nexport const userDataState = atom<UserType | null>({\r\n  key: \"recoil/userDataState\",\r\n  default: null,\r\n  effects_UNSTABLE: [localStorageEffect(\"recoil/userDataState\")],\r\n});\r\n//#endregion","export const getPlatform = () => {\r\n  if (/Android/i.test(navigator.userAgent)) {\r\n    // 안드로이드\r\n    return \"android\";\r\n  } else if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {\r\n    // iOS 아이폰, 아이패드, 아이팟\r\n    return \"ios\";\r\n  } else {\r\n    // 그 외 디바이스\r\n    return \"other\";\r\n  }\r\n};\r\nfunction getOperatingSystem(window) {\r\n  let operatingSystem = \"Not known\";\r\n  if (window.navigator.appVersion.indexOf(\"Win\") !== -1) {\r\n    operatingSystem = \"Windows OS\";\r\n  }\r\n  if (window.navigator.appVersion.indexOf(\"Mac\") !== -1) {\r\n    operatingSystem = \"MacOS\";\r\n  }\r\n  if (window.navigator.appVersion.indexOf(\"X11\") !== -1) {\r\n    operatingSystem = \"UNIX OS\";\r\n  }\r\n  if (window.navigator.appVersion.indexOf(\"Linux\") !== -1) {\r\n    operatingSystem = \"Linux OS\";\r\n  }\r\n\r\n  return operatingSystem;\r\n}\r\nfunction getBrowser(window) {\r\n  let currentBrowser = \"Not known\";\r\n  if (window.navigator.userAgent.indexOf(\"Chrome\") !== -1) {\r\n    currentBrowser = \"Google Chrome\";\r\n  } else if (window.navigator.userAgent.indexOf(\"Firefox\") !== -1) {\r\n    currentBrowser = \"Mozilla Firefox\";\r\n  } else if (window.navigator.userAgent.indexOf(\"MSIE\") !== -1) {\r\n    currentBrowser = \"Internet Exployer\";\r\n  } else if (window.navigator.userAgent.indexOf(\"Edge\") !== -1) {\r\n    currentBrowser = \"Edge\";\r\n  } else if (window.navigator.userAgent.indexOf(\"Safari\") !== -1) {\r\n    currentBrowser = \"Safari\";\r\n  } else if (window.navigator.userAgent.indexOf(\"Opera\") !== -1) {\r\n    currentBrowser = \"Opera\";\r\n  } else if (window.navigator.userAgent.indexOf(\"Opera\") !== -1) {\r\n    currentBrowser = \"YaBrowser\";\r\n  } else {\r\n    currentBrowser = \"Others\";\r\n  }\r\n\r\n  return currentBrowser;\r\n}\r\n\r\nexport const OS = () => {\r\n  return getOperatingSystem(window);\r\n};\r\nexport const Browser = () => {\r\n  return getBrowser(window);\r\n};","import axios from \"axios\";\r\nimport KakaoLogin from \"react-kakao-login\";\r\nimport { LoginResponse } from \"react-kakao-login/lib/types\";\r\nimport { useHistory } from \"react-router\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { getfetch, postfetch } from \"../common\";\r\nimport { Browser, OS } from \"../common/function/getPlatform\";\r\nimport { loadingState, userDataState } from \"../recoil\";\r\n\r\nexport const KaKaoLoginBtn = ({ width=64}) => {\r\n  const [userData, setUserData] = useRecoilState(userDataState);\r\n  const [, setLoading] = useRecoilState(loadingState); //loading\r\n  const history = useHistory();\r\n\r\n  //#region 회원가입하기\r\n  const onSuccess = async (response: { response: LoginResponse; profile?: any | profileType | undefined }) => {\r\n    const prof = response.profile;\r\n    const res = response.response;\r\n    if (!res || !prof || !prof.kakao_account.email) {\r\n      alert(\"로그인 오류입니다. 잠시후에 다시 시도해주세요.\");\r\n      return;\r\n    }\r\n    const ipRes: any = await axios.get(\"https://geolocation-db.com/json/\");\r\n    const ip = ipRes && ipRes.data && ipRes.data.IPv4 ? ipRes.data.IPv4 : \"\";\r\n\r\n    const signRes = await getfetch(`/users?kakao_id=${prof.id}`);\r\n    setLoading(true)\r\n    if (signRes && !!signRes.length && signRes.length > 0 && typeof signRes[0].id == \"number\") {\r\n      setLoading(false)\r\n      setUserData(signRes[0]);\r\n    } else\r\n      await postfetch(`/users`, {\r\n        os: OS() ?? \"\",\r\n        browser: Browser() ?? \"\",\r\n        username: prof.id,\r\n        email: prof.id + \"@samplemail.com\",\r\n        password: prof.id,\r\n        confirmed: true,\r\n        blocked: false,\r\n        role: 1,\r\n        nickname: prof.properties.nickname ?? \"\",\r\n        profile_image: prof.properties.thumbnail_image ?? \"\",\r\n        point: 0,\r\n        greeting: \"\",\r\n        last_logined_ip: ip,\r\n        gender: prof.kakao_account.gender === \"male\" ? \"M\" : prof.kakao_account.gender === \"female\" ? \"W\" : \"None\",\r\n\r\n        kakao_id: prof.id,\r\n        kakao_nickname: prof.properties.nickname ?? \"\",\r\n        kakao_profile_image: prof.properties.profile_image ?? \"\",\r\n        kakao_profile_thumbnail: prof.properties.thumbnail_image ?? \"\",\r\n        kakao_email: prof.kakao_account.email ?? \"\",\r\n        kakao_age_range: prof.kakao_account.age_range ?? \"\",\r\n        kakao_birthday: prof.kakao_account.birthday ?? \"\",\r\n        kakao_birthday_type: prof.kakao_account.birthday_type ?? \"\",\r\n        kakao_gender: prof.kakao_account.gender ?? \"\",\r\n        kakao_access_token: res.access_token ?? \"\",\r\n        kakao_token_type: res.token_type ?? \"\",\r\n        kakao_refresh_token: res.refresh_token ?? \"\",\r\n        kakao_expires_in: res.expires_in ?? \"\",\r\n        kakao_refresh_token_expires_in: res.refresh_token_expires_in ?? \"\",\r\n      }).then((d) => {\r\n        setLoading(false)\r\n        if (d.statusCode === 400) console.error(\"로그인실패..\", d);\r\n        else {\r\n          setUserData(d);\r\n        }\r\n        history.goBack();\r\n      });\r\n  };\r\n  //#endregion\r\n  // 로그인된 상태에서 버튼 누르면 로그아웃됌\r\n  return (\r\n    <></>\r\n    // <KakaoLogin\r\n      \r\n    //   token={\"0319421ef3dceca8c69d3b04efc365dc\"}\r\n    //   onSuccess={onSuccess}\r\n    //   onFail={(p) => console.error(p)}\r\n    //   onLogout={() => console.log(\"logout!\")}\r\n    //   useLoginForm\r\n    //   style={{ backgroundColor: '#ffeb00', width: width, border:'none'  }}\r\n      \r\n    // ><p style={{color:'black'}}>로그인</p></KakaoLogin>\r\n  );\r\n};\r\n\r\ntype profileType = {\r\n  id: number; //1452229818, kakao_id\r\n  connected_at: string; //\"2020-08-16T13:03:44Z\",\r\n  properties: {\r\n    nickname: string; //\"김민성\", kakao_nickname\r\n    profile_image: string; //\"http://k.kakaocdn.net/dn/j0ZNn/btqGmUejwAP/3d6x9Sz0oRgj83NUITVul1/img_640x640.jpg\", kakao_profile_image\r\n    thumbnail_image: string; //\"http://k.kakaocdn.net/dn/j0ZNn/btqGmUejwAP/3d6x9Sz0oRgj83NUITVul1/img_110x110.jpg\" kakao_profile_thumbnail\r\n  };\r\n  kakao_account: {\r\n    profile_nickname_needs_agreement: boolean; //false,\r\n    profile_image_needs_agreement: boolean; //false,\r\n    profile: {\r\n      nickname: string; //\"김민성\",\r\n      thumbnail_image_url: string; //\"http://k.kakaocdn.net/dn/bCEqSJ/btriSkOib8t/sMrNWCubb6C5X8kP9jJAh0/img_110x110.jpg\",\r\n      profile_image_url: string; //\"http://k.kakaocdn.net/dn/bCEqSJ/btriSkOib8t/sMrNWCubb6C5X8kP9jJAh0/img_640x640.jpg\",\r\n      is_default_image: boolean; //false\r\n    };\r\n    has_email: boolean; //true,\r\n    email_needs_agreement: boolean; //false,\r\n    is_email_valid: boolean; //true,\r\n    is_email_verified: boolean; //true,\r\n    email: string; //\"tkarnrwl7862@gmail.com\", kakao_email\r\n    has_age_range: boolean; //true,\r\n    age_range_needs_agreement: boolean; //false,\r\n    age_range: string; //\"20~29\", kakao_age_range\r\n    has_birthday: boolean; //true,\r\n    birthday_needs_agreement: boolean; //false,\r\n    birthday: string; //\"0402\", kakao_birthday\r\n    birthday_type: string; //\"SOLAR\", kakao_birthday_type\r\n    has_gender: boolean; //true,\r\n    gender_needs_agreement: boolean; //false,\r\n    gender: string; //\"male\" kakao_gender\r\n  };\r\n};\r\ntype ResponseType = {\r\n  access_token: string; //\"K_mx0s8UySOt\",  kakao_access_token\r\n  token_type: string; //\"bearer\", kakao_token_type\r\n  refresh_token: string; //\"umOUzyj3hvSR\", kakao_refresh_token\r\n  expires_in: number; //7199, kakao_expires_in\r\n  scope: string; //\"age_range birthday account_email profile_image talk_message gender profile_nickname\",\r\n  refresh_token_expires_in: number; //5183999 kakao_refresh_token_expires_in\r\n};\r\n","import { homeTabIndexState, userDataState } from \"../components/recoil\";\r\nimport { HEADER_HEIGHT } from \"./../style/index\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { useHistory } from \"react-router\";\r\nimport useWindowDimensions from \"../hook/useWindowDimensions\";\r\nimport { KaKaoLoginBtn } from \"./Btn/LoginBtn\";\r\n\r\nexport const BottomHeader = ({ title, noProfile=false }) => {\r\n  const [userData] = useRecoilState(userDataState);\r\n\r\n  const { height, width } = useWindowDimensions();\r\n  const history = useHistory();\r\n  const [homeTabIndex, setHomeTabIndex] = useRecoilState(homeTabIndexState);\r\n  const onClick = (index) => {\r\n    if (homeTabIndex !== index) {\r\n      if (index === 1) history.push(\"/\");\r\n      else if (index === 0) history.push(\"/course\");\r\n      setHomeTabIndex(index);\r\n    }\r\n  };\r\n\r\n  const goToUser = () => {\r\n    if (userData) history.push(`/user/${userData.id}`);\r\n    else alert(\"로그인을 먼저 해야 다른 유저의 정보를 확인할 수 있습니다.\");\r\n  };\r\n  return (\r\n    <div style={{ height: HEADER_HEIGHT, width: width, display: \"flex\", alignItems: \"center\", paddingTop: 8 }}>\r\n      <div style={inlineStyle.flex}></div>\r\n      <div style={inlineStyle.barFlexInner}>\r\n        <div style={inlineStyle.flexL}>\r\n          {!title ? (\r\n            <div\r\n              style={\r\n                homeTabIndex === 0\r\n                  ? {\r\n                      ...inlineStyle.noStyleBtnActive,\r\n                      display: \"flex\",\r\n                      justifyContent: \"right\",\r\n                    }\r\n                  : { ...inlineStyle.noStyleBtn, display: \"flex\", justifyContent: \"right\" }\r\n              }\r\n              onClick={() => onClick(0)}\r\n            >\r\n              코스\r\n            </div>\r\n          ) : (\r\n            false\r\n          )}\r\n        </div>\r\n        <div style={{ margin: \"0 12px\", alignSelf: \"flex-start\", fontWeight: \"bold\", fontSize: 15 }}>\r\n          {!title ? \"|\" : title}\r\n        </div>\r\n        <div style={inlineStyle.flexL}>\r\n          {!title ? (\r\n            <div\r\n              style={homeTabIndex === 1 ? inlineStyle.noStyleBtnActive : inlineStyle.noStyleBtn}\r\n              onClick={() => onClick(1)}\r\n            >\r\n              지도\r\n            </div>\r\n          ) : (\r\n            false\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div style={inlineStyle.flex}>\r\n        <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"end\", marginRight: width * 0.05 }}>\r\n          {!noProfile ? (\r\n            userData ? (\r\n              <div\r\n                onClick={goToUser}\r\n                style={{\r\n                  ...inlineStyle.noStyleBtn,\r\n                  border: `3px solid #F1F3F5`,\r\n                  borderRadius: 200,\r\n                  backgroundColor: \"#F1F3F5\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  display: \"flex\",\r\n                  width: 44,\r\n                  height: 44,\r\n                }}\r\n              >\r\n                <img\r\n                  alt={\" \"}\r\n                  width={32}\r\n                  height={32}\r\n                  style={{ borderRadius: 200 }}\r\n                  src={\r\n                    userData.profile_image ??\r\n                    \"https://interactive-examples.mdn.mozilla.net/media/cc0-images/grapefruit-slice-332-332.jpg\"\r\n                  }\r\n                ></img>\r\n              </div>\r\n            ) : (\r\n              <KaKaoLoginBtn />\r\n            )\r\n          ) : (\r\n            false\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst inlineStyle = {\r\n  barFlexInner: { flex: 1, display: \"flex\", justifyContent: \"center\", alignItems: \"baseline\" },\r\n  flex: { flex: 1 },\r\n  flexL: { float: \"left\" },\r\n  noStyleBtnActive: { backgroundColor: \"transparent\", border: \"none\", fontSize: 17, fontWeight: \"bold\", width: \"4em\" },\r\n  noStyleBtn: { backgroundColor: \"transparent\", border: \"none\", fontSize: 15, fontWeight: \"normal\", width: \"4em\" },\r\n  BtnProfile: {},\r\n};\r\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport * as fal from \"@fortawesome/pro-light-svg-icons\";\r\nimport * as far from \"@fortawesome/pro-regular-svg-icons\";\r\n\r\nimport { useRecoilState } from \"recoil\";\r\nimport { BottomModalState, bottomTabIndexState, homeTabIndexState } from \"./recoil\";\r\nimport { GRAY9 } from \"../style\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport useWindowDimensions from \"../hook/useWindowDimensions\";\r\n\r\nexport const BottomTabBar = () => {\r\n  const history = useHistory();\r\n  const { height, width } = useWindowDimensions();\r\n  const [homeTabIndex] = useRecoilState(homeTabIndexState);\r\n  const [, setVisible] = useRecoilState(BottomModalState);\r\n  const [bottomTabIndex, setBottomTabIndex] = useRecoilState(bottomTabIndexState);\r\n\r\n  const onClick = (index) => {\r\n    if (bottomTabIndex !== index) {\r\n      if (homeTabIndex === 1 && index === 1) {\r\n        if (history.location.pathname !== \"/\") {\r\n          history.replace(\"/\");\r\n          setBottomTabIndex(0);\r\n        }\r\n        setVisible(true);\r\n        return;\r\n      }\r\n      if (homeTabIndex === 1 && index === 0) history.replace(\"/\");\r\n      else if (homeTabIndex === 0 && index === 0) history.replace(\"/course\");\r\n      else if (homeTabIndex === 0 && index === 1) history.replace(\"/search\");\r\n      else if (index === 2) history.replace(\"/shop\");\r\n      else if (index === 3) history.replace(\"/mychat\");\r\n      setBottomTabIndex(index);\r\n    }\r\n  };\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"fixed\",\r\n        bottom: 48,\r\n        height: 42,\r\n        boxShadow: \"0.2px 0.2px 0 0 gray\",\r\n        borderRadius: 10,\r\n        width: width * 0.8,\r\n        marginLeft: width * 0.1,\r\n        backgroundColor: \"white\",\r\n      }}\r\n    >\r\n      <div style={inlineStyle.barFlexInner}>\r\n        <div style={inlineStyle.barTxt}>\r\n          <div style={inlineStyle.noStyleBtn} onClick={() => onClick(0)}>\r\n            <FontAwesomeIcon\r\n              icon={bottomTabIndex === 0 ? far.faHome : fal.faHome}\r\n              size={\"lg\"}\r\n              opacity={bottomTabIndex === 0 ? 1 : 0.3}\r\n              color={GRAY9}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div style={inlineStyle.barTxt}>\r\n          <div style={inlineStyle.noStyleBtn} onClick={() => onClick(1)}>\r\n            <FontAwesomeIcon\r\n              icon={\r\n                homeTabIndex === 1\r\n                  ? bottomTabIndex === 1\r\n                    ? far.faSearchLocation\r\n                    : fal.faSearchLocation\r\n                  : bottomTabIndex === 1\r\n                  ? far.faTelescope\r\n                  : fal.faTelescope\r\n              }\r\n              size={\"lg\"}\r\n              opacity={bottomTabIndex === 1 ? 1 : 0.3}\r\n              color={GRAY9}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div style={inlineStyle.barTxt}>\r\n          <div style={inlineStyle.noStyleBtn} onClick={() => onClick(2)}>\r\n            <FontAwesomeIcon\r\n              icon={bottomTabIndex === 2 ? far.faShoppingBag : fal.faShoppingBag}\r\n              size={\"lg\"}\r\n              opacity={bottomTabIndex === 2 ? 1 : 0.3}\r\n              color={GRAY9}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div style={inlineStyle.barTxt}>\r\n          <div style={inlineStyle.noStyleBtn} onClick={() => onClick(3)}>\r\n            <FontAwesomeIcon\r\n              icon={bottomTabIndex === 3 ? far.faEnvelope : fal.faEnvelope}\r\n              size={\"lg\"}\r\n              opacity={bottomTabIndex === 3 ? 1 : 0.3}\r\n              color={GRAY9}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst inlineStyle = {\r\n  barFlexInner: {\r\n    display: \"flex\",\r\n    height: 42,\r\n    alignItems: \"center\",\r\n  },\r\n  barTxt: {\r\n    flex: 1,\r\n    textAlign: \"center\",\r\n  },\r\n  noStyleBtn: { backgroundColor: \"transparent\", border: \"none\" },\r\n};\r\n","import { faEdit } from \"@fortawesome/pro-light-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport useWindowDimensions from \"../../hook/useWindowDimensions\";\r\nimport { CreateBottomModalState } from \"../recoil\";\r\n\r\nexport const CreateBtn = () => {\r\n  const [, setVisible] = useRecoilState(CreateBottomModalState);\r\n  const { height, width } = useWindowDimensions();\r\n  const onClick = () => {\r\n    setVisible(true);\r\n  };\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"fixed\",\r\n        width: 48,\r\n        height: 48,\r\n        borderRadius: 200,\r\n        backgroundColor: \"white\",\r\n        bottom: 96 + 24,\r\n        right: width * 0.125,\r\n        boxShadow: \"0.2px 0.2px 0 0 gray\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n      }}\r\n      onClick={onClick}\r\n    >\r\n      <FontAwesomeIcon icon={faEdit} size={\"sm\"} />\r\n    </div>\r\n  );\r\n};\r\n","import { NAVER_API_KEY, NAVER_API_SECRET_KEY, isHttp } from \"..\";\r\n\r\nexport const getPath = (x1, y1, x2, y2) => {\r\n  //&option={탐색옵션}\r\n  return new Promise((resolve, reject) => {\r\n    const Base_URL = `https://naveropenapi.apigw.ntruss.com/map-direction/v1/driving?start=${x1},${y1}&goal=${x2},${y2}`;\r\n    const url = Base_URL; //ProxyURL +\r\n    fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        mode: \"no-cors\",\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        \"X-NCP-APIGW-API-KEY-ID\": NAVER_API_KEY,\r\n        \"X-NCP-APIGW-API-KEY\": NAVER_API_SECRET_KEY,\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n    })\r\n      .then((d) => d.json())\r\n      .then((d) =>\r\n        resolve({\r\n          path: d.route.traoptimal[0].path,\r\n          distance: Number(Number(d.route.traoptimal[0].summary.distance / 1000).toFixed(1)),\r\n          duration: Number(Number(d.route.traoptimal[0].summary.duration / 60000).toFixed(0)),\r\n          departureTime: d.route.traoptimal[0].summary.departureTime,\r\n          taxiFare: d.route.traoptimal[0].summary.taxiFare,\r\n        })\r\n      )\r\n      .catch((e) => reject(e));\r\n  });\r\n};\r\n","import { GRAY8 } from \"./../style/index\";\r\n\r\nexport const PathInfo = ({ data }) => {\r\n  if (typeof data.distance != \"number\" || data.distance < 1) return <div></div>;\r\n  return (\r\n    <div style={{ width: \"100%\", height: 40, top: 10, position: \"absolute\", display: \"flex\", alignItems: \"center\" }}>\r\n      <div\r\n        style={{\r\n          flex: 1,\r\n          justifyContent: \"center\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          backgroundColor: \"rgba(222, 226, 230,0.8)\",\r\n          paddingTop: 4,\r\n          paddingBottom: 4,\r\n          margin: 10,\r\n          borderRadius: 10,\r\n        }}\r\n      >\r\n        <div style={{ textAlign: \"center\", color: GRAY8, fontSize: 11 }}>택시 거리</div>\r\n        <div style={{ textAlign: \"center\", color: GRAY8, fontSize: 15 }}>{data.distance}km</div>\r\n      </div>\r\n      <div\r\n        style={{\r\n          flex: 1,\r\n          justifyContent: \"center\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          backgroundColor: \"rgba(222, 226, 230,0.8)\",\r\n          paddingTop: 4,\r\n          paddingBottom: 4,\r\n          margin: 10,\r\n          borderRadius: 10,\r\n        }}\r\n      >\r\n        <div style={{ textAlign: \"center\", color: GRAY8, fontSize: 11 }}>예상 시간</div>\r\n        <div style={{ textAlign: \"center\", color: GRAY8, fontSize: 15 }}>{data.duration}분</div>\r\n      </div>\r\n      <div\r\n        style={{\r\n          flex: 1,\r\n          justifyContent: \"center\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          backgroundColor: \"rgba(222, 226, 230,0.8)\",\r\n          paddingTop: 4,\r\n          paddingBottom: 4,\r\n          margin: 10,\r\n          borderRadius: 10,\r\n        }}\r\n      >\r\n        <div style={{ textAlign: \"center\", color: GRAY8, fontSize: 11 }}>택시 요금</div>\r\n        <div style={{ textAlign: \"center\", color: GRAY8, fontSize: 15 }}>{data.taxiFare}원</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  RenderAfterNavermapsLoaded,\r\n  NaverMap,\r\n  Marker,\r\n  // Circle,\r\n  // GroundOverlay,\r\n  // Ellipse,\r\n  Polyline,\r\n} from \"react-naver-maps\";\r\n\r\nimport { HEADER_HEIGHT, SCREEN_HEIGHT } from \"./../style\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport {\r\n  BottomModalState,\r\n  ChatRoomListState,\r\n  ChatRoomSeletedState,\r\n  CreateBottomModalState,\r\n  endPosState,\r\n  loadingState,\r\n  MyPosState,\r\n  pathState,\r\n  SearchPositionState,\r\n  SearchPosResultState,\r\n  startPosState,\r\n} from \"./recoil\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { NAVER_API_KEY, posInit } from \"./common\";\r\nimport { getfetch } from \"./common/index\";\r\nimport { getPath } from \"./common/function/getPath\";\r\nimport { PathInfo } from \"./PathInfo\";\r\nimport _ from \"lodash\";\r\nimport useWindowDimensions from \"../hook/useWindowDimensions\";\r\n\r\nexport const NMAP = () => {\r\n  return (\r\n    <RenderAfterNavermapsLoaded\r\n      ncpClientId={NAVER_API_KEY} // 자신의 네이버 계정에서 발급받은 Client ID\r\n      error={<p>Maps Load Error</p>}\r\n      loading={<p>Maps Loading...</p>}\r\n    >\r\n      <NaverMapAPI />\r\n    </RenderAfterNavermapsLoaded>\r\n  );\r\n};\r\nfunction NaverMapAPI() {\r\n  //#region 방생성 state\r\n  const { height, width } = useWindowDimensions();\r\n  const [visibleSearch, setVisibleSearch] = useRecoilState(SearchPositionState);\r\n  const [searchResult, setSearchResult] = useRecoilState(SearchPosResultState);\r\n  const [visibleCreate, setVisibleCreate] = useRecoilState(CreateBottomModalState);\r\n  const [visible, setVisible] = useRecoilState(BottomModalState);\r\n  const [, setLoading] = useRecoilState(loadingState); //loading\r\n\r\n  const [myPos] = useRecoilState(MyPosState); //setMyPos\r\n  const [startPos, setStartPos] = useRecoilState(startPosState);\r\n  const [endPos, setEndPos] = useRecoilState(endPosState);\r\n  const [path, setPath] = useRecoilState(pathState);\r\n\r\n  //# 기본 데이터\r\n  const navermaps = window.naver.maps;\r\n  const [bounds, setBounds] = useState(\r\n    new navermaps.LatLngBounds(\r\n      new navermaps.LatLng(37.5391768, 126.9980514),\r\n      new navermaps.LatLng(37.5591768, 126.9780514)\r\n    )\r\n  );\r\n  const [chatRoomList, setChatRoomList] = useRecoilState(ChatRoomListState);\r\n  const naverMapRef = useRef();\r\n\r\n  //# 방검색 데이터\r\n  const [chatRoomSeleted, setChatRoomSeleted] = useRecoilState(ChatRoomSeletedState);\r\n\r\n  //# useEffect\r\n  useEffect(() => {\r\n    // https://www.campus-taxi.com:444/chat-rooms?start_at_gt=2021-11-20T15:19:20.000Z\r\n    getfetch(`/chat-rooms?start_at_gt=${new Date().toISOString()}`).then((d) =>\r\n      setChatRoomList(\r\n        d.map((room) => {\r\n          return { ...room, path: _.chunk(_.split(room.path, \",\"), 2) };\r\n        })\r\n      )\r\n    );\r\n  }, []);\r\n\r\n  useEffect(async () => {\r\n    if (endPos.place_name && startPos.place_name) {\r\n      let x1 = Number(startPos.x);\r\n      let y1 = Number(startPos.y);\r\n      let x2 = Number(endPos.x);\r\n      let y2 = Number(endPos.y);\r\n      setBounds(new navermaps.LatLngBounds(new navermaps.LatLng(y1 - 0.04, x1), new navermaps.LatLng(y2 + 0.02, x2)));\r\n      setLoading(true);\r\n      await getPath(x1, y1, x2, y2).then((d) => {\r\n        if (typeof d.distance === \"number\" && d.distance > 0) setPath(d);\r\n      });\r\n      setLoading(false);\r\n    } else if (startPos.place_name.length > 0 || endPos.place_name.length > 0) {\r\n      const Pos = startPos.place_name.length > 0 ? startPos : endPos;\r\n      setBounds(\r\n        new navermaps.LatLngBounds(\r\n          new navermaps.LatLng(Number(Pos.y) - 0.02, Number(Pos.x)),\r\n          new navermaps.LatLng(Number(Pos.y) + 0.02, Number(Pos.x))\r\n        )\r\n      );\r\n    }\r\n  }, [startPos.place_name, endPos.place_name]);\r\n\r\n  useEffect(() => {\r\n    if (chatRoomSeleted.id !== -1 && naverMapRef.current) {\r\n      let x1 = Number(chatRoomSeleted.start_route.x);\r\n      let y1 = Number(chatRoomSeleted.start_route.y);\r\n      let x2 = Number(chatRoomSeleted.end_route.x);\r\n      let y2 = Number(chatRoomSeleted.end_route.y);\r\n      setBounds(new navermaps.LatLngBounds(new navermaps.LatLng(y1 - 0.08, x1), new navermaps.LatLng(y2 + 0.02, x2)));\r\n    }\r\n  }, [chatRoomSeleted]);\r\n\r\n  //# 함수\r\n  const onClickMarker = (pos) => {\r\n    if (visibleSearch.position === \"start\") setStartPos(pos);\r\n    else setEndPos(pos);\r\n    setSearchResult({ documents: [posInit], meta: { is_end: true, pageable_count: -1, total_count: -1 } });\r\n    setVisibleCreate(true);\r\n    setVisibleSearch({ visible: false, position: \"\" });\r\n  };\r\n  //#endregion\r\n\r\n  return (\r\n    <NaverMap\r\n      ref={naverMapRef}\r\n      mapDivId={\"maps-getting-started-uncontrolled\"} // default: react-naver-map\r\n      style={{\r\n        width: width, // 네이버지도 가로 길이\r\n        height: SCREEN_HEIGHT - HEADER_HEIGHT - 16, // 네이버지도 세로 길이\r\n        marginTop: 8,\r\n        outline: \"none\",\r\n      }}\r\n      defaultCenter={myPos} // 지도 초기 위치\r\n      // onDrag={onDrag} // TEST CODE\r\n      bounds={bounds}\r\n      onBoundsChanged={setBounds}\r\n    >\r\n      {chatRoomList.length > 0 &&\r\n        chatRoomList.map((room, i) => (\r\n          <div key={i.toString()}>\r\n            {/* DB 모든 출발지 */}\r\n            <ImageMarker\r\n              color={\"#FF6F6F\"}\r\n              onClick={() => {\r\n                setChatRoomSeleted(room);\r\n                setVisible(true);\r\n              }}\r\n              position={new navermaps.LatLng(Number(room.start_route.y), Number(room.start_route.x))}\r\n              navermaps={navermaps}\r\n            />\r\n            {/* DB 모든 도착지 */}\r\n            <ImageMarker\r\n              onClick={() => {\r\n                setChatRoomSeleted(room);\r\n                setVisible(true);\r\n              }}\r\n              position={new navermaps.LatLng(Number(room.end_route.y), Number(room.end_route.x))}\r\n              navermaps={navermaps}\r\n            />\r\n          </div>\r\n        ))}\r\n      {/* 출->도 직선경로 */}\r\n      {chatRoomList.length > 0 &&\r\n        chatRoomList\r\n          // .map((room) => room.end_route)\r\n          .map((room, i) => (\r\n            <Polyline\r\n              key={i.toString()}\r\n              path={[\r\n                new navermaps.LatLng(Number(room.start_route.y), Number(room.start_route.x)),\r\n                new navermaps.LatLng(Number(room.end_route.y), Number(room.end_route.x)),\r\n              ]}\r\n              strokeColor={\"#FF6E6E\"}\r\n              strokeOpacity={0.2}\r\n              strokeWeight={3}\r\n            />\r\n          ))}\r\n      {/* 검색결과 */}\r\n      {visibleSearch.visible &&\r\n        searchResult.documents.map((pos, i) => (\r\n          <Marker\r\n            key={i.toString()}\r\n            position={new navermaps.LatLng(Number(pos.y), Number(pos.x))}\r\n            animation={1}\r\n            onClick={() => onClickMarker(pos)}\r\n          />\r\n        ))}\r\n      {/* 방 생성 시 출/도 표시 */}\r\n      {(visibleCreate || visibleSearch.position === \"end\") && startPos.place_name ? (\r\n        <ImageMarker\r\n          url={\"/images/startPosIcon.png\"}\r\n          position={new navermaps.LatLng(Number(startPos.y), Number(startPos.x))}\r\n          navermaps={navermaps}\r\n        />\r\n      ) : (\r\n        false\r\n      )}\r\n      {(visibleCreate || visibleSearch.position === \"start\") && endPos.place_name ? (\r\n        <ImageMarker\r\n          url={\"/images/endPosIcon.png\"}\r\n          position={new navermaps.LatLng(Number(endPos.y), Number(endPos.x))}\r\n          navermaps={navermaps}\r\n        />\r\n      ) : (\r\n        false\r\n      )}\r\n      {/* 출->도 실제 택시경로 */}\r\n      {(startPos.place_name.length > 0 && endPos.place_name.length > 0 && path.distance > 0 && visibleCreate) ||\r\n      (chatRoomSeleted.path.length > 0 && visible) ? (\r\n        <>\r\n          <PathInfo data={path.distance > 0 && visibleCreate ? path : chatRoomSeleted} />\r\n          <Polyline\r\n            path={\r\n              path.distance > 0 && visibleCreate\r\n                ? path.path.map((line) => new navermaps.LatLng(Number(line[1]), Number(line[0])))\r\n                : chatRoomSeleted && chatRoomSeleted.path\r\n                ? chatRoomSeleted.path.map((line) => new navermaps.LatLng(Number(line[1]), Number(line[0])))\r\n                : []\r\n            }\r\n            strokeColor={\"red\"}\r\n            strokeOpacity={1}\r\n            strokeWeight={5}\r\n            strokeStyle={\"solid\"}\r\n            strokeLineCap={\"round\"}\r\n            strokeLineJoin={\"round\"}\r\n            startIcon={3}\r\n            startIconSize={20}\r\n            endIcon={1}\r\n            endIconSize={20}\r\n          />\r\n        </>\r\n      ) : (\r\n        false\r\n      )}\r\n    </NaverMap>\r\n  );\r\n}\r\n\r\nfunction ImageMarker(props) {\r\n  const navermaps = props.navermaps;\r\n  const icon = {\r\n    content: `<div onClick=\\\"${props.onClick}\\\"><img alt=\\\" \\\" style=\\\"${\r\n      !props.url ? \"border-radius:30px;border-style:solid;\" : \"\"\r\n    }border-color:${props.color ?? \"#535353\"};border-width:3px\\\" width=37 height=${props.url ? 48 : 37} src=${\r\n      props.url ?? \"https://interactive-examples.mdn.mozilla.net/media/cc0-images/grapefruit-slice-332-332.jpg\"\r\n    } /></div>`,\r\n    size: new navermaps.Size(20, 20),\r\n    anchor: new navermaps.Point(20, 20),\r\n  };\r\n\r\n  return <Marker title=\"Green\" icon={icon} {...props} />;\r\n}\r\n","import { GRAY2, GRAY7, GRAY9 } from \"../../style\";\r\nimport { forwardRef, useState, useCallback, Ref } from \"react\";\r\nimport { CreateBottomModalState, SearchPositionState } from \"../recoil\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { Icon } from \"../common/Icon\";\r\nimport TextareaAutosize from \"react-autosize-textarea\";\r\nimport useWindowDimensions from \"../../hook/useWindowDimensions\";\r\n\r\ntype InputProps = {\r\n  onChange: (t: string) => void;\r\n  placeholder?: string;\r\n  inputMode?: \"search\" | \"text\" | \"none\" | \"tel\" | \"url\" | \"email\" | \"numeric\" | \"decimal\";\r\n  type?: string;\r\n  readOnly?: boolean;\r\n  disabled?: boolean;\r\n  defaultValue?: string;\r\n  inputRef?: React.LegacyRef<HTMLInputElement>;\r\n};\r\nexport const Input = ({\r\n  onChange,\r\n  placeholder,\r\n  inputMode,\r\n  type,\r\n  readOnly = false,\r\n  disabled = false,\r\n  defaultValue,\r\n  inputRef,\r\n}: InputProps) => {\r\n  const onChangeInupt = (e: any) => {\r\n    if (onChange) onChange(e.target.value);\r\n  };\r\n  const { height, width } = useWindowDimensions();\r\n  return (\r\n    <input\r\n      ref={inputRef}\r\n      defaultValue={defaultValue}\r\n      onChange={onChangeInupt}\r\n      readOnly={readOnly ?? false}\r\n      inputMode={inputMode ?? \"text\"}\r\n      placeholder={placeholder}\r\n      type={type ?? \"\"}\r\n      disabled={disabled ?? false}\r\n      style={{\r\n        width: width - 60,\r\n        backgroundColor: GRAY2,\r\n        border: \"none\",\r\n        padding: 10,\r\n        borderRadius: 10,\r\n        fontSize: 15,\r\n        color: GRAY7,\r\n        outline: \"none\",\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\ntype TextareaType = {\r\n  onChange?: (e:string)=>void;\r\n  placeholder?: string;\r\n  style?: object;\r\n  maxrows?: number;\r\n  TextareaRef?: any;\r\n  disabled?: boolean;\r\n  defaultValue?: string;\r\n};\r\nexport const Textarea = ({ onChange, placeholder, style, maxrows, TextareaRef, disabled = false, defaultValue }: TextareaType) => {\r\n  const [rowIndex, setRowIndex] = useState({ height: 0, index: 0 });\r\n  const { height, width } = useWindowDimensions();\r\n  const onChangeInput = useCallback(\r\n    (e) => {\r\n      if (!!onChange) onChange(e.target.value);\r\n      if (!!maxrows) {\r\n        if (rowIndex.index < maxrows && rowIndex.height < e.target.scrollHeight)\r\n          setRowIndex({ index: rowIndex.index + 1, height: e.target.scrollHeight });\r\n        else if (rowIndex.height < e.target.scrollHeight) e.target.value = e.target.value.slice(0, -1);\r\n        e.target.style.maxHeight = rowIndex.height - 4 + \"px\";\r\n        e.target.style.height = rowIndex.height - 4 + \"px\";\r\n      }\r\n    },\r\n    [rowIndex, maxrows]\r\n  );\r\n  return (\r\n    <TextareaAutosize\r\n      disabled={disabled}\r\n      ref={TextareaRef}\r\n      // rows={rows ?? 1}\r\n      onChange={onChangeInput}\r\n      placeholder={placeholder}\r\n      maxRows={maxrows}\r\n      // onResize={onResizeInput}\r\n      defaultValue={defaultValue}\r\n      style={\r\n        style\r\n          ? style\r\n          : {\r\n            width: width - 60,\r\n            height: \"20px\",\r\n            backgroundColor: GRAY2,\r\n            border: \"none\",\r\n            padding: 10,\r\n            borderRadius: 10,\r\n            fontSize: 15,\r\n            color: GRAY7,\r\n            resize: \"none\",\r\n            fontFamily: \"AppleSDGothic\",\r\n            overflow: \"hidden\",\r\n            outline: \"none\",\r\n            \r\n          }\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\ntype SearchProps = {\r\n  value: any;\r\n  placeholder?: string;\r\n  onChange?: (t: string) => void;\r\n  autoFocus?: boolean;\r\n};\r\nexport const InputSearch = ({ value, placeholder, onChange, autoFocus = false }: SearchProps) => {\r\n  const { height, width } = useWindowDimensions();\r\n  const onChangeInput = (e: any) => {\r\n    value.current = e.target.value;\r\n    if (onChange) onChange(e.target.value);\r\n  };\r\n  return (\r\n    <div\r\n      style={{\r\n        width: width - 60,\r\n        backgroundColor: GRAY2,\r\n        border: \"none\",\r\n        padding: 10,\r\n        borderRadius: 10,\r\n      }}\r\n    >\r\n      <Icon type={\"regular\"} name={\"faSearch\"} size={\"lg\"} />\r\n      <input\r\n        autoFocus={autoFocus}\r\n        onChange={onChangeInput}\r\n        style={{\r\n          marginLeft: 6,\r\n          height: \"100%\",\r\n          backgroundColor: GRAY2,\r\n          border: \"none\",\r\n          width: width * 0.7,\r\n          fontSize: width < 400 ? 13 : 14,\r\n          color: GRAY9,\r\n          outline: \"none\",\r\n        }}\r\n        placeholder={placeholder}\r\n      ></input>\r\n    </div>\r\n  );\r\n};\r\n\r\ntype InputMapProps = {\r\n  placeholder: string;\r\n  position: \"start\" | \"end\" | \"place\" | \"\";\r\n}\r\nexport const InputMap = ({ placeholder, position }: InputMapProps) => {\r\n  const [, setVisible] = useRecoilState(CreateBottomModalState);\r\n  const [, setVisibleSearch] = useRecoilState(SearchPositionState); //visibleSearch\r\n  const { height, width } = useWindowDimensions();\r\n  return (\r\n    <div\r\n      style={{\r\n        width: width - 60,\r\n        backgroundColor: GRAY2,\r\n        border: \"none\",\r\n        padding: 10,\r\n        borderRadius: 10,\r\n      }}\r\n      onClick={() => {\r\n        setVisible(false);\r\n        setVisibleSearch({ visible: true, position: position });\r\n      }}\r\n    >\r\n      <div style={{ float: \"left\", justifyContent: \"center\", alignItems: \"center\", display: \"flex\", marginRight: 6 }}>\r\n        <Icon type={\"regular\"} name={\"faSearch\"} size={\"lg\"} />\r\n      </div>\r\n      <div style={{ color: \"#63717f\", fontSize: 15 }}>{placeholder}</div>\r\n    </div>\r\n  );\r\n};\r\n","import { useRef } from \"react\";\r\nimport { InputSearch } from \"./Input\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { SearchPositionState, SearchPosResultState } from \"./recoil\";\r\n\r\nexport const KakaoNativeKey = \"KakaoAK 2ffd2e667110415efb87f207cb33b8be\";\r\nexport const SearchPosition = () => {\r\n  const [, setSearchResult] = useRecoilState(SearchPosResultState); //searchResult\r\n  const [visibleSearch] = useRecoilState(SearchPositionState); //setVisibleSearch\r\n  const title = useRef(\"\");\r\n\r\n  const onChange = (t) => {\r\n    if (t !== \"\")\r\n      fetch(`https://dapi.kakao.com/v2/local/search/keyword.json?query=${t}`, {\r\n        headers: {\r\n          Authorization: KakaoNativeKey,\r\n        },\r\n      })\r\n        .then((d) => d.json())\r\n        .then((d) => setSearchResult(d));\r\n  };\r\n  return (\r\n    <>\r\n      {visibleSearch.visible ? (\r\n        <div style={{ position: \"absolute\", top: 72 + 12, left: 20, zIndex: 1 }}>\r\n          <InputSearch value={title} placeholder={\"검색 장소를 입력해주세요.\"} autoFocus onChange={onChange} />\r\n        </div>\r\n      ) : (\r\n        false\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import { GRAY6, GRAY7, GRAY8, textOverflowHidden } from \"../../style\";\r\nimport { Icon } from \"../common/Icon\";\r\nimport { GRAY4 } from \"./../../style/index\";\r\n\r\nexport const PositionCard = ({\r\n  title,\r\n  desc,\r\n  address,\r\n  url,\r\n  img,\r\n  onClick = ()=> {},\r\n  onClickDelete,\r\n  imgWidth = \"100%\",\r\n  padding = \"16px 16px 0 16px\",\r\n}) => {\r\n  return (\r\n    <div style={{ padding: padding, display: \"flex\", flex: 1 }} onClick={onClick ? onClick : () => {}}>\r\n      <div style={{ flex: 1, display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\r\n        <img alt={\" \"} src={img} width={imgWidth} style={{ borderRadius: 12, maxHeight: \"5em\", maxWidth:\"5em\" }}></img>\r\n      </div>\r\n      <div style={{ flex: 4, marginLeft: 16, alignSelf: \"center\" }}>\r\n        <div style={{ ...textOverflowHidden, fontSize: 12, color: GRAY7 }}>{address}</div>\r\n        <div style={{ ...textOverflowHidden, fontSize: 15, color: GRAY8 }}>{title}</div>\r\n        <div style={{ ...textOverflowHidden, fontSize: 13, color: GRAY6 }}>{desc}</div>\r\n      </div>\r\n      {typeof onClickDelete === \"function\" ? (\r\n        <div style={{ position: \"relative\", width: 16, height: 28, top: -8 }} onClick={onClickDelete}>\r\n          <Icon type={\"regular\"} name={\"faTrashAlt\"} size={\"sm\"} color={GRAY4} />\r\n        </div>\r\n      ) : (\r\n        false\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport const PositionCardReverse = ({ title, desc,imgWidth = \"100%\", address, url, img }) => {\r\n  // onClick={onClick ? onClick : () => {}}\r\n  return (\r\n    <div style={{ padding: \"8px 16px 0 16px\", display: \"flex\" }}>\r\n      <div style={{ flex: 4, marginRight: 16, alignSelf: \"center\" }}>\r\n        <div style={{ ...textOverflowHidden, fontSize: 12, color: GRAY7 }}>{address}</div>\r\n        <div style={{ ...textOverflowHidden, fontSize: 15, color: GRAY8 }}>{title}</div>\r\n        <div style={{ ...textOverflowHidden, fontSize: 13, color: GRAY6 }}>{desc}</div>\r\n      </div>\r\n      <div style={{ flex: 1 }}>\r\n        <img alt={\" \"} src={img} width={imgWidth} style={{ borderRadius: 12, maxHeight: \"5em\", maxWidth: \"5em\" }}></img>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { BottomSheet } from \"react-spring-bottom-sheet\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport {\r\n  CreateBottomModalState,\r\n  endPosState,\r\n  homeTabIndexState,\r\n  placePosState,\r\n  SearchPositionState,\r\n  SearchPosResultState,\r\n  startPosState,\r\n} from \"../components/recoil\";\r\nimport \"react-spring-bottom-sheet/dist/style.css\";\r\nimport \"../style/switch.css\";\r\nimport { SCREEN_HEIGHT } from \"../style\";\r\nimport { GRAY8, GRAY6 } from \"./../style/index\";\r\nimport { posInit } from \"./common\";\r\nimport { PositionCard } from \"./card/PositionCard\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport const SelectMapModal = () => {\r\n  // const title = useRef(\"\");\r\n  const [searchResult, setSearchResult] = useRecoilState(SearchPosResultState);\r\n  const [visibleSearch, setVisibleSearch] = useRecoilState(SearchPositionState);\r\n  const [, setVisibleCreate] = useRecoilState(CreateBottomModalState); //visibleCreate\r\n  const [, setStartPos] = useRecoilState(startPosState); //startPos\r\n  const [, setEndPos] = useRecoilState(endPosState); //endPos\r\n  const [, setPlacePos] = useRecoilState(placePosState); //placePos\r\n  const [, setHomeTabIndex] = useRecoilState(homeTabIndexState); //homeTabIndex\r\n  const history = useHistory();\r\n\r\n  const goBackPlace = (pos) => {\r\n    if (visibleSearch.position === \"place\") {\r\n      if (pos) setPlacePos(pos);\r\n      else setPlacePos(posInit);\r\n      setHomeTabIndex(0);\r\n      history.push(\"/course\");\r\n    }\r\n  };\r\n  const onDismiss = () => {\r\n    setSearchResult({ documents: [posInit], meta: { is_end: true, pageable_count: -1, total_count: -1 } });\r\n    setVisibleSearch({ visible: false, position: \"\" });\r\n    setVisibleCreate(true);\r\n    goBackPlace();\r\n  };\r\n\r\n  const onClick = (pos) => {\r\n    if (visibleSearch.position === \"start\") setStartPos(pos);\r\n    else if (visibleSearch.position === \"end\") setEndPos(pos);\r\n    setSearchResult({ documents: [posInit], meta: { is_end: true, pageable_count: -1, total_count: -1 } });\r\n    setVisibleSearch({ visible: false, position: \"\" });\r\n    setVisibleCreate(true);\r\n    goBackPlace(pos);\r\n  };\r\n  return (\r\n    <>\r\n      <BottomSheet\r\n        blocking={false}\r\n        open={visibleSearch.visible}\r\n        onDismiss={onDismiss}\r\n        snapPoints={({ minHeight, maxHeight }) => [maxHeight * 0.3, maxHeight * 0.4, maxHeight * 0.5, maxHeight * 0.7]}\r\n        defaultSnap={({ lastSnap, snapPoints }) => [SCREEN_HEIGHT * 0.3]}\r\n        header={\r\n          <div>\r\n            <div style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 17, color: GRAY8, float: \"left\" }}>\r\n              검색 결과\r\n            </div>\r\n            <div\r\n              style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY6, float: \"right\" }}\r\n              onClick={onDismiss}\r\n            >\r\n              닫기\r\n            </div>\r\n          </div>\r\n        }\r\n        expandOnContentDrag={true}\r\n      >\r\n        <div style={{ padding: \"12px 20px\" }}>\r\n          <div>\r\n            {searchResult.documents[0] !== posInit &&\r\n              searchResult.documents.map((pos, i) => (\r\n                <PositionCard\r\n                  key={i.toString()}\r\n                  address={pos.address_name}\r\n                  title={pos.place_name}\r\n                  desc={pos.category_name}\r\n                  url={pos.place_url}\r\n                  img={\"https://picsum.photos/200\"}\r\n                  onClick={() => onClick(pos)}\r\n                />\r\n              ))}\r\n          </div>\r\n        </div>\r\n      </BottomSheet>\r\n    </>\r\n  );\r\n};\r\n","import \"../../style/switch.css\";\r\nimport { useState } from 'react';\r\nimport { GRAY6, GRAY9 } from \"../../style\";\r\n\r\nexport const Switch = ({ defaultValue = false, title = \"\", onChange }) => {\r\n  const [clicked, setClicked] = useState(defaultValue);\r\n  const onChangeInput = (b) => {\r\n    if (onChange) onChange(b);\r\n    setClicked(b);\r\n  };\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <div>\r\n        <label className=\"switch\">\r\n          <input type=\"checkbox\" checked={clicked || false} readOnly onClick={() => onChangeInput(!clicked)} />\r\n          <span className=\"slider round\"></span>\r\n        </label>\r\n      </div>\r\n      <div style={{ color: clicked ? GRAY9 : GRAY6, marginLeft: 8 }}>{title}</div>\r\n    </div>\r\n  );\r\n};\r\n","import { useState } from \"react\";\r\nimport { GRAY2 } from \"../../style\";\r\n\r\nexport const Radio = ({ data,  defaultIndex, onClick }) => {\r\n  const [clicked, setClicked] = useState(defaultIndex);\r\n  const onChangeInput = (i) => {\r\n    setClicked(i);\r\n    if (onClick) onClick(i);\r\n  };\r\n  return (\r\n    <div style={{ flex: 1, display: \"flex\", justifyContent: \"space-evenly\" }}>\r\n      {data.map((item, i) => (\r\n        <div key={i.toString()}>\r\n          <div\r\n            onClick={() => onChangeInput(i)}\r\n            style={{\r\n              backgroundColor: clicked === i ? \"white\" : GRAY2,\r\n              borderStyle: \"solid\",\r\n              borderColor: clicked === i ? GRAY2 : \"white\",\r\n              padding: \"12px 16px\",\r\n              borderRadius: 10,\r\n              textAlign: \"center\",\r\n            }}\r\n          >\r\n            {item}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","import { GRAY2, GRAY3, GRAY7, textOverflowHidden } from \"../../style\";\r\nimport \"../../index.css\";\r\nexport const Tag = ({ text, index }) => {\r\n  const marginLeft = index === 0 ? 0 : 4;\r\n  return (\r\n    <div\r\n      style={{\r\n        ...textOverflowHidden,\r\n        fontSize: 12,\r\n        color: GRAY7,\r\n        borderStyle: \"solid\",\r\n        borderColor: GRAY2,\r\n        borderWidth: 1,\r\n        borderRadius: 10,\r\n        lineHeight: 2,\r\n        height: 20,\r\n        padding: \"0px 6px 4px\",\r\n        backgroundColor: GRAY3,\r\n        marginLeft: marginLeft,\r\n      }}\r\n    >\r\n      {text}\r\n    </div>\r\n  );\r\n};\r\n","// 로컬 시간을 감안하여 toJSON으로 변환.\r\n// eslint-disable-next-line\r\nDate.prototype.toJSON = function () {\r\n  var timezoneOffsetInHours = -(this.getTimezoneOffset() / 60); //UTC minus local time\r\n  var sign = timezoneOffsetInHours >= 0 ? \"+\" : \"-\";\r\n  var leadingZero = Math.abs(timezoneOffsetInHours) < 10 ? \"0\" : \"\";\r\n  var correctedDate = new Date(\r\n    this.getFullYear(),\r\n    this.getMonth(),\r\n    this.getDate(),\r\n    this.getHours(),\r\n    this.getMinutes(),\r\n    this.getSeconds(),\r\n    this.getMilliseconds()\r\n  );\r\n  correctedDate.setHours(this.getHours() + timezoneOffsetInHours);\r\n  var iso = correctedDate.toISOString().replace(\"Z\", \"\");\r\n  return iso + sign + leadingZero + Math.abs(timezoneOffsetInHours).toString() + \":00\";\r\n};\r\n\r\nexport const prettyDate = (dateString) => {\r\n  const str = dateString;\r\n  const list = str.split(\".\")[0].split(\"T\");\r\n  const YMD = list[0].split(\"-\"); //[0]년[1]월[2]일\r\n  const HMS = list[1].split(\":\"); //[0]시[1]분[2]초\r\n  const day = [\"일\", \"월\", \"화\", \"수\", \"목\", \"금\", \"토\"][new Date(str).getDay()];\r\n\r\n  const today = new Date().toJSON();\r\n  const list_today = today.split(\".\")[0].split(\"T\");\r\n  const YMD_today = list_today[0].split(\"-\"); //[0]년[1]월[2]일\r\n  // const HMS_today = list_today[1].split(\":\"); //[0]시[1]분[2]초\r\n\r\n  if (YMD[0] !== YMD_today[0] || YMD[1] !== YMD_today[1] || Number(YMD[2]) < Number(YMD_today[2]))\r\n    return `${Number(YMD[0])}년${Number(YMD[1])}월${Number(YMD[2])}일`;\r\n  else if (YMD[2] === YMD_today[2]) return `오늘 ${Number(HMS[0])}시${Number(HMS[1])}분`;\r\n  else if (Number(YMD[2]) === Number(YMD_today[2]) + 1) return `내일 ${Number(HMS[0])}시${Number(HMS[1])}분`;\r\n  else if (Number(YMD[2]) === Number(YMD_today[2]) + 2)\r\n    return `모레 ${Number(YMD[2])}일 ${Number(HMS[0])}시${Number(HMS[1])}분`;\r\n  else return `이번주 ${day}요일 ${Number(HMS[0])}시${Number(HMS[1])}분`;\r\n};\r\n","import { GRAY1, GRAY3, GRAY5, GRAY8 } from \"../../style\";\r\nimport { Tag } from \"../common/Tag\";\r\nimport { PositionCard, PositionCardReverse } from \"./PositionCard\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { ChatRoomSeletedState, userDataState } from \"../recoil\";\r\nimport { prettyDate } from \"../common/prettyDate\";\r\nimport { ChatRoomInit } from \"../common\";\r\nimport { useHistory } from \"react-router\";\r\nimport useWindowDimensions from \"../../hook/useWindowDimensions\";\r\n\r\nexport const RoomCard = ({ room, onClick = () => {}, noClick = false }) => {\r\n  const [chatRoomSeleted, setChatRoomSeleted] = useRecoilState(ChatRoomSeletedState);\r\n  const [userData] = useRecoilState(userDataState);\r\n\r\n  const enterTag = room ? (room.chat_user ? room.chat_user.length : 0) + \"/\" + (room.person_limit + 2) : \"\";\r\n  const genderTag = room ? (room.gender !== \"None\" ? (room.gender === \"M\" ? \"남자만\" : \"여자만\") : \"무관\") : \"\";\r\n  // const dtmTag = new Date(room.start_at).toLocaleString() + \"에 출발\";\r\n  const dtmTag = room ? prettyDate(room.start_at) + \"에 출발\" : \"\";\r\n\r\n  const tags = [genderTag, enterTag, dtmTag];\r\n  const history = useHistory();\r\n\r\n  let count = 0;\r\n  const isSeleted = room ? chatRoomSeleted.id === room.id : 0;\r\n  const onClickRoom = (isParentBtn) => {\r\n    if (isParentBtn) {\r\n      if (!noClick) {\r\n        onClick();\r\n        if (isSeleted) setChatRoomSeleted(ChatRoomInit);\r\n        else setChatRoomSeleted(room);\r\n      } else {\r\n              if (!userData) {\r\n                alert(\"로그인 후 입장할 수 있습니다!\");\r\n              } else {\r\n                history.push(`chat/${room.id}`);\r\n              }\r\n      }\r\n    } else {\r\n      if (!userData) {\r\n        alert(\"로그인 후 입장할 수 있습니다!\");\r\n      } else {\r\n        history.push(`chat/${room.id}`);\r\n      }\r\n    }\r\n    // if ((noClick && userData) || (userData && !isParentBtn)) {\r\n    //   history.push(`chat/${room.id}`);\r\n    // } else if (!noClick) {\r\n    //   onClick();\r\n    //   if (isSeleted) setChatRoomSeleted(ChatRoomInit);\r\n    //   else setChatRoomSeleted(room);\r\n    // } else {\r\n    //   alert(\"로그인 후 입장할 수 있습니다!\");\r\n    // }\r\n  };\r\n  return (\r\n    <div\r\n      style={{\r\n        borderWidth: 1,\r\n        borderColor: isSeleted && !noClick ? GRAY5 : \"#E1E3E5\",\r\n        borderStyle: \"solid\",\r\n        paddingBottom: 16,\r\n        borderRadius: 20,\r\n        marginTop: 16,\r\n        backgroundColor: isSeleted && !noClick ? \"white\" : GRAY1,\r\n      }}\r\n      onClick={() => onClickRoom(true)}\r\n    >\r\n      <PositionCard\r\n        address={room ? room.end_route.address_name : \"\"}\r\n        title={room ? room.end_route.place_name : \"\"}\r\n        desc={room ? room.end_route.category_name : \"\"}\r\n        url={room ? room.end_route.place_url : \"\"}\r\n        img={\"https://picsum.photos/200\"}\r\n      />\r\n      <PositionCardReverse\r\n        address={room ? room.start_route.address_name : \"\"}\r\n        title={room ? room.start_route.place_name : \"\"}\r\n        desc={room ? room.start_route.category_name : \"\"}\r\n        url={room ? room.start_route.place_url : \"\"}\r\n        img={\"https://picsum.photos/200\"}\r\n      />\r\n      <div style={{ display: \"flex\", paddingTop: 6, paddingBottom: 6, marginBottom: -17, marginLeft: 16 }}>\r\n        <div style={{ display: \"flex\", flex: 7 }}>\r\n          {tags.map((tag, i) => (\r\n            <Tag key={i.toString()} text={tag} index={i} />\r\n          ))}\r\n        </div>\r\n        <div\r\n          style={{\r\n            flex: 1,\r\n            display: \"flex\",\r\n            justifyContent: \"flex-end\",\r\n            position: \"relative\",\r\n            bottom: -6.5,\r\n            right: -0.5,\r\n          }}\r\n          onClick={\r\n            !noClick ? (!userData ? () => alert(\"로그인 후 입장이 가능합니다!\") : () => onClickRoom(false)) : () => {}\r\n          }\r\n        >\r\n          <div\r\n            style={{\r\n              borderRadius: \"20px 0px 20px 0px\",\r\n              backgroundColor: GRAY3,\r\n              color: GRAY8,\r\n              fontSize: 15,\r\n              fontWeight: \"bold\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              minWidth: 90,\r\n            }}\r\n          >\r\n            바로 입장\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { BottomSheet } from \"react-spring-bottom-sheet\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport {\r\n  BottomModalState,\r\n  ChatRoomListState,\r\n  CreateBottomModalState,\r\n  endPosState,\r\n  loadingState,\r\n  pathState,\r\n  posInitType,\r\n  startPosState,\r\n  userDataState,\r\n} from \"./recoil\";\r\nimport \"react-spring-bottom-sheet/dist/style.css\";\r\nimport \"../style/switch.css\";\r\nimport { AbsoluteCenter, GRAY7, ORANGE, SCREEN_HEIGHT, styleCenter } from \"../style\";\r\nimport { GRAY8, GRAY6 } from \"../style/index\";\r\nimport { createRef, useMemo, useRef, useState } from \"react\";\r\nimport { getfetch, posInit, postfetch } from \"./common\";\r\nimport { Input, InputMap, InputSearch } from \"./Input/index\";\r\nimport { Switch } from \"./Input/switch\";\r\nimport { Radio } from \"./Input/radio\";\r\nimport { PositionCard } from \"./card/PositionCard\";\r\nimport { RoomCard } from \"./card/RoomCard\";\r\nimport _ from \"lodash\";\r\nimport { RouteType } from \"../types/Route\";\r\nimport { ChatRoomType } from \"../types/ChatRoom\";\r\nimport KakaoLogin from \"react-kakao-login\";\r\nimport { KaKaoLoginBtn } from \"./Btn/LoginBtn\";\r\nimport useWindowDimensions from \"../hook/useWindowDimensions\";\r\n\r\nexport const BottomModal = () => {\r\n  const [visible, setVisible] = useRecoilState(BottomModalState);\r\n\r\n  const [chatRoomList] = useRecoilState(ChatRoomListState); //setChatRoomList\r\n  const [chatRoomListFilterd, setChatRoomListFilterd] = useState([]);\r\n  const filterSearchTxt = useRef(\"\");\r\n  const bottomRef = useRef<any>();\r\n  const { height, width } = useWindowDimensions();\r\n\r\n  const onClickRoom = () => {\r\n    if (bottomRef && bottomRef.current && bottomRef.current.snapTo)\r\n      bottomRef.current.snapTo(() => SCREEN_HEIGHT * 0.4 + 30, {\r\n        source: \"custom\",\r\n        velocity: 0,\r\n      });\r\n  };\r\n\r\n  const onChangeFilterSearchTxt = async (t: string) => {\r\n\r\n    if (t.length === 0) {\r\n      setChatRoomListFilterd([]);\r\n    } else {\r\n      const list = await chatRoomList.filter(\r\n        (room: ChatRoomType) =>\r\n          // 추후 방장이름도 추가\r\n          room.title.includes(t) ||\r\n          room.start_route.road_address_name.includes(t) ||\r\n          room.start_route.place_name.includes(t) ||\r\n          room.start_route.phone.includes(t) ||\r\n          room.start_route.address_name.includes(t) ||\r\n          room.start_route.category_name.includes(t) ||\r\n          room.end_route.road_address_name.includes(t) ||\r\n          room.end_route.place_name.includes(t) ||\r\n          room.end_route.phone.includes(t) ||\r\n          room.end_route.address_name.includes(t) ||\r\n          room.end_route.category_name.includes(t)\r\n      );\r\n      setChatRoomListFilterd(list);\r\n    }\r\n  };\r\n\r\n  const LIST = filterSearchTxt.current.length > 0 ? chatRoomListFilterd : chatRoomList;\r\n  return (\r\n    <>\r\n      <BottomSheet\r\n        ref={bottomRef}\r\n        blocking={false}\r\n        open={visible}\r\n        onDismiss={() => setVisible(false)}\r\n        snapPoints={({ minHeight, maxHeight }) => [\r\n          maxHeight * 0.4 + 30,\r\n          maxHeight * 0.5,\r\n          maxHeight * 0.7,\r\n          maxHeight * 0.9,\r\n        ]}\r\n        style={{ zIndex: 9999999999999 }}\r\n        defaultSnap={({ lastSnap, snapPoints }) => SCREEN_HEIGHT * 0.4}\r\n        header={\r\n          <div>\r\n            <div style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY7, float: \"left\" }}>\r\n              더 많은 채팅방을 검색해보세요!\r\n            </div>\r\n            <div\r\n              style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY6, float: \"right\" }}\r\n              onClick={() => setVisible(false)}\r\n            >\r\n              닫기\r\n            </div>\r\n          </div>\r\n        }\r\n        expandOnContentDrag={false}\r\n      >\r\n        <div style={{ padding: \"0 10px 80px 10px\" }}>\r\n          <div style={{ display: \"flex\", justifyContent: \"center\", marginTop: 16 }}>\r\n            <InputSearch\r\n              value={filterSearchTxt}\r\n              placeholder={\"검색 장소를 입력해주세요.\"}\r\n              onChange={onChangeFilterSearchTxt}\r\n            />\r\n          </div>\r\n\r\n          {chatRoomList.length > 0 ? (\r\n            LIST.map((room, i) => {\r\n              const ref = createRef<any>();\r\n              const handleClick = () => {\r\n                ref.current.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n              };\r\n              return (\r\n                <div key={i.toString()} ref={ref}>\r\n                  {/* DB 모든 채팅방 */}\r\n                  <RoomCard\r\n                    room={room}\r\n                    onClick={() => {\r\n                      onClickRoom();\r\n                      handleClick();\r\n                      // let timerId = setInterval(handleClick, 100);\r\n                      // setTimeout(() => clearInterval(timerId), 1000);\r\n                    }}\r\n                  />\r\n                </div>\r\n              );\r\n            })\r\n          ) : (\r\n            <div style={{ padding: \"8px 32px 0\" }}>\r\n                <div style={{ ...AbsoluteCenter, fontSize: 15, textAlign: 'center', backgroundColor: 'white', fontWeight: 'bold', padding:16, marginTop:24, borderRadius:12, borderWidth:1, borderStyle:'dashed' }}>\r\n                <div>현재 들어갈 수 있는</div>\r\n                  <div>택시 채팅방이 없습니다.</div>\r\n                  <div style={{ fontSize: 13, fontWeight:'normal', marginTop:8}}>\r\n                <div>지도 오른쪽 하단의 버튼을 눌러</div>\r\n                <div>새 택시채팅방을 만들어보세요!</div>\r\n                  </div>\r\n              </div>\r\n              <img src={'http://218.153.157.69/ftp/2021_11_27_1_03_40_b85518ade0.png'} width={\"100%\"} />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </BottomSheet>\r\n    </>\r\n  );\r\n};\r\n\r\n//2021-10-05T21:50\r\nconst defaultValueDate = new Date().toJSON().split(\".\")[0];\r\nexport const CreateBottomModal = () => {\r\n  const [, setLoading] = useRecoilState(loadingState); //loading\r\n\r\n  const [visible, setVisible] = useRecoilState(CreateBottomModalState);\r\n\r\n  const [title, setTitle] = useState(\"\");\r\n  const [date, setDate] = useState(defaultValueDate);\r\n  const [personLimit, setPersonLimit] = useState(2); //보낼때 +2\r\n  const [genderLimit, setGenderLimit] = useState(false);\r\n\r\n  const [startPos, setStartPos] = useRecoilState(startPosState);\r\n  const [endPos, setEndPos] = useRecoilState(endPosState);\r\n  const [path] = useRecoilState(pathState); //setPath\r\n  const [, setChatRoomList] = useRecoilState(ChatRoomListState); //chatRoomList\r\n\r\n  const closeCondition = useMemo(\r\n    () => title !== \"\" || startPos.place_name !== \"\" || endPos.place_name !== \"\",\r\n    [title, startPos.place_name, endPos.place_name]\r\n  );\r\n  const postCondition = useMemo(\r\n    () => startPos.place_name !== \"\" && endPos.place_name !== \"\" && path.distance > 0,\r\n    [startPos.place_name, endPos.place_name, path.distance]\r\n  );\r\n\r\n  const getPostRoute = async (startPos: posInitType, endPos: posInitType) => {\r\n    return new Promise((resolve: (p: { responseStartRoute: RouteType; responseEndRoute: RouteType }) => void) => {\r\n      let responseStartRoute: RouteType | null = null;\r\n      let responseEndRoute: RouteType | null = null;\r\n      postfetch(\"/routes\", {\r\n        ...startPos,\r\n        naver_id: startPos.id,\r\n        x: Number(startPos.x),\r\n        y: Number(startPos.y),\r\n      }).then((d) => {\r\n        responseStartRoute = d;\r\n        if (responseStartRoute !== null && responseEndRoute !== null)\r\n          resolve({ responseStartRoute: responseStartRoute, responseEndRoute: responseEndRoute });\r\n      });\r\n      postfetch(\"/routes\", {\r\n        ...endPos,\r\n        naver_id: endPos.id,\r\n        x: Number(endPos.x),\r\n        y: Number(endPos.y),\r\n      }).then((d) => {\r\n        responseEndRoute = d;\r\n        if (responseStartRoute !== null && responseEndRoute !== null)\r\n          resolve({ responseStartRoute: responseStartRoute, responseEndRoute: responseEndRoute });\r\n      });\r\n    });\r\n    // { responseStartRoute: responseStartRoute, responseEndRoute: responseEndRoute }\r\n  };\r\n  const postCreateChatRoom = async () => {\r\n    const [userData] = useRecoilState(userDataState);\r\n\r\n    if (!postCondition) {\r\n      alert(\"출발지/도착지/출발시간을 확인해주세요.\");\r\n    } else {\r\n      setLoading(true);\r\n      const responseRoute = await getPostRoute(startPos, endPos);\r\n      console.log(title);\r\n      const response = await postfetch(\"/chat-rooms\", {\r\n        title: title,\r\n        gender: genderLimit ? \"M\" : \"None\",\r\n        creator_id: String(userData ? userData.id : 0),\r\n        chat_user: String(userData ? userData.id : 0),\r\n        start_route: responseRoute.responseStartRoute.id,\r\n        end_route: responseRoute.responseEndRoute.id,\r\n        person_limit: personLimit,\r\n        start_at: date,\r\n        path: path.path,\r\n        taxiFare: path.taxiFare,\r\n        distance: path.distance,\r\n        duration: path.duration,\r\n        departureTime: path.departureTime,\r\n        // course_id: 0,\r\n      });\r\n      if (typeof response.id === \"number\") {\r\n        setTitle(\"\");\r\n        setDate(defaultValueDate);\r\n        setStartPos(posInit);\r\n        setEndPos(posInit);\r\n        setPersonLimit(2);\r\n        setGenderLimit(false);\r\n        setVisible(false);\r\n        // # 새로 방 업데이트\r\n        getfetch(\"/chat-rooms\").then((d) =>\r\n          setChatRoomList(\r\n            d.map((room: any) => {\r\n              return { ...room, path: _.chunk(_.split(room.path, \",\"), 2) };\r\n            })\r\n          )\r\n        );\r\n        setLoading(false);\r\n      } else if (response.statusCode === 200) {\r\n        try {\r\n          setLoading(false);\r\n          alert(JSON.stringify(response.data.errors));\r\n        } catch (e) {\r\n          setLoading(false);\r\n          console.debug(e);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <BottomSheet\r\n        blocking={false}\r\n        open={visible}\r\n        onDismiss={() => setVisible(false)}\r\n        snapPoints={({ minHeight, maxHeight }) => [maxHeight * 0.3, maxHeight * 0.4, maxHeight * 0.5, maxHeight * 0.7]}\r\n        defaultSnap={({ lastSnap, snapPoints }) => SCREEN_HEIGHT * 0.4}\r\n        expandOnContentDrag={true}\r\n      >\r\n        <div style={{ padding: \"12px 20px\" }}>\r\n          <div>\r\n            <div style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 17, color: GRAY8, float: \"left\" }}>\r\n              채팅방을 만들어보세요!\r\n            </div>\r\n            <BlockLogin />\r\n            {closeCondition ? (\r\n              <div\r\n                style={{\r\n                  fontFamily: \"roboto\",\r\n                  fontWeight: \"bold\",\r\n                  fontSize: 15,\r\n                  color: postCondition ? ORANGE : GRAY6,\r\n                  float: \"right\",\r\n                }}\r\n                onClick={postCreateChatRoom}\r\n              >\r\n                생성\r\n              </div>\r\n            ) : (\r\n              <div\r\n                style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY6, float: \"right\" }}\r\n                onClick={() => setVisible(false)}\r\n              >\r\n                닫기\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div style={{ marginTop: 40 }}>\r\n            <div style={{ marginTop: 12 }}>\r\n              <Input\r\n                defaultValue={title}\r\n                onChange={(e) => setTitle(e)}\r\n                placeholder=\"채팅방 이름을 입력해주세요. (선택)\"\r\n              />\r\n            </div>\r\n            <div style={{ marginTop: 12 }}>\r\n              <InputMap placeholder=\"출발지를 선택해주세요.\" position={\"start\"} />\r\n              {startPos.place_name ? (\r\n                <PositionCard\r\n                  address={startPos.address_name}\r\n                  title={startPos.place_name}\r\n                  desc={startPos.category_name}\r\n                  url={startPos.place_url}\r\n                  img={\"https://picsum.photos/200\"}\r\n                  onClickDelete={() => setStartPos(posInit)}\r\n                />\r\n              ) : (\r\n                false\r\n              )}\r\n            </div>\r\n            <div style={{ marginTop: 12 }}>\r\n              <InputMap placeholder=\"도착지를 선택해주세요.\" position={\"end\"} />\r\n              {endPos.place_name ? (\r\n                <PositionCard\r\n                  address={endPos.address_name}\r\n                  title={endPos.place_name}\r\n                  desc={endPos.category_name}\r\n                  url={endPos.place_url}\r\n                  img={\"https://picsum.photos/200\"}\r\n                  onClickDelete={() => setEndPos(posInit)}\r\n                />\r\n              ) : (\r\n                false\r\n              )}\r\n            </div>\r\n            <div style={{ marginTop: 12 }}>\r\n              <div style={{ fontWeight: \"bold\", margin: \"0 12px 12px\", color: GRAY7 }}>출발 시간을 선택해주세요.</div>\r\n              <Input defaultValue={date} onChange={setDate} type=\"datetime-local\" />\r\n              {/* id=\"appt\" name=\"appt\" */}\r\n            </div>\r\n            <div style={{ marginTop: 0, padding: 8 }}>\r\n              <Switch\r\n                defaultValue={genderLimit}\r\n                title={genderLimit ? \"성별제한\" : \"성별무관 탑승\"}\r\n                onChange={setGenderLimit}\r\n              />\r\n            </div>\r\n            <div style={{ marginTop: 12, color: GRAY7, padding: \"0 8px\", fontSize: 15 }}>\r\n              인원 제한을 선택해주세요.\r\n              <div style={{ marginTop: 8 }}>\r\n                <Radio data={[2, 3, 4, 5, 6, 7]} defaultIndex={personLimit} onClick={setPersonLimit} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </BottomSheet>\r\n    </>\r\n  );\r\n};\r\n\r\nconst BlockLogin = () => {\r\n  const [userData] = useRecoilState(userDataState);\r\n\r\n  return (\r\n    <>\r\n      {!userData ? (\r\n        <div\r\n          style={{\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            position: \"absolute\",\r\n            backgroundColor: \"rgba(255,255,255,0.6)\",\r\n            ...styleCenter,\r\n            zIndex: 3,\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          <KaKaoLoginBtn width={256} />\r\n          <div style={{ marginTop: 8, marginBottom: 60 }}>로그인이 필요한 기능입니다.</div>\r\n        </div>\r\n      ) : (\r\n        false\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport { BottomHeader } from \"../components/BottomHeader\";\r\nimport { BottomTabBar } from \"../components/BottomTabBar\";\r\nimport { CreateBtn } from \"../components/Btn/CreateBtn\";\r\nimport { PreRegistrationPopup } from \"../components/Dialog/PreRegistrationPopup\";\r\nimport { NMAP } from \"../components/NMap\";\r\nimport { SearchPosition } from \"../components/SearchPosition\";\r\nimport { SelectMapModal } from \"../components/SelectMapModal\";\r\nimport { BottomModal, CreateBottomModal } from \"./../components/BottomModal\";\r\n\r\nconst HomeScreen = () => {\r\n  useEffect(() => {\r\n    const body = document.getElementsByTagName(\"body\")[0];\r\n    body.setAttribute(\"style\", \"overflow: hidden;\");\r\n    return () => body.setAttribute(\"style\", \"overflow: scroll;\");\r\n  }, []);\r\n  return (\r\n    <>\r\n      {/* <PreRegistrationPopup/> */}\r\n      <BottomHeader />\r\n      <SearchPosition />\r\n      <NMAP />\r\n      <CreateBtn />\r\n      <BottomModal />\r\n      <CreateBottomModal />\r\n      <SelectMapModal />\r\n      <BottomTabBar />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomeScreen;\r\n","import { GRAY6, GRAY7, SUB_BLUE, textOverflowHidden } from \"../../style\";\r\nimport { Icon } from \"../common/Icon\";\r\nimport { GRAY4 } from \"../../style/index\";\r\nimport { ProfileIcon } from \"../Icon/ProfileIcon\";\r\nimport { userDataState } from \"../recoil\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { getfetch, postfetch } from \"../common\";\r\nimport { UserType } from \"../../types/User\";\r\nimport { useEffect } from \"react\";\r\nimport _ from \"lodash\";\r\n\r\nexport const togglerFollow = async (myUserData: UserType, other_user_id: number) => {\r\n  if (!myUserData.id) return;\r\n  console.log(myUserData)\r\n\r\n  // const list = myUserData.follower.map((user)=>user.id).\r\n\r\n\r\n  // if (true) {\r\n  //   // 좋아요 추가\r\n  //   const list = _.uniq(myUserData.like_courses.map((d) => d.id).concat(Number(other_user_id)))\r\n  //   await postfetch(`/users/${myUserData.id}`, JSON.stringify({ followers: list }), true, \"PUT\")\r\n  //   // 좋아요 게시글에 반영 && 내 팔로우 수 변경\r\n  //   mutate();\r\n  //   // \r\n  //   mutate();\r\n  // } else {\r\n  //   // 좋아요 삭제\r\n  //   const list = myUserData.like_courses.map((d) => d.id).filter((id) => id !== Number(id))\r\n  //   await postfetch(`/users/${myUserData.id}`, JSON.stringify({ like_courses: list }), true, \"PUT\").then((d) => d && d.id ? setUserData(d) : false);\r\n  //   // 좋아요 게시글에 반영\r\n  //   mutate();\r\n  // }\r\n\r\n  // postfetch(`/users/${myUserData.id}`, {})\r\n};\r\n\r\ntype Props = {\r\n  title?: string;\r\n  desc?: string;\r\n  address?: string;\r\n  url?: string;\r\n  img?: string;\r\n  userId?: number;\r\n  onClick?: () => void;\r\n  onClickDelete?: () => void;\r\n  disable?: boolean;\r\n  icon?: string;\r\n};\r\nexport const ProfileCard = ({\r\n  title,\r\n  desc,\r\n  address,\r\n  img,\r\n  userId,\r\n  onClick,\r\n  onClickDelete,\r\n  disable,\r\n  icon = \"faCrown\",\r\n}: Props) => {\r\n  const [userData, setUserData] = useRecoilState(userDataState);\r\n\r\n  useEffect(() => {\r\n    if (userData) {\r\n      getfetch(`/users/${userData.id}`).then((d) => {\r\n        setUserData(d)\r\n      });\r\n    }\r\n  }, [])\r\n  return (\r\n    <div style={{ height: 80 }}>\r\n      <div style={{ padding: \"16px 16px 0 16px\", display: \"flex\", alignItems: \"center\" }}>\r\n        {/* 유저아이콘 */}\r\n        <div\r\n          style={{ flex: 1, display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}\r\n          onClick={onClick ? onClick : () => { }}\r\n        >\r\n          <ProfileIcon icon={icon ? icon : \"\"} img={img ?? ''} />\r\n        </div>\r\n        {/* 상세내용 */}\r\n        <div style={{ flex: 4, marginLeft: 16, alignSelf: \"center\" }} onClick={onClick ? onClick : () => { }}>\r\n          <div style={{ ...textOverflowHidden, fontSize: 14, color: GRAY7, fontWeight: \"bold\" }}>{address}</div>\r\n          <div style={{ ...textOverflowHidden, fontSize: 12, marginTop: 3, color: GRAY6 }}>{title}</div>\r\n          <div style={{ ...textOverflowHidden, fontSize: 12, color: GRAY6 }}>{desc}</div>\r\n        </div>\r\n        {/* 삭제버튼 */}\r\n        {typeof onClickDelete === \"function\" ? (\r\n          <div style={{ position: \"relative\", width: 16, height: 28, top: -8 }} onClick={onClickDelete}>\r\n            <Icon type={\"regular\"} name={\"faTrashAlt\"} size={\"sm\"} color={GRAY4} />\r\n          </div>\r\n        ) : (\r\n          false\r\n        )}\r\n        {/* 팔로우버튼 */}\r\n        {!userId || userData?.id !== userId ? <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            fontSize: 12,\r\n            fontWeight: \"bold\",\r\n            justifyContent: \"center\",\r\n            backgroundColor: !userData ? \"gray\" : SUB_BLUE,\r\n            color: \"white\",\r\n            borderRadius: 20,\r\n            padding: \"3px 20px\",\r\n            height: 22,\r\n          }}\r\n          onClick={() => (!userData ? alert(\"로그인이 필요한 기능입니다!\") : togglerFollow(userData, 2))}\r\n        >\r\n          팔로우\r\n        </div> : false}\r\n      </div>\r\n      {/* 덮개 */}\r\n      {disable ? (\r\n        <div\r\n          style={{ position: \"relative\", width: \"100%\", height: 70, background: \"rgba(255,255,255,0.6\", top: -70 }}\r\n        />\r\n      ) : (\r\n        false\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { BottomTabBar } from \"../components/BottomTabBar\";\r\nimport { InputSearch } from \"../components/Input\";\r\n\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport useWindowDimensions from \"../hook/useWindowDimensions\";\r\nimport { API_URL, getfetch } from \"../components/common\";\r\nimport axios from \"axios\";\r\nimport { UserType } from \"../types/User\";\r\nimport { ChatRoomType } from \"../types/ChatRoom\";\r\nimport { List, listClasses } from \"@mui/material\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { loadingState, searchState } from \"../components/recoil\";\r\nimport { ProfileCard } from \"../components/card/ProfileCard\";\r\nimport { RoomCard } from \"../components/card/RoomCard\";\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\nimport { CourseCard } from \"../components/card/CourseCard\";\r\nimport { CourseType, CourseTypeInit } from \"../types/Course\";\r\nimport { Router, useHistory } from \"react-router\";\r\nimport { BottomHeader } from \"../components/BottomHeader\";\r\n\r\nconst styles = {\r\n  tabs: {\r\n    background: \"#fff\",\r\n    width: \"100%\",\r\n  },\r\n  slide: {\r\n    padding: 15,\r\n    minHeight: 700,\r\n    color: \"black\",\r\n  },\r\n};\r\n\r\nconst SearchScreen = () => {\r\n  return (\r\n    <>\r\n      <BottomHeader title=\"탐색\" />\r\n      <SearchBar />\r\n      <ResultTabs />\r\n      <BottomTabBar />\r\n    </>\r\n  );\r\n};\r\n\r\nconst SearchBar = () => {\r\n  const { height, width } = useWindowDimensions();\r\n  const filterSearchTxt = useRef();\r\n\r\n  const [list, setList] = useRecoilState(searchState);\r\n  const [loading, setLoading] = useRecoilState(loadingState); //loading\r\n\r\n  // #region 스크롤 닫기\r\n  const body = document.getElementsByTagName(\"body\")[0];\r\n  body.setAttribute('style', \"overflow: hidden;\");\r\n  useEffect(() => {\r\n    body.removeAttribute(\"style\");\r\n    return () => setLoading(false);\r\n  }, [body]);\r\n  // #endregion\r\n\r\n  //#region 유저 / 채팅방 / 코스 검색\r\n  let cancelToken = axios.CancelToken.source(); //<- 1: 선언\r\n  const onChangeFilterSearchTxt = async (t: string) => {\r\n    if (t.length === 0) {\r\n      // 검색시 이전꺼 멈춤\r\n      if (loading) setLoading(false);\r\n      cancelToken.cancel(); //<- 2: 이미 있으면 axios 중지\r\n      cancelToken = axios.CancelToken.source(); //<- 3: 새로 토큰 생성\r\n      setList({ users: [], rooms: [], courses: [] });\r\n    } else {\r\n      cancelToken.cancel(); //<- 2: 이미 있으면 axios 중지\r\n      cancelToken = axios.CancelToken.source(); //<- 3: 새로 토큰 생성\r\n      //#region 검색 API\r\n      setLoading(true);\r\n      let list: { users: UserType[]; rooms: ChatRoomType[]; courses: CourseType[] } = {\r\n        users: [],\r\n        rooms: [],\r\n        courses: [],\r\n      };\r\n      let checkCount = 0;\r\n      const checkList = () => {\r\n        if (checkCount === 2) {\r\n          setList(list);\r\n          setLoading(false);\r\n        } else checkCount++;\r\n      };\r\n      // 유저 닉네임 검색\r\n      axios.get(`${API_URL}/users?_q=${t}`, { cancelToken: cancelToken.token }).then((d) => {\r\n        list.users = d.data;\r\n        checkList();\r\n      });\r\n      // 챗방 출/도 검색 => TEST 현재 타이틀만 검색 가능함! 출/도 검색 추가필요함!\r\n      // route검색해서 해당 채팅방 따로 띄워주기!\r\n      axios.get(`${API_URL}/chat-rooms?_q=${t}`, { cancelToken: cancelToken.token }).then((d) => {\r\n        list.rooms = d.data;\r\n        checkList();\r\n      });\r\n      // 코스 title 검색 => content 내용 검색\r\n      axios.get(`${API_URL}/courses?_q=${t}`, { cancelToken: cancelToken.token }).then((d) => {\r\n        list.courses = d.data;\r\n        checkList();\r\n      });\r\n      //#endregion\r\n    }\r\n  };\r\n  //#endregion\r\n\r\n  return (\r\n    <div style={{ width: width, display: \"flex\", justifyContent: \"center\",marginTop:8 }}>\r\n      <InputSearch\r\n        value={filterSearchTxt}\r\n        placeholder={\"닉네임/출발지,도착지/코스를 검색해보세요.\"}\r\n        onChange={onChangeFilterSearchTxt}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ResultTabs = () => {\r\n  const [index, setIndex] = useState(0);\r\n  const [list,] = useRecoilState(searchState);//setList\r\n  const history = useHistory();\r\n  const { height, width } = useWindowDimensions();\r\n\r\n  const handleChange = (e: any, i: number) => setIndex(i);\r\n  const handleChangeIndex = (i: number) => setIndex(i);\r\n  \r\n  const onClick = (id: number) => { history.push(`user/${id}`) }\r\n  return (\r\n    <>\r\n      <Tabs value={index} onChange={handleChange} style={styles.tabs}>\r\n        <Tab label=\"사람\" style={{ width: width*0.33, fontSize: 15 }} />\r\n        <Tab label=\"채팅방\" style={{ width: width * 0.34, fontSize: 15 }} />\r\n        <Tab label=\"코스\" style={{ width: width * 0.33, fontSize: 15 }} />\r\n      </Tabs>\r\n      <SwipeableViews index={index} onChangeIndex={handleChangeIndex}>\r\n        <div>\r\n          {list.users.length > 0 ? (\r\n            <Swiper slidesPerView={1} direction={\"vertical\"} speed={500} height={80}>\r\n              {list.users.map((user, i: number) => (\r\n                <SwiperSlide key={i.toString()}>\r\n                  <ProfileCard\r\n                    address={user.nickname}\r\n                    title={user.greeting}\r\n                    desc={(user.device ?? \"\") + (user.gender ?? \"\") + user.username}\r\n                    url={user.profile_image ?? \"\"}\r\n                    img={\"img\"}\r\n                    icon={\"\"}\r\n                    onClick={() => onClick(user.id)}\r\n                    disable={false}\r\n                  />\r\n                </SwiperSlide>\r\n              ))}\r\n            </Swiper>\r\n          ) : (\r\n            false\r\n          )}\r\n        </div>\r\n        <div>\r\n          {list.rooms.length > 0 ? (\r\n            <Swiper slidesPerView={1} direction={\"vertical\"} speed={500} height={253} style={{padding:\"0px 16px\"}} >\r\n              {list.rooms.map((room, i: number) => (\r\n                <SwiperSlide key={i.toString()}>\r\n                  <RoomCard room={room} noClick />\r\n                </SwiperSlide>\r\n              ))}\r\n            </Swiper>\r\n          ) : (\r\n            false\r\n          )}\r\n        </div>\r\n        <div>\r\n          {list.courses.length > 0 ? (\r\n            <Swiper slidesPerView={1} direction={\"vertical\"} speed={500} height={256}>\r\n              {list.courses.map((course, i: number) => (\r\n                <SwiperSlide key={i.toString()}>\r\n                  <CourseCard course={course} width={300} />\r\n                </SwiperSlide>\r\n              ))}\r\n            </Swiper>\r\n          ) : (\r\n            false\r\n          )}\r\n        </div>\r\n      </SwipeableViews>\r\n    </>\r\n  );\r\n};\r\nexport default SearchScreen;\r\n","import React, { useEffect, useRef } from \"react\";\r\n\r\nimport Rating from \"@mui/material/Rating\";\r\nimport { styled } from \"@mui/material/styles\";\r\n\r\nimport { Icon } from \"../common/Icon\";\r\nimport useWindowDimensions from \"../../hook/useWindowDimensions\";\r\nimport { Checkbox, SwitchUnstyled } from \"@mui/material\";\r\nimport { GRAY7, GRAY8, styleCenter } from \"../../style\";\r\n\r\nimport { useRecoilState } from \"recoil\";\r\nimport {  loadingState, shareModalState, userDataState } from \"../recoil\";\r\n\r\nimport { FcExpand, FcExport, FcIdea, FcLike, FcReading, FcReadingEbook, FcSettings, FcShare, FcShop } from \"react-icons/fc\";\r\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\r\nimport { CItem } from \"../Input/CommandInput/CItem\";\r\nimport { GoLinkExternal } from \"react-icons/go\";\r\nimport {  useHistory, useParams } from \"react-router\";\r\nimport { CourseType } from \"../../types/Course\";\r\nimport { getfetch, postfetch } from \"../common\";\r\nimport _ from \"lodash\";\r\nimport { Switch } from \"@material-ui/core\";\r\n\r\nconst fontStyle = {\r\n  fontSize: 15,\r\n  fontWeight: 900,\r\n};\r\ntype Props = {\r\n  disable?: boolean;\r\n  course?: CourseType;\r\n  mutate?: any;\r\n}\r\nexport const CourseActionField = ({ mutate, disable = false, course }: Props) => {\r\n  const [modalInfo, setModalInfo] = useRecoilState(shareModalState);\r\n  const [loading, setLoading] = useRecoilState(loadingState);\r\n  const [userData, setUserData] = useRecoilState(userDataState);\r\n  const { id: courseId }: { id: string | undefined } = useParams();\r\n  const isLikeRef = useRef<boolean>(userData ? userData.like_courses.map((d) => d.id).includes(Number(courseId)) : false)\r\n  const onCopy = () => alert(\"URL로 복사되었습니다.\")\r\n\r\n  //#region Like\r\n  const onClickLike = async (courseId: string | undefined) => {\r\n    isLikeRef.current = !isLikeRef.current\r\n\r\n    if (userData?.id && courseId) {\r\n      if (isLikeRef.current) {\r\n        // 좋아요 추가\r\n        const list = _.uniq(userData.like_courses.map((d) => d.id).concat(Number(courseId)))\r\n        await postfetch(`/users/${userData.id}`, JSON.stringify({ like_courses: list }), true, \"PUT\").then((d) => d && d.id ? setUserData(d) : false);\r\n        // 좋아요 게시글에 반영\r\n        mutate();\r\n      } else {\r\n        // 좋아요 삭제\r\n        const list = userData.like_courses.map((d) => d.id).filter((id) => id !== Number(id))\r\n        await postfetch(`/users/${userData.id}`, JSON.stringify({ like_courses: list }), true, \"PUT\").then((d) => d && d.id ? setUserData(d) : false);\r\n        // 좋아요 게시글에 반영\r\n        mutate();\r\n      }\r\n    }\r\n  }\r\n  //#endregion\r\n  return (\r\n    <>\r\n      <div\r\n        style={{\r\n          ...styleCenter,\r\n          ...fontStyle,\r\n          marginBottom: 0,\r\n          borderWidth: 0,\r\n          borderStyle: \"solid\",\r\n          padding: 16,\r\n          borderRadius: 16,\r\n          marginTop: 8,\r\n          filter: disable ? 'grayscale(100%)' : \"\",\r\n          boxShadow: \"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px\",\r\n        }}\r\n      >\r\n        <div style={{ flex: 1, ...styleCenter }}>\r\n          {/* 좋아요버튼 */}\r\n          <Checkbox\r\n            onClick={() => onClickLike(courseId)}\r\n            defaultChecked={disable || isLikeRef.current}\r\n            disabled={!userData || disable}\r\n            icon={<Icon name={\"faHeart\"} size={36} type={\"light\"} color={\"gray\"} />}\r\n            checkedIcon={<Icon name={\"faHeart\"} size={36} color={\"#ff6d75\"} />}\r\n          />\r\n          <div style={{ marginLeft: 12 }}>\r\n            <div style={{ ...styleCenter, fontSize: 9, fontWeight: 'normal' }}>좋아요</div>\r\n            <div style={{ ...styleCenter, fontSize: 13, fontWeight: 'normal', marginTop: -1 }}>\r\n              {course ? course?.like_users.length : '1.1k'}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div style={{ flex: 1, ...styleCenter }} onClick={() => disable ? () => { } : !userData ? alert(\"로그인이 필요한 기능입니다!\") : setModalInfo({ visible: !modalInfo.visible })}>\r\n\r\n          {/* 공유버튼 */}\r\n          <Icon name={\"faShareAlt\"} size={32} type={\"solid\"} color={!userData ? 'gray' : \"#0066d3\"} />\r\n          <div style={{ marginLeft: 12 }}>\r\n            <div style={{ ...styleCenter, fontSize: 9, fontWeight: 'normal' }}>SNS</div>\r\n            <div style={{ ...styleCenter, fontSize: 13, fontWeight: 'normal', marginTop: -1 }}>공유</div>\r\n          </div>\r\n        </div>\r\n        <div style={{ flex: 1, ...styleCenter }}>\r\n\r\n          {/* 조회수 통계 버튼 */}\r\n          <div style={{ ...fontStyle, ...styleCenter, }}>\r\n            <FcReading size={32} />\r\n            <div style={{ marginLeft: 2 }}>\r\n              <div style={{ ...styleCenter, fontSize: 9, fontWeight: 'normal' }}>조회수</div>\r\n              <div style={{ ...styleCenter, fontSize: 13, fontWeight: 'normal', marginTop: 0 }}>\r\n                {course ? (course?.views ?? 0) : '1.1k'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div style={{ flex: 1, ...styleCenter }}>\r\n\r\n          {/* URL 복사 버튼 */}\r\n          <CopyToClipboard text={location.href} onCopy={disable ? () => { } : onCopy}>\r\n            <div style={{ ...fontStyle, ...styleCenter, }}>\r\n              <GoLinkExternal style={{ ...styleCenter }} size={32} color={GRAY7} />\r\n              <div style={{ marginLeft: 2 }}>\r\n                <div style={{ ...styleCenter, fontSize: 11, fontWeight: 'normal' }}>URL</div>\r\n                <div style={{ ...styleCenter, fontSize: 9, fontWeight: 'normal', marginTop: -4 }}>copy</div>\r\n              </div>\r\n            </div>\r\n          </CopyToClipboard>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};","import { useState } from \"react\";\r\nimport { CropState, FilePathInit, FilePathState } from \"../recoil\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { Icon } from \"../common/Icon\";\r\nimport useWindowDimensions from \"../../hook/useWindowDimensions\";\r\n\r\ntype Props = {\r\n  isEdit?: boolean;\r\n  imgUrl?: string;\r\n}\r\nexport const CourseImage = ({ isEdit = false, imgUrl }: Props) => {\r\n  const [filepath, setFilepath] = useRecoilState(FilePathState);\r\n  const { height, width } = useWindowDimensions();\r\n  // const [isCrop, setIsCrop] = useState(false);\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\" }}>\r\n        {/* 바탕사진 및 바탕 임시 회색 */}\r\n        <div\r\n          style={{\r\n            width: width,\r\n            backgroundImage: !isEdit\r\n              ? `linear-gradient(to bottom,rgba(0,0,0,0),rgba(255,255,255, 0),rgba(255,255,255, 0),rgba(255,255,255, 0),rgba(255,255,255, 0),rgba(255,255,255, 1)),url(${imgUrl ?? filepath.previewURL\r\n              })`\r\n              : filepath.previewURL != \"\"\r\n                ? `linear-gradient(to bottom,rgba(0,0,0,0),rgba(255,255,255, 1)),url(${imgUrl ?? filepath.previewURL})`\r\n                : `linear-gradient(to bottom,rgba(200,200,200,1),rgba(200,200,200, 1),rgba(200,200,200, 1),rgba(255,255,255, 0.2))`,\r\n            backgroundSize: \"cover\",\r\n            backgroundRepeat: \"no-repeat\",\r\n            height: (width * 200) / 200,\r\n          }}\r\n        />\r\n        {/* 바탕사진 */}\r\n        {isEdit ? (\r\n          <div style={{ position: \"relative\", top: -125 }}>\r\n            {filepath.previewURL != \"\" ? (\r\n              <div style={{ display: \"flex\" }}>\r\n                <div style={inputFileCSSNone}>\r\n                  <Icon name={\"faEdit\"} size={\"lg\"} color={\"rgba(73,80,87,0.5)\"} />\r\n                </div>\r\n                <div style={{ ...inputFileCSSNone, marginLeft: 5 }} onClick={() => setFilepath(FilePathInit)}>\r\n                  <Icon name={\"faTrash\"} size={\"lg\"} color={\"rgba(73,80,87,0.5)\"} />\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <label style={inputFileCSS} />\r\n            )}\r\n          </div>\r\n        ) : (\r\n          false\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst inputFileCSSNone = {\r\n  padding: \"6px 12px\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  display: \"flex\",\r\n  backgroundColor: \"rgba(255,255,255,0.8)\",\r\n  borderRadius: \"20px\",\r\n  color: \"white\",\r\n  cursor: \"pointer\",\r\n};\r\nconst inputFileCSS = {\r\n  fontSize: 13,\r\n  padding: \"6px 25px\",\r\n  backgroundColor: \"transparent\",\r\n  borderRadius: \"4px\",\r\n  color: \"white\",\r\n  cursor: \"pointer\",\r\n};\r\n","import { Icon } from \"./common/Icon\";\r\nimport { GRAY1, GRAY8 } from \"./../style/index\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport const BackHeader = ({color=GRAY1}) => {\r\n  const history = useHistory();\r\n  const goBack = () => history.goBack();\r\n\r\n  return (\r\n    <div onClick={goBack} style={{ position: \"absolute\", padding: 16 }}>\r\n      <Icon name={\"faChevronLeft\"} color={color} type={\"light\"} />\r\n    </div>\r\n  );\r\n};\r\n","import fetch from 'unfetch'\r\n\r\nconst fetcher = (url: string) => fetch(url).then(r => r.json())\r\nexport default fetcher;","import { PositionCard } from './../../card/PositionCard';\r\n\r\nexport const CPlace = ({index, data}) => {\r\n  return (\r\n      <PositionCard\r\n        key={index.toString()}\r\n        address={data.content.address_name}\r\n        title={data.content.place_name}\r\n        desc={data.content.category_name}\r\n        url={data.content.place_url}\r\n        img={\"https://picsum.photos/200\"}\r\n        imgWidth={70}\r\n        // onClick={() => onClick(data.content)}\r\n      />\r\n  );\r\n}","import { GRAY6, GRAY7, GRAY8 } from \"../../../style\";\r\nimport { useState, useCallback, useRef, useEffect } from \"react\";\r\nimport TextareaAutosize from \"react-autosize-textarea\";\r\nimport { offset, position } from \"caret-pos\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { commandInputListState, commandWindowState } from \"../../recoil\";\r\nimport { getPlatform } from \"../../common/function/getPlatform\";\r\nimport _ from \"lodash\";\r\nimport useWindowDimensions from \"../../../hook/useWindowDimensions\";\r\nimport { ContentItemType } from \"../../../types/Command\";\r\nexport const platform = getPlatform();\r\n\r\ntype Props = {\r\n  style?: any;\r\n  maxrows?: number;\r\n  index: number;\r\n  data: ContentItemType;\r\n  disable?: boolean;\r\n}\r\nexport const CTextarea = ({ style, maxrows, index, data, disable = false }: Props) => {\r\n  const [placeholder, setPlaceHolder] = useState(\"\");\r\n  const [rowIndex, setRowIndex] = useState({ height: 0, index: 0 });\r\n  const [commandWindow, setCommandWindow] = useRecoilState(commandWindowState);\r\n  const [commandInputList, setCommandInputList] = useRecoilState(commandInputListState);\r\n  const { height, width } = useWindowDimensions();\r\n  const ref = useRef<any>();\r\n  // 텍스트 변한 위치 찾기\r\n  const beforeInput = useRef(\"\");\r\n\r\n  //#region 이전 기본값 넣기\r\n  useEffect(() => {\r\n    if (ref && ref.current && data && typeof data.content === \"string\") {\r\n      ref.current.innerHTML = data.content\r\n    }\r\n  }, [ref.current])\r\n  //#endregion\r\n  //#region 컬러선택시 특정위치에 컬러넣기\r\n  let codes = \"\";\r\n  useEffect(() => {\r\n    if (!!commandWindow.color && commandWindow.index === index) {\r\n      let color = GRAY8;\r\n      let backgroundColor = \"white\";\r\n      switch (commandWindow.color) {\r\n        case \"red\":\r\n          color = \"#FF003D\";\r\n          break;\r\n        case \"blue\":\r\n          color = \"#0057FF\";\r\n          break;\r\n        case \"brown\":\r\n          color = \"#91624A\";\r\n          break;\r\n        case \"purple\":\r\n          color = \"#8F00FF\";\r\n          break;\r\n        case \"yellow\":\r\n          backgroundColor = \"#FFF500\";\r\n          break;\r\n        case \"orange\":\r\n          backgroundColor = \"#FF7D3A\";\r\n          break;\r\n        case \"gray\":\r\n          backgroundColor = \"#E8ECEF\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (ref)\r\n        if (ref.current && ref.current.innerHTML) {\r\n          const origin = ref.current.innerHTML;\r\n          const left = origin.slice(0, commandWindow.pos);\r\n          const right = origin.slice(commandWindow.pos, origin.length);\r\n          ref.current.innerHTML = `${left}<span style='color:${color};background-color:${backgroundColor}'>${commandWindow.color}</span>${right}`;\r\n        }\r\n    }\r\n  }, [commandWindow.color]);\r\n  //#endregion\r\n  const onInput = useCallback((e: any) => {\r\n    //#region placeholer 삭제\r\n    if (placeholder !== \"\" && e.target.innerHTML !== \"\") setPlaceHolder(\"\");\r\n    //#endregion\r\n    //#region 추가된 텍스트 위치 찾기 (pos)\r\n    let pos;\r\n    const len =\r\n      beforeInput.current.length > e.target.innerHTML.length ? beforeInput.current.length : e.target.innerHTML.length;\r\n    for (pos = 0; pos < len; pos++) {\r\n      if (beforeInput.current[pos] !== e.target.innerHTML[pos]) break;\r\n    }\r\n    //#endregion\r\n    //#region #누르면 명령어창 보여줌 || 안드로이드 설정(한번에 여러개들어옴)\r\n    if (\r\n      e.nativeEvent.data == \"#\" ||\r\n      (platform === \"android\" && !!e.nativeEvent.data && e.nativeEvent.data[e.nativeEvent.data.length - 1] === \"#\")\r\n    ) {\r\n      let { left, top, height } = offset(ref.current);\r\n      //#region 가로이동 제한 & height 화면 안 넘어가게 제한\r\n      // 가로제한\r\n      if (left + 260 > width && left < 260) {\r\n        left = commandWindow.left;\r\n      } else if (width - left < 260 && left > 260) left -= 280;\r\n      // 세로제한\r\n      let heightCommand = 448;\r\n      top -= heightCommand;\r\n      if (top < 0) {\r\n        heightCommand += top - height;\r\n        top = 0;\r\n      }\r\n      //#endregion\r\n      setCommandWindow({\r\n        ...commandWindow,\r\n        beforeInnerHTML: e.target.innerHTML,\r\n        visible: true,\r\n        top: top,\r\n        left: left,\r\n        index: index,\r\n        height: heightCommand,\r\n        pos: pos,\r\n      });\r\n    } else {\r\n      setCommandWindow({ ...commandWindow, visible: false, index: -1 });\r\n    }\r\n    //#region 내용업데이트\r\n      beforeInput.current = e.target.innerHTML;\r\n      setCommandInputList([\r\n        ...commandInputList.slice(0, index),\r\n        { ...commandInputList[index], content: e.target.innerHTML },\r\n        ...commandInputList.slice(index + 1, 999),\r\n      ]);\r\n    //#endregion\r\n    //#endregion #누르면 명령어창 보여줌\r\n    //#region 줄 수 제한 높이체크\r\n    if (!!maxrows) {\r\n      if (rowIndex.index < maxrows && rowIndex.height < e.target.scrollHeight)\r\n        setRowIndex({ index: rowIndex.index + 1, height: e.target.scrollHeight });\r\n      else if (rowIndex.height < e.target.scrollHeight) e.target.value = e.target.value.slice(0, -1);\r\n      e.target.style.maxHeight = rowIndex.height - 4 + \"px\";\r\n      e.target.style.height = rowIndex.height - 4 + \"px\";\r\n    }\r\n    //#endregion 줄 수 제한 높이체크\r\n  }, [rowIndex, beforeInput.current, commandWindow, index]);\r\n  const onBlur = useCallback(() => {\r\n    setPlaceHolder(\"\");\r\n  },[]);\r\n  const onFocus = useCallback(() => {\r\n    setCommandWindow({\r\n      ...commandWindow,\r\n      visible: false,\r\n      top: 0,\r\n      left: 0,\r\n      index: index,\r\n      height: 0,\r\n      pos: 0,\r\n    });\r\n    if (ref.current.innerHTML === \"\") setPlaceHolder('명령어 사용시 \"#\"을 입력하세요.');\r\n  }, [commandWindow, ref]);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        ref={ref}\r\n        onFocus={onFocus}\r\n        onInput={onInput}\r\n        onBlur={onBlur}\r\n        dangerouslySetInnerHTML={{ __html: codes }}\r\n        contentEditable={!disable}\r\n        suppressContentEditableWarning\r\n        spellCheck={false}\r\n        style={{ width: width - 60, color: GRAY7, outline: \"none\" }}\r\n      />\r\n      <div style={{ color: GRAY6, fontSize: 15, position: \"relative\", height: 0, top: \"-1.4em\", zIndex: -1 }}>{index === 0 && (!data || data.content === \"\") ? '내용을 반드시 입력해주세요!' : placeholder}</div>\r\n    </>\r\n  );\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport { commandInputListState, CropInit, CropState } from \"./../../recoil\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { Icon } from \"./../../common/Icon\";\r\nimport useWindowDimensions from \"../../../hook/useWindowDimensions\";\r\n\r\nexport const loadXHR = (url)=>{\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      const xhr = new XMLHttpRequest();\r\n      xhr.open(\"GET\", url);\r\n      xhr.responseType = \"blob\";\r\n      xhr.onerror = () => {\r\n        // reject(`Network error: ${event}`);\r\n        reject();\r\n      };\r\n      xhr.onload = () => {\r\n        if (xhr.status === 200) {\r\n          resolve(xhr.response);\r\n        } else {\r\n          // reject(`XHR load error: ${xhr.statusText}`);\r\n          reject(\"\");\r\n        }\r\n      };\r\n      xhr.send();\r\n    } catch (err) {\r\n      // reject(err.message);\r\n      reject(\"\");\r\n    }\r\n  });\r\n}\r\n\r\nexport const CImage = ({ index, data }) => {\r\n  const [commandInputList, setCommandInputList] = useRecoilState(commandInputListState);\r\n  const [crop, setCrop] = useRecoilState(CropState);\r\n  // const [filepath, setFilepath] = useState({ file: \"\", previewURL: \"\" });\r\n  const [isCrop, setIsCrop] = useState(false);\r\n  const filepath = commandInputList[index].content;\r\n  const { height, width } = useWindowDimensions();\r\n  //#region 앱껏다 키고 캐쉬 초기화 시 이미지 아닌게 들어깄으면 삭제\r\n  useEffect(() => {\r\n    loadXHR(filepath.file)\r\n      .then((f) => {\r\n        try {\r\n          // if (typeof f.type === \"string\") console.debug(f.type.includes(\"image\"), f);\r\n        } catch (e) {}\r\n      })\r\n      .catch(() => {\r\n        setCommandInputList([\r\n          ...commandInputList.slice(0, index),\r\n          { ...commandInputList[index], content: { file: \"\", previewURL: \"\" } },\r\n          ...commandInputList.slice(index + 1, 999),\r\n        ]);\r\n      });\r\n  }, []);\r\n  //#endregion\r\n  //#region 편집 후 가져오기\r\n  useEffect(() => {\r\n    if (!crop.visible && isCrop) {\r\n      setCommandInputList([\r\n        ...commandInputList.slice(0, index),\r\n        { ...commandInputList[index], content: { file: crop.file, previewURL: crop.previewURL, type: crop.type } },\r\n        ...commandInputList.slice(index + 1, 999),\r\n      ]);\r\n      // setFilepath({ file: crop.file, previewURL: crop.previewURL });\r\n      setIsCrop(false);\r\n      setCrop(CropInit);\r\n    }\r\n  }, [crop.visible]);\r\n  //#endregion\r\n  const onDeletePhoto = () => {\r\n    setCommandInputList([\r\n      ...commandInputList.slice(0, index),\r\n      { ...commandInputList[index], content: { file: \"\", previewURL: \"\" } },\r\n      ...commandInputList.slice(index + 1, 999),\r\n    ]);\r\n  };\r\n\r\n  const onChangeInput = (e) => {\r\n    try {\r\n      e.preventDefault();\r\n      let reader = new FileReader();\r\n      let file = e.target.files[0];\r\n      reader.onloadend = () => {\r\n        setIsCrop(true);\r\n        setCrop({ visible: true, file: file, previewURL: reader.result, type: file.type });\r\n      };\r\n      reader.readAsDataURL(file);\r\n    } catch (e) {\r\n      setIsCrop(false);\r\n      setCrop(CropInit);\r\n    }\r\n  };\r\n\r\n  const style =\r\n    filepath.previewURL !== \"\"\r\n      ? {\r\n          backgroundImage: `url(${filepath.previewURL})`,\r\n          backgroundColor: \"transparent\",\r\n        }\r\n      : {\r\n          backgroundColor: \"rgba(0,0,0,0.1)\", //transparent\r\n        };\r\n  return (\r\n    <div>\r\n      <div>\r\n        {/* 바탕사진 및 바탕 임시 회색 */}\r\n        <div\r\n          style={{\r\n            ...style,\r\n            height: ((width - 64) * 200) / 415,\r\n            width: width - 64,\r\n            backgroundSize: \"cover\",\r\n            backgroundRepeat: \"no-repeat\",\r\n          }}\r\n        />\r\n        {/* 바탕사진 선택버튼 */}\r\n        <div\r\n          style={{\r\n            position: \"relative\",\r\n            height: 0,\r\n            left: filepath.previewURL == \"\" ? (width - 175 - 64) / 2 : (width - 100 - 64) / 2,\r\n            top: -(((width - 64) * 200) / 415 / 2 + 15),\r\n          }}\r\n        >\r\n          {filepath.previewURL !== \"\" ? (\r\n            <div style={{ display: \"flex\" }}>\r\n              <div\r\n                style={inputFileCSSNone}\r\n                onClick={() => {\r\n                  setCrop({ visible: true, file: filepath.file, previewURL: filepath.previewURL });\r\n                  setIsCrop(true);\r\n                }}\r\n              >\r\n                <Icon name={\"faEdit\"} size={\"lg\"} color={\"rgba(73,80,87,0.5)\"} />\r\n              </div>\r\n              <div style={{ ...inputFileCSSNone, marginLeft: 5 }} onClick={onDeletePhoto}>\r\n                <Icon name={\"faTrash\"} size={\"lg\"} color={\"rgba(73,80,87,0.5)\"} />\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <label style={inputFileCSS} htmlFor={\"input-file\" + index}>\r\n              사진을 선택해주세요.\r\n            </label>\r\n          )}\r\n        </div>\r\n        <input\r\n          type=\"file\"\r\n          id={\"input-file\" + index}\r\n          value={\"\"}\r\n          style={{ display: \"none\" }}\r\n          accept=\"image/*\"\r\n          onChange={onChangeInput}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst inputFileCSSNone = {\r\n  padding: \"6px 12px\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  display: \"flex\",\r\n  backgroundColor: \"rgba(255,255,255,0.8)\",\r\n  borderRadius: \"20px\",\r\n  color: \"white\",\r\n  cursor: \"pointer\",\r\n};\r\nconst inputFileCSS = {\r\n  fontSize: 13,\r\n  padding: \"6px 25px\",\r\n  backgroundColor: \"#FF6600\",\r\n  borderRadius: \"4px\",\r\n  color: \"white\",\r\n  cursor: \"pointer\",\r\n};\r\n","import { GRAY6, GRAY7, GRAY8 } from \"../../../style\";\r\nimport { useState, useCallback, useRef, useEffect, useMemo } from \"react\";\r\nimport TextareaAutosize from \"react-autosize-textarea\";\r\nimport { offset, position } from \"caret-pos\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { commandInputListState, commandWindowState } from \"../../recoil\";\r\nimport { platform } from \"./CTextarea\";\r\nimport useWindowDimensions from \"../../../hook/useWindowDimensions\";\r\nimport { ContentItemType } from \"../../../types/Command\";\r\n\r\ntype Props = {\r\n  type: string;\r\n  maxrows?: number;\r\n  index: number;\r\n  data: ContentItemType;\r\n  disable?: boolean;\r\n}\r\nexport const CH = ({ index, type = \"h1\", data, disable }: Props) => {\r\n  const { height, width } = useWindowDimensions();\r\n  const [placeholder, setPlaceHolder] = useState( \"\");\r\n  const [rowIndex, setRowIndex] = useState({ height: 0, index: 0 });\r\n  const [commandWindow, setCommandWindow] = useRecoilState(commandWindowState);\r\n  const [commandInputList, setCommandInputList] = useRecoilState(commandInputListState);\r\n  // 텍스트 변한 위치 찾기\r\n  const beforeInput = useRef(\"\");\r\n  const ref = useRef<any>();\r\n\r\n  //#region 이전 기본값 넣기\r\n  useEffect(() => {\r\n    if (ref && ref.current && data && typeof data.content === \"string\") {\r\n      ref.current.innerHTML = data.content\r\n    }\r\n  }, [ref.current])\r\n  //#endregion\r\n  //#region 컬러선택시 특정위치에 컬러넣기\r\n  let codes = \"\";\r\n  useEffect(() => {\r\n    if (!!commandWindow.color && commandWindow.index === index) {\r\n      let color = GRAY8;\r\n      let backgroundColor = \"white\";\r\n      switch (commandWindow.color) {\r\n        case \"red\":\r\n          color = \"#FF003D\";\r\n          break;\r\n        case \"blue\":\r\n          color = \"#0057FF\";\r\n          break;\r\n        case \"brown\":\r\n          color = \"#91624A\";\r\n          break;\r\n        case \"purple\":\r\n          color = \"#8F00FF\";\r\n          break;\r\n        case \"yellow\":\r\n          backgroundColor = \"#FFF500\";\r\n          break;\r\n        case \"orange\":\r\n          backgroundColor = \"#FF7D3A\";\r\n          break;\r\n        case \"gray\":\r\n          backgroundColor = \"#E8ECEF\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (ref)\r\n        if (ref.current && ref.current.innerHTML) {\r\n          const origin = ref.current.innerHTML;\r\n          const left = origin.slice(0, commandWindow.pos);\r\n          const right = origin.slice(commandWindow.pos, origin.length);\r\n          ref.current.innerHTML = `${left}<span style='color:${color};background-color:${backgroundColor}'>${commandWindow.color}</span>${right}`;\r\n        }\r\n    }\r\n  }, [commandWindow.color]);\r\n  //#endregion\r\n\r\n  const onInput = useCallback(\r\n    (e) => {\r\n      //#region placeholer 삭제\r\n      if (placeholder !== \"\" && e.target.innerHTML !== \"\") setPlaceHolder(\"\");\r\n      //#endregion\r\n      //#region 추가된 텍스트 위치 찾기 (pos)\r\n      let pos;\r\n      const len =\r\n        beforeInput.current.length > e.target.innerHTML.length ? beforeInput.current.length : e.target.innerHTML.length;\r\n      for (pos = 0; pos < len; pos++) {\r\n        if (beforeInput.current[pos] !== e.target.innerHTML[pos]) break;\r\n      }\r\n      //#endregion\r\n      //#region #누르면 명령어창 보여줌 || 안드로이드 설정(한번에 여러개들어옴)\r\n      if (\r\n        e.nativeEvent.data == \"#\" ||\r\n        (platform === \"android\" && !!e.nativeEvent.data && e.nativeEvent.data[e.nativeEvent.data.length - 1] === \"#\")\r\n      ) {\r\n        let { left, top, height } = offset(ref.current);\r\n        //#region 가로이동 제한 & height 화면 안 넘어가게 제한\r\n        // 가로제한\r\n        if (left + 260 > width && left < 260) {\r\n          left = commandWindow.left;\r\n        } else if (width - left < 260 && left > 260) left -= 280;\r\n        // 세로제한\r\n        let heightCommand = 448;\r\n        top -= heightCommand;\r\n        if (top < 0) {\r\n          heightCommand += top - height;\r\n          top = 0;\r\n        }\r\n        //#endregion\r\n        setCommandWindow({\r\n          ...commandWindow,\r\n          visible: true,\r\n          top: top - 25,\r\n          left: left,\r\n          index: index,\r\n          height: heightCommand,\r\n          pos: pos,\r\n        });\r\n      } else {\r\n        setCommandWindow({ ...commandWindow, visible: false, index: -1 });\r\n      }\r\n      //#region 내용업데이트\r\n      beforeInput.current = e.target.innerHTML;\r\n      setCommandInputList([\r\n        ...commandInputList.slice(0, index),\r\n        { ...commandInputList[index], content: e.target.innerHTML },\r\n        ...commandInputList.slice(index + 1, 999),\r\n      ]);\r\n      //#endregion\r\n      //#endregion #누르면 명령어창 보여줌\r\n    },\r\n    [rowIndex, beforeInput.current, commandWindow, index]\r\n  );\r\n  const onBlur = useCallback(() => {\r\n    setPlaceHolder(\"\");\r\n  },[]);\r\n  const onFocus = useCallback(()=>{\r\n    setCommandWindow({\r\n      ...commandWindow,\r\n      visible: false,\r\n      top: 0,\r\n      left: 0,\r\n      index: index,\r\n      height: 0,\r\n      pos: 0,\r\n    });\r\n\r\n    if (ref.current.innerHTML === \"\") setPlaceHolder('명령어 사용시 \"#\"을 입력하세요.');\r\n  }, [commandWindow, ref]);\r\n\r\n  const style: any = useMemo(\r\n    () => (type == \"h1\" ? { fontSize: 21, fontWeight: \"bold\" } : type == \"h2\" ? { fontSize: 18 } : { fontSize: 16 }),\r\n    []\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        ref={ref}\r\n        onFocus={onFocus}\r\n        onInput={onInput}\r\n        onBlur={onBlur}\r\n        dangerouslySetInnerHTML={{ __html: codes }}\r\n        contentEditable={!disable}\r\n        suppressContentEditableWarning\r\n        spellCheck={false}\r\n        style={{ width: width - 60, color: GRAY7, outline: \"none\", ...style }}\r\n      />\r\n      <div style={{ color: GRAY6, fontSize: 15, position: \"relative\", height: 0, top: \"-1.4em\",zIndex:-1 }}>{placeholder}</div>\r\n    </>\r\n  );\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { commandInputListState } from \"../../recoil\";\r\nimport { WithContext as ReactTags } from \"react-tag-input\";\r\n\r\nimport \"../../../App.css\";\r\nimport { ContentItemType } from \"../../../types/Command\";\r\n\r\nconst KeyCodes = {\r\n  comma: 188,\r\n  space: 32,\r\n  enter: [10, 13],\r\n};\r\n\r\nconst delimiters = [...KeyCodes.enter, KeyCodes.comma, KeyCodes.space];\r\n\r\n// tagList:[], inputValue:\"\"\r\ntype Props = {\r\n  index: number;\r\n  data: ContentItemType;\r\n  disable?: boolean;\r\n}\r\nexport const CTag = ({ index, disable, data }: Props) => {\r\n  const [commandInputList, setCommandInputList] = useRecoilState(commandInputListState);\r\n  const tagList = disable ? data.content.tagList  : commandInputList[index].content.tagList;\r\n  const inputValue = disable ? data.content.inputValue :commandInputList[index].content.inputValue;\r\n \r\n  //#region 태그기본함수\r\n  // 태그삭제\r\n  const handleDelete = (i: number) => {\r\n    setCommandInputList([\r\n      ...commandInputList.slice(0, index),\r\n      {\r\n        ...commandInputList[index],\r\n        content: { inputValue: inputValue, tagList: tagList.filter((tag: string, index: number) => index !== i) },\r\n      },\r\n      ...commandInputList.slice(index + 1, 999),\r\n    ]);\r\n  };\r\n  // 태그추가\r\n  const handleAddition = (tag: any) => {\r\n    setCommandInputList([\r\n      ...commandInputList.slice(0, index),\r\n      { ...commandInputList[index], content: { inputValue: \"\", tagList: [...tagList, tag] } },\r\n      ...commandInputList.slice(index + 1, 999),\r\n    ]);\r\n  };\r\n  //#endregion\r\n  return (\r\n    <>\r\n      <ReactTags\r\n        className={disable ? \"disableTag\" : \"\"}\r\n        placeholder={\"엔터, 스페이스, 쉼표로 태그를 구분해주세요.\"}\r\n        maxLength={30}\r\n        allowDeleteFromEmptyInput={false}\r\n        inline\r\n        tags={tagList}\r\n        readOnly={disable}\r\n        // inputValue={inputValue}\r\n        // suggestions={suggestionList}\r\n        handleDelete={handleDelete}\r\n        handleAddition={handleAddition}\r\n        // handleInputChange={handleInputChange}\r\n        delimiters={delimiters}\r\n      // renderSuggestion={({ text }, query) => (\r\n      //   <div style={{ fontSize: 11 }}>\r\n      //     {text}\r\n      //     {/* ({query}) */}\r\n      //   </div>\r\n      // )}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import useWindowDimensions from '../../../hook/useWindowDimensions';\r\n\r\nexport const CContour = ({ index, data }) => {\r\n  const { height, width } = useWindowDimensions();\r\n  return <div style={{ width: width  - 32, height: 2, backgroundColor: \"black\", marginTop: 11,marginBottom:11, borderRadius: 10 }} />;\r\n};","import { BottomSheet } from \"react-spring-bottom-sheet\";\r\nimport \"react-spring-bottom-sheet/dist/style.css\";\r\nimport { GRAY7 } from \"../../style\";\r\nimport { GRAY6 } from \"../../style/index\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { commandInputListState, commandWindowState, CourseProductModalState } from \"../recoil\";\r\nimport { createRef, useRef, useState } from \"react\";\r\nimport { InputSearch } from \"../Input/index\";\r\nimport { PositionCard } from \"../card/PositionCard\";\r\nimport { getItems } from \"../Input/CommandInput/dndFunc\";\r\nimport { CreateRouteBottomModalState } from '../recoil';\r\n\r\n//#region 콤마함수 : 숫자 3자리마다 콤마 찍어줌\r\nexport const numberWithCommas = (x) => {\r\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n};\r\nexport const noTags = (x) => {\r\n  return x.toString().replace(/(<([^>]+)>)/gi, \"\");\r\n};\r\n//#endregion\r\nexport const productInit = {\r\n  brand: \"\",\r\n  category1: \"\",\r\n  category2: \"\",\r\n  category3: \"\",\r\n  category4: \"\",\r\n  // hprice: \"\",\r\n  image: \"\",\r\n  link: \"\",\r\n  lprice: \"\",\r\n  maker: \"\",\r\n  mallName: \"\",\r\n  productId: \"\",\r\n  productType: \"\",\r\n  title: \"\",\r\n};\r\nconst procductInfoInit = {\r\n  items: [productInit],\r\n  display: 80,\r\n  start: 1,\r\n  total: 0,\r\n  lastBuildDate: \"\",\r\n};\r\nexport const CourseProductModal = () => {\r\n  const [, setVisibleRoute] = useRecoilState(CreateRouteBottomModalState);\r\n  const [visibleRouteProduct, setVisibleRouteProduct] = useRecoilState(CourseProductModalState);\r\n  const [commandWindow] = useRecoilState(commandWindowState);\r\n  const [commandInputList, setCommandInputList] = useRecoilState(commandInputListState);\r\n  const [procductInfo, setProcductInfo] = useState(procductInfoInit);\r\n  const filterSearchTxt = useRef(\"\");\r\n  const bottomRef = useRef();\r\n\r\n  //#region 네이버 상품검색\r\n  const onChangeFilterSearchTxt = async (t) => {\r\n    if (t.length === 0) {\r\n      setProcductInfo(procductInfoInit);\r\n    } else {\r\n      // https://openapi.naver.com/v1/search/shop.json?query=\r\n      fetch(`/v1/search/shop.json?query=${t}&display=${procductInfoInit.display}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          \"X-Naver-Client-Id\": \"yeoXdUtxPpcjkxR4G932\",\r\n          \"X-Naver-Client-Secret\": \"TChrYL1rxH\",\r\n        },\r\n      })\r\n        .then((d) => d.json())\r\n        .then((d) => setProcductInfo(d));\r\n    }\r\n  };\r\n  //#endregion\r\n\r\n  //#region 닫기 클릭시\r\n  const onClickClose = () => {\r\n    setVisibleRouteProduct(false);\r\n    setVisibleRoute(true);\r\n  };\r\n  //#endregion\r\n  const LIST = procductInfo.items;\r\n  return (\r\n    <>\r\n      <BottomSheet\r\n        ref={bottomRef}\r\n        blocking={false}\r\n        open={visibleRouteProduct}\r\n        onDismiss={() => setVisibleRouteProduct(false)}\r\n        snapPoints={({ minHeight, maxHeight }) => [maxHeight * 0.5, maxHeight * 0.99]}\r\n        defaultSnap={({ lastSnap, snapPoints }) => [snapPoints[1]]}\r\n        header={\r\n          <div>\r\n            <div style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY7, float: \"left\" }}>\r\n              추천 상품을 추가해보세요!\r\n            </div>\r\n            <div\r\n              style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY6, float: \"right\" }}\r\n              onClick={onClickClose}\r\n            >\r\n              닫기\r\n            </div>\r\n          </div>\r\n        }\r\n        expandOnContentDrag={true}\r\n      >\r\n        <div style={{ padding: \"0 10px 80px 10px\" }}>\r\n          <div style={{ display: \"flex\", justifyContent: \"center\", marginTop: 16 }}>\r\n            <InputSearch\r\n              value={filterSearchTxt}\r\n              placeholder={\"검색어를 입력해주세요.\"}\r\n              onChange={onChangeFilterSearchTxt}\r\n            />\r\n          </div>\r\n          {LIST[0].brand !== \"\" &&\r\n            LIST.map((product, i) => {\r\n              const ref = createRef();\r\n              const onClick = () => {\r\n                const index = commandWindow.index + 1;\r\n                setCommandInputList([\r\n                  ...commandInputList.slice(0, index),\r\n                  ...getItems(1, commandInputList.length, \"product\", product),\r\n                  ...commandInputList.slice(index + 1, 999),\r\n                ]);\r\n                setVisibleRouteProduct(false);\r\n                setVisibleRoute(true);\r\n              };\r\n              return (\r\n                <div key={i.toString()} ref={ref}>\r\n                  <PositionCard\r\n                    address={`${product.category1} > ${product.category2} > ${product.category3} > ${product.category4}`}\r\n                    title={noTags(product.title)}\r\n                    desc={`최저가 ${numberWithCommas(product.lprice)}원`}\r\n                    url={\"\"}\r\n                    img={product.image}\r\n                    onClick={onClick}\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n        </div>\r\n      </BottomSheet>\r\n    </>\r\n  );\r\n};\r\n","import { noTags } from \"../../modal/CourseProductModal\";\r\nimport { PositionCard } from \"./../../card/PositionCard\";\r\nimport { numberWithCommas } from \"./../../modal/CourseProductModal\";\r\n\r\nexport const CProduct = ({ index, data }) => {\r\n  const product = data.content;\r\n  return (\r\n    <PositionCard\r\n      address={`${product.category1} > ${product.category2} > ${product.category3} > ${product.category4}`}\r\n      title={noTags(product.title)}\r\n      desc={`최저가 ${numberWithCommas(product.lprice)}원`}\r\n      url={\"\"}\r\n      imgWidth={70}\r\n      img={product.image}\r\n      onClick={() => {}}\r\n    />\r\n  );\r\n};\r\n","import { CPlace } from \"./CPlace\";\r\nimport { CTextarea } from \"./CTextarea\";\r\nimport { CImage } from './CImage';\r\nimport { CH } from './CH';\r\nimport { CTag } from './CTag';\r\nimport { CContour } from './CContour';\r\nimport { CProduct } from \"./CProduct\";\r\nimport { ContentItemType } from \"../../../types/Command\";\r\nimport { memo } from \"react\";\r\nimport _ from \"lodash\";\r\n\r\ntype Props = {\r\n  index: number;\r\n  data: ContentItemType;\r\n  disable: boolean;\r\n}\r\nexport const CItem = ({ index, data, disable = false }: Props) => {\r\n  switch (data.type) {\r\n    case \"text\":\r\n      return <CTextarea index={index} data={data} disable={disable} />;\r\n    case \"place\":\r\n      return <CPlace index={index} data={data} />;\r\n    case \"product\":\r\n      return <CProduct index={index} data={data} />;\r\n    case \"image\":\r\n      return <CImage index={index} data={data} />;\r\n    case \"h1\":\r\n      return <CH index={index} data={data} type={'h1'} disable={disable} />;\r\n    case \"h2\":\r\n      return <CH index={index} data={data} type={\"h2\"} disable={disable} />;\r\n    case \"h3\":\r\n      return <CH index={index} data={data} type={\"h3\"} disable={disable} />;\r\n    case \"tag\":\r\n      return <CTag disable={disable} index={index} data={data} />;\r\n    case \"contour\":\r\n      return <CContour index={index} data={data} />;\r\n    default:\r\n      return <></>;\r\n  }\r\n};\r\nexport const MCItem = memo(CItem, isEqual);\r\nfunction isEqual(prevProps: any, nextProps: any) {\r\n  let checkProps = ['index', 'data', 'disable'];\r\n  return _.isMatch(_.pick(prevProps, checkProps), _.pick(nextProps, checkProps));\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { Textarea } from \"../components/Input\";\r\nimport { CourseActionField } from \"../components/Btn/CourseActionField\";\r\nimport { ProfileCard } from \"../components/card/ProfileCard\";\r\nimport { CourseImage } from \"../components/Input/CourseImage\";\r\nimport { BackHeader } from \"../components/BackHeader\";\r\nimport useSWR from \"swr\";\r\nimport { useParams } from \"react-router\";\r\nimport { API_URL, postfetch } from \"../components/common\";\r\nimport fetcher from \"../hook/useSWR/fetcher\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { loadingState, shareModalState } from \"../components/recoil\";\r\nimport { CourseType } from \"../types/Course\";\r\nimport { BottomSheet } from \"react-spring-bottom-sheet\";\r\nimport { GRAY6, GRAY7, GRAY8, SCREEN_HEIGHT, styleCenter } from \"../style\";\r\n//#region react-share\r\nimport {\r\n  EmailShareButton,\r\n  FacebookShareButton,\r\n  HatenaShareButton,\r\n  InstapaperShareButton,\r\n  LineShareButton,\r\n  LinkedinShareButton,\r\n  LivejournalShareButton,\r\n  MailruShareButton,\r\n  OKShareButton,\r\n  PinterestShareButton,\r\n  PocketShareButton,\r\n  RedditShareButton,\r\n  TelegramShareButton,\r\n  TumblrShareButton,\r\n  TwitterShareButton,\r\n  ViberShareButton,\r\n  VKShareButton,\r\n  WhatsappShareButton,\r\n  WorkplaceShareButton,\r\n  EmailIcon,\r\n  FacebookIcon,\r\n  HatenaIcon,\r\n  InstapaperIcon,\r\n  LineIcon,\r\n  LinkedinIcon,\r\n  LivejournalIcon,\r\n  MailruIcon,\r\n  OKIcon,\r\n  PinterestIcon,\r\n  PocketIcon,\r\n  RedditIcon,\r\n  TelegramIcon,\r\n  TumblrIcon,\r\n  TwitterIcon,\r\n  ViberIcon,\r\n  VKIcon,\r\n  WhatsappIcon,\r\n  WorkplaceIcon,\r\n} from \"react-share\";\r\nimport { CItem, MCItem } from \"../components/Input/CommandInput/CItem\";\r\nimport { ContentItemType } from \"../types/Command\";\r\n//#endregion\r\n\r\nconst CourseDetailScreen = () => {\r\n  const [loading, setLoading] = useRecoilState(loadingState);\r\n  //#region 스크롤 열기\r\n  useEffect(() => {\r\n    // 스크롤 관리\r\n    const body = document.getElementsByTagName(\"body\")[0];\r\n    body.setAttribute(\"style\", \"overflow: scroll;\");\r\n    return () => {\r\n      body.setAttribute(\"style\", \"overflow: hidden;\");\r\n      setLoading(false);\r\n    };\r\n  }, []);\r\n  //#endregion\r\n  //#region  데이터관리\r\n  const { id }: { id: string | undefined } = useParams();\r\n  const { data, error, mutate } = useSWR(`${API_URL}/courses?id=${id}`, fetcher);\r\n  if ((error || !data) && !loading) setLoading(true);\r\n  const course: CourseType = data ? data[0] : null;\r\n  //#region 조회수 증가\r\n  useEffect(() => {\r\n    if (course)\r\n      postfetch(`/courses/${id}`, JSON.stringify({ views: course.views ? Number(course.views) + 1 : 1 }), true, \"PUT\").then((d) => mutate());\r\n  }, []);\r\n  //#endregion\r\n  if (error)\r\n    return (\r\n      <div>\r\n        <BackHeader />\r\n        failed to load\r\n      </div>\r\n    );\r\n  if (!data)\r\n    return (\r\n      <div>\r\n        <BackHeader />\r\n        {/* loading... */}\r\n      </div>\r\n    );\r\n  if (loading) setLoading(false);\r\n\r\n  //#endregion\r\n\r\n  return (\r\n    <>\r\n      <div style={{ position: \"fixed\" }}>\r\n        <BackHeader />\r\n      </div>\r\n      <CourseArea mutate={mutate} course={course} />\r\n      <ShareModal url={location.href} course={course} />\r\n    </>\r\n  );\r\n};\r\n//#region ShareModal\r\nconst BtnStyle = { width: 64, height: 90, marginRight: 8, marginTop: 2 };\r\nconst IconStyle = { borderRadius: 10, ...styleCenter };\r\nconst ShareModal = ({ url = \"\", course }: { url: string; course: CourseType }) => {\r\n  const [modalInfo, setModalInfo] = useRecoilState(shareModalState);\r\n  return (\r\n    <BottomSheet\r\n      // ref={bottomRef}\r\n      blocking={false}\r\n      open={modalInfo.visible}\r\n      onDismiss={() => setModalInfo({ ...modalInfo, visible: false })}\r\n      snapPoints={({ minHeight, maxHeight }) => [\r\n        maxHeight * 0.4 + 30,\r\n        maxHeight * 0.5,\r\n        maxHeight * 0.7,\r\n        maxHeight * 0.9,\r\n      ]}\r\n      defaultSnap={({ lastSnap, snapPoints }) => SCREEN_HEIGHT * 0.4}\r\n      header={\r\n        <div>\r\n          <div style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY7, float: \"left\" }}>\r\n            코스를 공유해보세요!\r\n          </div>\r\n          <div\r\n            style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY6, float: \"right\" }}\r\n            onClick={() => setModalInfo({ ...modalInfo, visible: false })}\r\n          >\r\n            닫기\r\n          </div>\r\n        </div>\r\n      }\r\n      expandOnContentDrag={false}\r\n    >\r\n      <div style={{ ...styleCenter, display: \"flex\", flexFlow: \"wrap\", color: GRAY7, fontSize: 15 }}>\r\n        <EmailShareButton subject={\"subject\"} body={\"body\"} url={url} style={BtnStyle}>\r\n          <EmailIcon style={IconStyle} />\r\n          Email\r\n        </EmailShareButton>\r\n        <TwitterShareButton url={url} style={BtnStyle}>\r\n          <TwitterIcon style={IconStyle} />\r\n          Twitter\r\n        </TwitterShareButton>\r\n        <LineShareButton url={url} style={BtnStyle}>\r\n          <LineIcon style={IconStyle} />\r\n          라인\r\n        </LineShareButton>\r\n        <FacebookShareButton url={url} style={BtnStyle} hashtag={\"campustaxi\"}>\r\n          <FacebookIcon style={IconStyle} />\r\n          Facebook\r\n        </FacebookShareButton>\r\n        <HatenaShareButton url={url} style={BtnStyle} title={\"campustaxi\"}>\r\n          <HatenaIcon style={IconStyle} />\r\n          Hatena\r\n        </HatenaShareButton>\r\n        <InstapaperShareButton url={url} style={BtnStyle}>\r\n          <InstapaperIcon style={IconStyle} />\r\n          Instapaper\r\n        </InstapaperShareButton>\r\n        <LinkedinShareButton url={url} style={BtnStyle}>\r\n          <LinkedinIcon style={IconStyle} />\r\n          Linkedin\r\n        </LinkedinShareButton>\r\n        <LivejournalShareButton url={url} style={BtnStyle}>\r\n          <LivejournalIcon style={IconStyle} />\r\n          Livejournal\r\n        </LivejournalShareButton>\r\n        <MailruShareButton url={url} style={BtnStyle}>\r\n          <MailruIcon style={IconStyle} />\r\n          Mailru\r\n        </MailruShareButton>\r\n        <OKShareButton url={url} style={BtnStyle}>\r\n          <OKIcon style={IconStyle} />\r\n          OK\r\n        </OKShareButton>\r\n        <PinterestShareButton url={url} style={BtnStyle} media={url}>\r\n          <PinterestIcon style={IconStyle} />\r\n          Pinterest\r\n        </PinterestShareButton>\r\n        <PocketShareButton url={url} style={BtnStyle}>\r\n          <PocketIcon style={IconStyle} />\r\n          Pocket\r\n        </PocketShareButton>\r\n        <RedditShareButton url={url} style={BtnStyle}>\r\n          <RedditIcon style={IconStyle} />\r\n          레딧\r\n        </RedditShareButton>\r\n        <TelegramShareButton url={url} style={BtnStyle}>\r\n          <TelegramIcon style={IconStyle} />\r\n          텔레그램\r\n        </TelegramShareButton>\r\n        <TumblrShareButton url={url} style={BtnStyle}>\r\n          <TumblrIcon style={IconStyle} />\r\n          텀블러\r\n        </TumblrShareButton>\r\n        <ViberShareButton url={url} style={BtnStyle}>\r\n          <ViberIcon style={IconStyle} />\r\n          Viber\r\n        </ViberShareButton>\r\n        <VKShareButton url={url} style={BtnStyle}>\r\n          <VKIcon style={IconStyle} />\r\n          VK\r\n        </VKShareButton>\r\n        <WhatsappShareButton url={url} style={BtnStyle}>\r\n          <WhatsappIcon style={IconStyle} />\r\n          Whatsapp\r\n        </WhatsappShareButton>\r\n        <WorkplaceShareButton url={url} style={BtnStyle}>\r\n          <WorkplaceIcon style={IconStyle} />\r\n          Workplace\r\n        </WorkplaceShareButton>\r\n      </div>\r\n    </BottomSheet>\r\n  );\r\n};\r\n//#endregion\r\n\r\nconst CourseArea = ({ mutate, course }: { course: CourseType, mutate: any }) => {\r\n  let content: ContentItemType[] = [];\r\n  try {\r\n    content = JSON.parse(course.content);\r\n    console.log(content)\r\n  } catch (error) { }\r\n  return (\r\n    <>\r\n      <CourseImage imgUrl={course && course.images && course.images.length > 0 ? course.images[0].url : \"\"} />\r\n      <div style={{ padding: \"0 16px 80px 16px\" }}>\r\n        <div style={{ marginTop: 16 }}>\r\n          <Textarea\r\n            disabled\r\n            defaultValue={course ? course.title ?? \"\" : \"\"}\r\n            style={{\r\n              border: \"none\",\r\n              width: \"100%\",\r\n              fontSize: 19,\r\n              paddingRight: 6,\r\n              padding: 2,\r\n              fontFamily: \"AppleSDGothic\",\r\n              backgroundColor: \"transparent\",\r\n              resize: \"none\",\r\n              outline: \"none\",\r\n            }}\r\n          />\r\n          <div style={{ marginTop: 12 }}>\r\n            <Textarea\r\n              disabled\r\n              defaultValue={course && (course.description ?? \"\")}\r\n              style={{\r\n                border: \"none\",\r\n                width: \"100%\",\r\n                fontSize: 15,\r\n                paddingRight: 6,\r\n                fontFamily: \"AppleSDGothic\",\r\n                backgroundColor: \"transparent\",\r\n                resize: \"none\",\r\n                overflow: \"hidden\",\r\n                outline: \"none\",\r\n              }}\r\n            />\r\n          </div>\r\n          <CourseActionField mutate={mutate} course={course} />\r\n          <ProfileCard\r\n            userId={course && course.creator_id ? course.creator_id.id : -1}\r\n            address={course && course.creator_id ? course.creator_id.nickname : \"\"}\r\n            title={course && course.creator_id ? course.creator_id.email : \"\"}\r\n            desc={`팔로워 ${course && course.creator_id ? course.creator_id.follower ?? 0 : 0}`}\r\n            img={course && course.creator_id ? course.creator_id.profile_image : \"\"}\r\n          />\r\n          <CommandArea content={content} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst CommandArea = ({ content }: { content: ContentItemType[] }) => {\r\n  return (\r\n    <div>\r\n      {content.map((item, i: number) => {\r\n        return (\r\n          <div key={i.toString()}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"flex-start\",\r\n                justifyItems: \"center\",\r\n                marginTop: 8,\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyItems: \"center\",\r\n                  height: 10,\r\n                }}\r\n              ></div>\r\n              <div style={{ padding: 1.5 }}>\r\n                <MCItem index={i} data={item} disable />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\nexport default CourseDetailScreen;\r\n","import React from \"react\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { GRAY7 } from \"../../style\";\r\nimport { CreateRouteBottomModalState } from \"../recoil\";\r\nimport { Icon } from './../common/Icon';\r\nimport { GRAY8 } from './../../style/index';\r\nimport useWindowDimensions from \"../../hook/useWindowDimensions\";\r\n\r\nexport const CreateBtnCourse = () => {\r\n  const [, setVisibleRoute] = useRecoilState(CreateRouteBottomModalState); //visibleRoute\r\n  const { height, width } = useWindowDimensions();\r\n  const onClick = () => {\r\n    setVisibleRoute(true);\r\n  };\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"fixed\",\r\n        width: 60,\r\n        height: 60,\r\n        borderRadius: 200,\r\n        backgroundColor: \"white\",\r\n        bottom: 96 + 18,\r\n        right: width * 0.125,\r\n        boxShadow: \"0.2px 0.2px 0 0 gray\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n      }}\r\n      onClick={onClick}\r\n    >\r\n      <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\" }}>\r\n        <Icon name={\"faIcons\"} size={\"lg\"} color={GRAY8} />\r\n        <div style={{ fontSize: 8, color: GRAY7 }}>Create</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { CropInit, CropState, FilePathInit, FilePathState } from \"../recoil\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { Icon } from \"../common/Icon\";\r\nimport { loadXHR } from \"./CommandInput/CImage\";\r\nimport useWindowDimensions from \"../../hook/useWindowDimensions\";\r\n\r\nexport const InputImage = ({ placeholder }) => {\r\n  const [crop, setCrop] = useRecoilState(CropState);\r\n  const [filepath, setFilepath] = useRecoilState(FilePathState);\r\n  const [isCrop, setIsCrop] = useState(false);\r\nconst { height, width } = useWindowDimensions();\r\n  //#region 앱껏다 키고 캐쉬 초기화 시 이미지 아닌게 들어깄으면 삭제\r\n  useEffect(() => {\r\n    loadXHR(filepath.file)\r\n      .then((f) => {\r\n        try {\r\n          // if (typeof f.type === \"string\") console.debug(f.type.includes(\"image\"), f);\r\n        } catch (e) {}\r\n      })\r\n      .catch(() => setFilepath(FilePathInit));\r\n  }, []);\r\n  //#endregion\r\n\r\n  //#region 편집 후 가져오기\r\n  useEffect(() => {\r\n    if (!crop.visible && isCrop) {\r\n      setFilepath({ file: crop.file, previewURL: crop.previewURL, type: crop.type });\r\n      setIsCrop(false);\r\n      setCrop(CropInit);\r\n    }\r\n  }, [crop.visible]);\r\n  //#endregion\r\n  const onChangeInput = (e) => {\r\n    try {\r\n      e.preventDefault();\r\n      let reader = new FileReader();\r\n      let file = e.target.files[0];\r\n      reader.onloadend = () => {\r\n        setIsCrop(true);\r\n        setCrop({ visible: true, file: file, previewURL: reader.result, type: file.type });\r\n      };\r\n      reader.readAsDataURL(file);\r\n    } catch (e) {\r\n      setIsCrop(false);\r\n      setCrop(CropInit);\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <div style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\" }}>\r\n        {/* 바탕사진 및 바탕 임시 회색 */}\r\n        <div\r\n          style={{\r\n            width: width,\r\n            backgroundImage:\r\n              filepath.previewURL != \"\"\r\n                ? `linear-gradient(to bottom,rgba(0,0,0,0),rgba(255,255,255, 1)),url(${filepath.previewURL})`\r\n                : `linear-gradient(to bottom,rgba(200,200,200,1),rgba(200,200,200, 1),rgba(200,200,200, 1),rgba(255,255,255, 0.2))`,\r\n            backgroundSize: \"cover\",\r\n            backgroundRepeat: \"no-repeat\",\r\n            height: (width * 200) / 200,\r\n          }}\r\n        />\r\n        {/* 바탕사진 선택버튼 */}\r\n        <div style={{ position: \"relative\", top: -225 }}>\r\n          {filepath.previewURL != \"\" ? (\r\n            <div style={{ display: \"flex\" }}>\r\n              <div\r\n                style={inputFileCSSNone}\r\n                onClick={() => {\r\n                  setCrop({ visible: true, file: filepath.file, previewURL: filepath.previewURL });\r\n                  setIsCrop(true);\r\n                }}\r\n              >\r\n                <Icon name={\"faEdit\"} size={\"lg\"} color={\"rgba(73,80,87,0.5)\"} />\r\n              </div>\r\n              <div style={{ ...inputFileCSSNone, marginLeft: 5 }} onClick={() => setFilepath(FilePathInit)}>\r\n                <Icon name={\"faTrash\"} size={\"lg\"} color={\"rgba(73,80,87,0.5)\"} />\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <label style={inputFileCSS} htmlFor=\"input-file\">\r\n              {placeholder}\r\n            </label>\r\n          )}\r\n        </div>\r\n        <input\r\n          value={\"\"}\r\n          type=\"file\"\r\n          id=\"input-file\"\r\n          style={{ display: \"none\" }}\r\n          accept=\"image/*\"\r\n          onChange={onChangeInput}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst inputFileCSSNone = {\r\n  padding: \"6px 12px\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  display: \"flex\",\r\n  backgroundColor: \"rgba(255,255,255,0.8)\",\r\n  borderRadius: \"20px\",\r\n  color: \"white\",\r\n  cursor: \"pointer\",\r\n};\r\nconst inputFileCSS = {\r\n  fontSize: 13,\r\n  padding: \"6px 25px\",\r\n  backgroundColor: \"#FF6600\",\r\n  borderRadius: \"4px\",\r\n  color: \"white\",\r\n  cursor: \"pointer\",\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { GRAY6, GRAY1, GRAY2 } from \"./../../style/index\";\r\nimport { useRecoilState } from 'recoil';\r\nimport { commandWindowState } from \"../recoil\";\r\n\r\nconst box_active = {\r\n  border: `1px solid ${GRAY2}`,\r\n  borderRadius: 4,\r\n  padding: 8,\r\n  background: `white`,\r\n  opacity: \"1\",\r\n  transition: \"opacity 200ms\",\r\n};\r\n\r\nconst box_hidden = {\r\n  border: `1px solid ${GRAY2}`,\r\n  borderRadius: 4,\r\n  padding: 8,\r\n  background: `white`,\r\n  opacity: \"0\",\r\n  transition: \"opacity 100ms\",\r\n};\r\n\r\nexport const FadeDiv = ({ visible, children, style }) => {\r\n  const [select, setSelect] = useState(false);\r\n  const [disable, setDisable] = useState(true);\r\n  const [commandWindow, ] = useRecoilState(commandWindowState);\r\n  useEffect(() => {\r\n    handleClick(visible);\r\n    if (visible) setDisable(false);\r\n    else setTimeout(() => setDisable(true), 100);\r\n  }, [visible, commandWindow]);\r\n  const handleClick = (visible) => {\r\n    setSelect(visible);\r\n  };\r\n  if (disable) return <></>;\r\n  return <div style={select ? { ...box_active, ...style } : { ...box_hidden, ...style }}>{children}</div>;\r\n};\r\n","import { GRAY6, GRAY8, SCREEN_HEIGHT } from \"../../../style\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport {\r\n  commandWindowState,\r\n  commandInputListState,\r\n  SearchPositionState,\r\n  CreateBottomModalState,\r\n  CourseProductModalState,\r\n  CreateRouteBottomModalState,\r\n} from \"../../recoil\";\r\nimport { getItems } from \"./dndFunc\";\r\nimport { homeTabIndexState } from \"./../../recoil\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport const CommandListRenderItem = ({ img, title, desc }) => {\r\n  const [commandWindow, setCommandWindow] = useRecoilState(commandWindowState);\r\n  const [commandInputList, setCommandInputList] = useRecoilState(commandInputListState);\r\n  const [, setHomeTabIndex] = useRecoilState(homeTabIndexState); //homeTabIndex\r\n  const [, setVisibleSearch] = useRecoilState(SearchPositionState); //visibleSearch\r\n  const [, setVisibleCreate] = useRecoilState(CreateBottomModalState); //visibleCreate\r\n  const [, setVisibleRouteProduct] = useRecoilState(CourseProductModalState); //visibleRouteProduct\r\n  const [, setVisibleRoute] = useRecoilState(CreateRouteBottomModalState); //visibleRoute\r\n\r\n  const history = useHistory();\r\n\r\n  const onClick = () => {\r\n    let i = commandWindow.index;\r\n    if (img === \"text\") {\r\n      setCommandInputList([\r\n        ...commandInputList.slice(0, i + 1),\r\n        ...getItems(1, commandInputList.length, \"text\"),\r\n        ...commandInputList.slice(i + 1, 999),\r\n      ]);\r\n      setCommandWindow({ ...commandWindow, visible: false, index: -1 });\r\n    } else if (img === \"place\") {\r\n      setHomeTabIndex(1);\r\n      setVisibleSearch({ visible: true, position: \"place\" });\r\n      setVisibleCreate(false);\r\n      history.push(\"/\");\r\n      setCommandWindow({ ...commandWindow, visible: false });\r\n    } else if (img === \"product\") {\r\n      setVisibleRoute(false);\r\n      setVisibleRouteProduct(true);\r\n      setCommandWindow({ ...commandWindow, visible: false });\r\n    } else if (img === \"image\") {\r\n      setCommandInputList([\r\n        ...commandInputList.slice(0, i + 1),\r\n        ...getItems(1, commandInputList.length, \"image\", { file: \"\", previewURL: \"\" }),\r\n        ...commandInputList.slice(i + 1, 999),\r\n      ]);\r\n      setCommandWindow({ ...commandWindow, visible: false, index: -1 });\r\n    } else if (img === \"h1\") {\r\n      setCommandInputList([\r\n        ...commandInputList.slice(0, i + 1),\r\n        ...getItems(1, commandInputList.length, \"h1\"),\r\n        ...commandInputList.slice(i + 1, 999),\r\n      ]);\r\n      setCommandWindow({ ...commandWindow, visible: false, index: -1 });\r\n    } else if (img === \"h2\") {\r\n      setCommandInputList([\r\n        ...commandInputList.slice(0, i + 1),\r\n        ...getItems(1, commandInputList.length, \"h2\"),\r\n        ...commandInputList.slice(i + 1, 999),\r\n      ]);\r\n      setCommandWindow({ ...commandWindow, visible: false, index: -1 });\r\n    } else if (img === \"h3\") {\r\n      setCommandInputList([\r\n        ...commandInputList.slice(0, i + 1),\r\n        ...getItems(1, commandInputList.length, \"h3\"),\r\n        ...commandInputList.slice(i + 1, 999),\r\n      ]);\r\n      setCommandWindow({ ...commandWindow, visible: false, index: -1 });\r\n    } else if (img === \"tag\") {\r\n      setCommandInputList([\r\n        ...commandInputList.slice(0, i + 1),\r\n        ...getItems(1, commandInputList.length + 1, \"tag\", { tagList: [], inputValue: \"\" }),\r\n        ...commandInputList.slice(i + 1, 999),\r\n      ]);\r\n      setCommandWindow({ ...commandWindow, visible: false, index: -1 });\r\n    } else if (img === \"contour\") {\r\n      setCommandInputList([\r\n        ...commandInputList.slice(0, i + 1),\r\n        ...getItems(1, commandInputList.length, \"contour\"),\r\n        ...commandInputList.slice(i + 1, 999),\r\n      ]);\r\n      setCommandWindow({ ...commandWindow, visible: false, index: -1 });\r\n    } else if (img === \"emoji\") {\r\n      // setCommandInputList([\r\n      //   ...commandInputList.slice(0, i + 1),\r\n      //   ...getItems(1, commandInputList.length, \"h1\"),\r\n      //   ...commandInputList.slice(i + 1, 999),\r\n      // ]);\r\n      setCommandWindow({ ...commandWindow, visible: false, index: -1 });\r\n    } else if ([\"red\", \"blue\", \"brown\", \"purple\", \"yellow\", \"orange\", \"gray\"].includes(img)) {\r\n      setCommandWindow({ ...commandWindow, visible: false, color: img });\r\n    }\r\n  };\r\n  return (\r\n    <div style={{ display: \"flex\", marginBottom: 6 }} onClick={onClick}>\r\n      <img alt={\" \"} src={`./images/CommandInput/asset/${img}.png`} height={SCREEN_HEIGHT * 0.045} />\r\n      <div style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", marginLeft: 8 }}>\r\n        <div style={{ color: GRAY8, fontSize: 13 }}>{title}</div>\r\n        <div style={{ color: GRAY6, fontSize: 11 }}>{desc}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { Icon } from \"./../common/Icon\";\r\nimport { GRAY6 } from \"./../../style/index\";\r\n\r\nexport const Rowdot = () => {\r\n  return (\r\n    <>\r\n      <Icon name={\"faEllipsisV\"} type={\"solid\"} size={\"xs\"} color={GRAY6} />\r\n      <Icon name={\"faEllipsisV\"} type={\"solid\"} size={\"xs\"} color={GRAY6} />\r\n    </>\r\n  );\r\n};\r\n","import { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\nimport { Icon } from \"../common/Icon\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { alertDialogInit, alertDialogState, commandInputListState, commandWindowState, placePosState } from \"../recoil\";\r\nimport { FadeDiv } from \"../FadeDiv\";\r\nimport { CommandListRenderItem } from \"./CommandInput/CommandListRenderItem\";\r\nimport { getItems, getItemStyle, getListStyle, onDragEnd } from \"./CommandInput/dndFunc\";\r\nimport { useCallback, useEffect } from \"react\";\r\nimport { posInit } from \"../common\";\r\nimport { CItem, MCItem } from \"./CommandInput/CItem\";\r\nimport { deleteModePosState } from \"./../recoil\";\r\nimport Button from \"@mui/material/Button\";\r\nimport { Rowdot } from \"./../Icon/Rowdot\";\r\n\r\nexport const CommandArea = ({ }) => {\r\n  const [deleteMode, setDeleteMode] = useRecoilState(deleteModePosState);\r\n  const [commandInputList, setCommandInputList] = useRecoilState(commandInputListState);\r\n  const [alertDialogInfo, setAlertDialogInfo] = useRecoilState(alertDialogState);\r\n  const [commandWindow] = useRecoilState(commandWindowState);\r\n  const [placePos, setPlacePos] = useRecoilState(placePosState);\r\n\r\n  //#region 명령어입력창 마지막는 무조건 텍스트(text,h1,h2,h3)로\r\n  useEffect(() => {\r\n    const type = commandInputList[commandInputList.length - 1].type;\r\n    if (type !== \"text\" && type !== \"h1\" && type !== \"h2\" && type !== \"h3\") {\r\n      setCommandInputList([...commandInputList, ...getItems(1, commandInputList.length + 1, \"text\")]);\r\n    }\r\n  }, [commandInputList.length]);\r\n  //#endregion\r\n  //#region 장소 선택 후 돌아올떄 반영\r\n  useEffect(() => {\r\n    if (placePos.id !== -1) {\r\n      let i = commandWindow.index;\r\n      setCommandInputList([\r\n        ...commandInputList.slice(0, i + 1),\r\n        ...getItems(1, commandInputList.length, \"place\", placePos),\r\n        ...commandInputList.slice(i + 1, 999),\r\n      ]);\r\n      setPlacePos(posInit);\r\n    }\r\n  }, []);\r\n  //#endregion\r\n  //#region 명령어창 UI\r\n  const CommandRect = useCallback(() => {\r\n    return (\r\n      <FadeDiv\r\n        visible={commandWindow.visible}\r\n        style={{ position: \"absolute\", top: commandWindow.top, left: commandWindow.left, zIndex: 9999 }}\r\n      >\r\n        <div style={{ height: commandWindow.height, width: 260, overflow: \"scroll\" }}>\r\n          <CommandListRenderItem img={\"text\"} title={\"새 텍스트\"} desc={\"일반 텍스트로 글을 작성하세요.\"} />\r\n          <CommandListRenderItem img={\"place\"} title={\"장소\"} desc={\"지도에서 장소를 선택하세요.\"} />\r\n          <CommandListRenderItem img={\"product\"} title={\"상품\"} desc={\"네이버샵의 상품을 선택하세요.\"} />\r\n          <CommandListRenderItem img={\"image\"} title={\"이미지\"} desc={\"이미지를 업로드해보세요.\"} />\r\n          <CommandListRenderItem img={\"h1\"} title={\"큰 제목, h1\"} desc={\"큰 제목으로 글을 시작하세요.\"} />\r\n          <CommandListRenderItem img={\"h2\"} title={\"부제목, h2\"} desc={\"부제목으로 글을 시작하세요.\"} />\r\n          <CommandListRenderItem img={\"h3\"} title={\"소제목, h3\"} desc={\"소주제로 글을 시작하세요.\"} />\r\n          <CommandListRenderItem img={\"tag\"} title={\"태그\"} desc={\"태그를 걸어 다른 사용자와 공유하세요.\"} />\r\n          <CommandListRenderItem img={\"contour\"} title={\"구분선\"} desc={\"블록을 구분선으로 나눕니다.\"} />\r\n          {/* <CommandListRenderItem img={\"emoji\"} title={\"#이모지, #emoji\"} desc={\"텍스트로 넣을 이모지 선택하세요.\"} /> */}\r\n          <CommandListRenderItem img={\"red\"} title={\"빨간색 글씨\"} desc={\"빨간색으로 글을 작성하세요.\"} />\r\n          <CommandListRenderItem img={\"blue\"} title={\"파란색 글씨\"} desc={\"파란색으로 글을 작성하세요.\"} />\r\n          <CommandListRenderItem img={\"brown\"} title={\"갈색 글씨\"} desc={\"갈색으로 글을 작성하세요.\"} />\r\n          <CommandListRenderItem img={\"purple\"} title={\"보라색 글씨\"} desc={\"보라색으로 글을 작성하세요.\"} />\r\n          <CommandListRenderItem img={\"yellow\"} title={\"노란색 배경\"} desc={\"노란색 배경으로 글을 작성하세요.\"} />\r\n          <CommandListRenderItem img={\"orange\"} title={\"주황색 배경\"} desc={\"주황색 배경으로 글을 작성하세요.\"} />\r\n          <CommandListRenderItem img={\"gray\"} title={\"회색 배경\"} desc={\"회색 배경으로 글을 작성하세요.\"} />\r\n        </div>\r\n        {/* <div>#인용</div> */}\r\n        {/* <div>#콜아웃</div> */}\r\n        {/* <div>#사용자 멘션하기</div> */}\r\n        {/* <div>#동영상</div> */}\r\n        {/* <div>#코드</div> */}\r\n        {/* <div>#파일</div> */}\r\n        {/* <div>#북마크</div> */}\r\n      </FadeDiv>\r\n    );\r\n  }, [commandWindow.visible, commandWindow.left, commandWindow.top]);\r\n  //#endregion\r\n  //#region 블록 하나 삭제\r\n  const onClickDelete = (i, item) => {\r\n    if (!alertDialogInfo.visible) {\r\n      setAlertDialogInfo({\r\n        visible: true,\r\n        title: \"\",\r\n        text: \"정말 삭제하시겠습니까?\",\r\n        handleConfirm: () => {\r\n          const list = [...commandInputList.slice(0, i), ...commandInputList.slice(i + 1, 999)];\r\n          setCommandInputList(list.length > 0 ? list : [...getItems(1, 1, \"text\", \"\")]);\r\n          setAlertDialogInfo(alertDialogInit);\r\n        },\r\n      });\r\n      setDeleteMode({ ...deleteMode, index: i });\r\n    }\r\n  };\r\n\r\n  //#endregion\r\n  return (\r\n    <div style={{ paddingBottom: 300 }}>\r\n      <CommandRect />\r\n      <DragDropContext onDragEnd={(r) => onDragEnd(r, commandInputList, setCommandInputList)}>\r\n        <Droppable droppableId=\"droppable\">\r\n          {(provided, snapshot) => (\r\n            <div ref={provided.innerRef} style={getListStyle(snapshot.isDraggingOver)}>\r\n              {commandInputList.map((item, index) => (\r\n                <Draggable key={item.id} draggableId={item.id} index={index}>\r\n                  {(provided, snapshot) => {\r\n                    return (\r\n                      <div\r\n                        ref={provided.innerRef}\r\n                        {...provided.draggableProps}\r\n                        {...provided.dragHandleProps}\r\n                        style={getItemStyle(snapshot.isDragging, provided.draggableProps.style)}\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            display: \"flex\",\r\n                            alignItems: \"flex-start\",\r\n                            justifyItems: \"center\",\r\n                            marginTop: 8,\r\n                          }}\r\n                        >\r\n                          <div\r\n                            style={{\r\n                              display: \"flex\",\r\n                              alignItems: \"center\",\r\n                              justifyItems: \"center\",\r\n                              marginRight: 8,\r\n                              marginTop: 7,\r\n                              height: 10,\r\n                            }}\r\n                          >\r\n                            {deleteMode.visible ? (\r\n                              <div onClick={() => onClickDelete(index, item)}>\r\n                                <Icon name={\"faTrash\"} type={\"light\"} />\r\n                              </div>\r\n                            ) : (\r\n                              <Rowdot />\r\n                            )}\r\n                          </div>\r\n                          <div\r\n                            style={\r\n                              alertDialogInfo.visible && deleteMode.index === index\r\n                                ? {\r\n                                    borderStyle: \"solid\",\r\n                                    borderWidth: 2,\r\n                                    borderRadius: 3,\r\n                                    borderColor: \"#d32f2f\",\r\n                                  }\r\n                                : { padding: 1.5 }\r\n                            }\r\n                          >\r\n                            <MCItem index={index} data={item} />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  }}\r\n                </Draggable>\r\n              ))}\r\n              {provided.placeholder}\r\n            </div>\r\n          )}\r\n        </Droppable>\r\n      </DragDropContext>\r\n      <DeleteBlock />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst DeleteBlock = ({ }) => {\r\n  const [deleteMode, setDeleteMode] = useRecoilState(deleteModePosState);\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"absolute\",\r\n        top: \"8%\",\r\n        left: \"4%\",\r\n      }}\r\n      onClick={() => setDeleteMode({ visible: !deleteMode.visible, index: -1 })}\r\n    >\r\n      <Button\r\n        style={{ textTransform: \"none\", width: 110 }}\r\n        variant={deleteMode.visible ? \"contained\" : \"outlined\"}\r\n        color=\"error\"\r\n      >\r\n        <Icon name={\"faTrash\"} color={deleteMode.visible ? \"white\" : \"#d32f2f\"} />\r\n        <div style={{ marginLeft: 6, fontFamily: \"roboto\", color: deleteMode.visible ? \"white\" : \"#d32f2f\" }}>\r\n          삭제모드\r\n        </div>\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n","import { BottomSheet } from \"react-spring-bottom-sheet\";\r\nimport \"react-spring-bottom-sheet/dist/style.css\";\r\nimport { GRAY7, SCREEN_HEIGHT, styleCenter } from \"../../style\";\r\nimport { GRAY6 } from \"../../style/index\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport {\r\n  commandInputListState,\r\n  commandWindowState,\r\n  CreateRouteBottomModalState,\r\n  FilePathInit,\r\n  loadingState,\r\n  userDataState,\r\n} from \"../recoil\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { Textarea } from \"../Input/index\";\r\nimport { InputImage } from \"../Input/InputImage\";\r\nimport { CourseActionField } from \"../Btn/CourseActionField\";\r\nimport { ProfileCard } from \"../card/ProfileCard\";\r\nimport { CommandArea } from \"../Input/CommandArea\";\r\nimport { FilePathState } from \"./../recoil\";\r\nimport { ORANGE } from \"./../../style/index\";\r\nimport { getItems } from \"./../Input/CommandInput/dndFunc\";\r\nimport { API_URL, API_URL_NO_Proxy, postfetch } from \"../common\";\r\nimport axios from \"axios\";\r\nimport { KaKaoLoginBtn } from \"../Btn/LoginBtn\";\r\n\r\n//#region 파일업로드시 Blob to File\r\nconst dataURLtoFile = (dataurl, fileName) => {\r\n  var arr = dataurl.split(\",\"),\r\n    mime = arr[0].match(/:(.*?);/)[1],\r\n    bstr = atob(arr[1]),\r\n    n = bstr.length,\r\n    u8arr = new Uint8Array(n);\r\n\r\n  while (n--) {\r\n    u8arr[n] = bstr.charCodeAt(n);\r\n  }\r\n\r\n  return new File([u8arr], fileName, { type: mime });\r\n};\r\n//#endregion\r\n\r\nexport const CourseCreateModal = () => {\r\n  const [userData] = useRecoilState(userDataState);\r\n  const [loading, setLoading] = useRecoilState(loadingState);\r\n  const [visibleRoute, setVisibleRoute] = useRecoilState(CreateRouteBottomModalState);\r\n  const [commandWindow, setCommandWindow] = useRecoilState(commandWindowState);\r\n  const [filepath, setFilepath] = useRecoilState(FilePathState);\r\n  const [commandInputList, setCommandInputList] = useRecoilState(commandInputListState);\r\n  const [CloseData, setCloseData] = useState({ text: \"닫기\", BtnColor: GRAY6, type: 0 });\r\n  const bottomRef = useRef();\r\n  const titleRef = useRef(\"\");\r\n  const descRef = useRef(\"\");\r\n\r\n  //#region 닫기 / 생성 버튼 색이랑 문구 변경\r\n  useEffect(() => {\r\n    // 배경 사진이 있거나 내용이 있을경우(\"text\" and content) or others 회색 \"생성\" 버튼으로\r\n    if (\r\n      (filepath.file !== \"\" && filepath.type === \"CourseCreateMainImg\") ||\r\n      commandInputList[0].content !== \"\" ||\r\n      commandInputList[0].type !== \"text\"\r\n    ) {\r\n      if (filepath.file === \"\" && filepath.type === \"\") setCloseData({ text: \"생성\", BtnColor: GRAY6, type: 1 });\r\n      else if (commandInputList[0].content === \"\" && commandInputList[0].type === \"text\")\r\n        setCloseData({ text: \"생성\", BtnColor: GRAY6, type: 2 });\r\n      else setCloseData({ text: \"생성\", BtnColor: ORANGE, type: 3 });\r\n    } else if (CloseData.type !== 0) setCloseData({ text: \"닫기\", BtnColor: GRAY6, type: 0 });\r\n  }, [filepath.file, CloseData.type, commandInputList, filepath.type]);\r\n  //#endregion\r\n  //#region 명령어창이 아닌 추천코스 생성창 스크롤 시 명령어창 닫기\r\n  const onScrollCapture = (e) => {\r\n    if (e.nativeEvent.target.outerText[0] === \"배\") setCommandWindow({ ...commandWindow, visible: false, index: -1 });\r\n  };\r\n  //#endregion\r\n  //#region 코스생성 닫기 or 생성하기 onPress\r\n  const onClickClose = async () => {\r\n    switch (CloseData.type) {\r\n      case 0:\r\n        setVisibleRoute(false);\r\n        break;\r\n      case 1:\r\n        alert(\"[필수] 배경 사진을 선택해주세요.\");\r\n        break;\r\n      case 2:\r\n        alert(\"[필수] 내용을 입력해주세요.\");\r\n        break;\r\n      default:\r\n        if (titleRef.current === \"\") {\r\n          alert(\"코스 제목을 입력해주세요.\");\r\n          break;\r\n        } else if (descRef.current === \"\") {\r\n          alert(\"간단한 소개를 입력해주세요.\");\r\n          break;\r\n        } else if (loading) {\r\n          alert(\"업로드 진행 중입니다. 잠시만 기다려주세요.\");\r\n          break;\r\n        } else {\r\n          setLoading(true);\r\n          //#region 태그 생성 및 반환 아이디 가져오기.\r\n          const tagCommand = commandInputList.filter((t) => t.type === \"tag\");\r\n          const tagList = _.flatten(tagCommand.map((t) => t.content.tagList));\r\n          async function postTagList() {\r\n            if (tagCommand.length > 0) {\r\n              let tagIdList = [];\r\n              return new Promise((resolve) => {\r\n                let count = 0;\r\n                tagList.map((v, i) => {\r\n                  axios.get(`${API_URL_NO_Proxy}/tags?name=${v.text}`).then((d) => {\r\n                    // 없으면 태그 생성 후 id 가져오기\r\n                    if (d.data.length === 0) {\r\n                      axios.post(`${API_URL_NO_Proxy}/tags`, { name: v.text }).then((d) => {\r\n                        tagIdList.push(Number(d.data.id));\r\n                        count++;\r\n                        if (count === tagList.length) resolve(tagIdList);\r\n                      });\r\n                      // 있으면 태그 id 가져오기\r\n                    } else {\r\n                      tagIdList.push(Number(d.data[0].id));\r\n                      count++;\r\n                      if (count === tagList.length) resolve(tagIdList);\r\n                    }\r\n                  });\r\n                });\r\n              });\r\n            }\r\n          }\r\n          const tagIdList = await postTagList();\r\n          //#endregion\r\n          //#region 이미지넣기\r\n\r\n          const data = new FormData();\r\n\r\n          // 메인사진\r\n          const split = filepath && filepath.type ? filepath.type.split(\"/\") : [];\r\n          const filename = new Date().getTime().toString() + \".\" + split.length > 0 ? split[1] : split[0];\r\n          data.append(\"files\", dataURLtoFile(filepath.file, filename));\r\n\r\n          // 코스첨부사진들\r\n          await commandInputList\r\n            .filter((item) => item.type === \"image\")\r\n            .map((item, i) => {\r\n              data.append(\"files\", dataURLtoFile(item.content.file, filename + i));\r\n            });\r\n          //#endregion\r\n          //#region 업로드=> 1.이미지 업로드\r\n          axios.post(`${API_URL_NO_Proxy}/upload`, data).then(async (d) => {\r\n            const imgId = d.data[0].id;\r\n            const dataCourse = {\r\n              title: titleRef.current,\r\n              description: descRef.current,\r\n              creator_id: String(userData ? userData.id : 0),\r\n              images: [imgId],\r\n              content: JSON.stringify(commandInputList),\r\n              tags: tagIdList,\r\n            };\r\n            // 2. 코스 업로드\r\n            postfetch(\"/courses\", JSON.stringify(dataCourse), true)\r\n              .then((d) => {\r\n                setLoading(false);\r\n                titleRef.current = \"\";\r\n                descRef.current = \"\";\r\n                setFilepath(FilePathInit);\r\n                setCommandInputList(getItems(1));\r\n                setVisibleRoute(false);\r\n              })\r\n              .catch((e) => {\r\n                console.error(e);\r\n                setLoading(false);\r\n                setVisibleRoute(false);\r\n              });\r\n          });\r\n          //#endregion\r\n        }\r\n        break;\r\n    }\r\n  };\r\n  //#endregion\r\n  return (\r\n    <>\r\n      <BottomSheet\r\n        ref={bottomRef}\r\n        blocking={false}\r\n        open={visibleRoute}\r\n        onDismiss={() => setVisibleRoute(false)}\r\n        snapPoints={({ minHeight, maxHeight }) => [maxHeight * 0.995]}\r\n        defaultSnap={({ lastSnap, snapPoints }) => [snapPoints[1]]}\r\n        onScrollCapture={onScrollCapture}\r\n        header={\r\n          <div>\r\n            <div style={{ fontFamily: \"roboto\", fontWeight: \"bold\", fontSize: 15, color: GRAY7, float: \"left\" }}>\r\n              추천 코스를 만들어보세요!\r\n            </div>\r\n            <div\r\n              style={{\r\n                fontFamily: \"roboto\",\r\n                fontWeight: \"bold\",\r\n                fontSize: 15,\r\n                color: CloseData.BtnColor,\r\n                float: \"right\",\r\n              }}\r\n              onClick={onClickClose}\r\n            >\r\n              {CloseData.text}\r\n            </div>\r\n          </div>\r\n        }\r\n        expandOnContentDrag={false}\r\n      >\r\n        <div>\r\n          <BlockLogin />\r\n          <InputImage placeholder={\"배경 사진을 선택해주세요!\"} />\r\n          <div style={{ padding: \"0 16px 80px 16px\" }}>\r\n            <div>\r\n              <Textarea\r\n                onChange={(e) => (titleRef.current = e)}\r\n                placeholder={\"코스 제목을 입력해주세요.\"}\r\n                style={{\r\n                  border: \"none\",\r\n                  width: \"100%\",\r\n                  fontSize: 19,\r\n                  paddingRight: 6,\r\n                  padding: 2,\r\n                  fontFamily: \"AppleSDGothic\",\r\n                  backgroundColor: \"transparent\",\r\n                  resize: \"none\",\r\n                  outline: \"none\",\r\n                }}\r\n                maxrows={2}\r\n              />\r\n              <div style={{ marginTop: 12 }}>\r\n                <Textarea\r\n                  onChange={(e) => {\r\n                    descRef.current = e;\r\n                  }}\r\n                  style={{\r\n                    border: \"none\",\r\n                    width: \"100%\",\r\n                    fontSize: 15,\r\n                    paddingRight: 6,\r\n                    fontFamily: \"AppleSDGothic\",\r\n                    backgroundColor: \"transparent\",\r\n                    resize: \"none\",\r\n                    overflow: \"hidden\",\r\n                    outline: \"none\",\r\n                  }}\r\n                  maxrows={3}\r\n                  placeholder={\"간단한 소개 (최대 3줄)\"}\r\n                />\r\n              </div>\r\n              <CourseActionField disable />\r\n              <ProfileCard address={\"같이타자\"} title={\"서울시 강남구\"} desc={\"팔로워 3,456명\"} img={\"img\"} disable />\r\n              <div style={{ marginTop: 6 }}>\r\n                <CommandArea />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </BottomSheet>\r\n    </>\r\n  );\r\n};\r\n\r\nconst BlockLogin = () => {\r\n  const [userData] = useRecoilState(userDataState);\r\n\r\n  return (\r\n    <>\r\n      {!userData ? (\r\n        <div\r\n          style={{\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            position: \"absolute\",\r\n            backgroundColor: \"rgba(255,255,255,0.6)\",\r\n            ...styleCenter,\r\n            zIndex: 3,\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          <KaKaoLoginBtn width={256} />\r\n          <div style={{ marginTop: 8, marginBottom: 60 }}>로그인이 필요한 기능입니다.</div>\r\n        </div>\r\n      ) : (\r\n        false\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","const createImage = (url) =>\r\n  new Promise((resolve, reject) => {\r\n    const image = new Image();\r\n    image.addEventListener(\"load\", () => resolve(image));\r\n    image.addEventListener(\"error\", (error) => reject(error));\r\n    image.setAttribute(\"crossOrigin\", \"anonymous\"); // needed to avoid cross-origin issues on CodeSandbox\r\n    image.src = url;\r\n  });\r\n\r\nfunction getRadianAngle(degreeValue) {\r\n  return (degreeValue * Math.PI) / 180;\r\n}\r\n\r\n/**\r\n * This function was adapted from the one in the ReadMe of https://github.com/DominicTobias/react-image-crop\r\n * @param {File} image - Image File url\r\n * @param {Object} pixelCrop - pixelCrop Object provided by react-easy-crop\r\n * @param {number} rotation - optional rotation parameter\r\n */\r\nexport async function getCroppedImg(imageSrc, pixelCrop, rotation = 0) {\r\n  const image = await createImage(imageSrc);\r\n  const canvas = document.createElement(\"canvas\");\r\n  const ctx = canvas.getContext(\"2d\");\r\n\r\n  const maxSize = Math.max(image.width, image.height);\r\n  const safeArea = 2 * ((maxSize / 2) * Math.sqrt(2));\r\n\r\n  // set each dimensions to double largest dimension to allow for a safe area for the\r\n  // image to rotate in without being clipped by canvas context\r\n  canvas.width = safeArea;\r\n  canvas.height = safeArea;\r\n\r\n  // translate canvas context to a central location on image to allow rotating around the center.\r\n  ctx.translate(safeArea / 2, safeArea / 2);\r\n  ctx.rotate(getRadianAngle(rotation));\r\n  ctx.translate(-safeArea / 2, -safeArea / 2);\r\n\r\n  // draw rotated image and store data.\r\n  ctx.drawImage(image, safeArea / 2 - image.width * 0.5, safeArea / 2 - image.height * 0.5);\r\n  const data = ctx.getImageData(0, 0, safeArea, safeArea);\r\n\r\n  // set canvas width to final desired crop size - this will clear existing context\r\n  canvas.width = pixelCrop.width;\r\n  canvas.height = pixelCrop.height;\r\n\r\n  // paste generated rotate image with correct offsets for x,y crop values.\r\n  ctx.putImageData(\r\n    data,\r\n    Math.round(0 - safeArea / 2 + image.width * 0.5 - pixelCrop.x),\r\n    Math.round(0 - safeArea / 2 + image.height * 0.5 - pixelCrop.y)\r\n  );\r\n\r\n  // As Base64 string\r\n  return canvas.toDataURL('image/jpeg');\r\n\r\n  // As a blob\r\n  // return new Promise((resolve) => {\r\n  //   canvas.toBlob((file) => {\r\n  //     resolve(URL.createObjectURL(file));\r\n  //   }, \"image/jpeg\");\r\n    \r\n  // });\r\n}","import { useRecoilState } from \"recoil\";\r\nimport { CropState } from \"./../recoil\";\r\nimport { useState, useCallback } from \"react\";\r\nimport { GRAY6, ORANGE, SCREEN_HEIGHT,  } from \"./../../style/index\";\r\nimport Cropper from \"react-easy-crop\";\r\nimport { getCroppedImg } from \"../common/function/getCroppedImg\";\r\nimport useWindowDimensions from \"../../hook/useWindowDimensions\";\r\n\r\nexport const CropScreen = () => {\r\n  const [crop, setCrop] = useRecoilState(CropState);\r\n  const { height, width } = useWindowDimensions();\r\n\r\n  const [cropXY, setCropXY] = useState({ x: 0, y: 0 });\r\n  const [rotation] = useState(0); //setRotation\r\n  const [zoom, setZoom] = useState(1);\r\n  const [croppedAreaPixels, setCroppedAreaPixels] = useState();\r\n  const [, setCroppedImage] = useState(); //croppedImage\r\n\r\n  const onCropComplete = useCallback((croppedArea, croppedAreaPixels) => {\r\n    setCroppedAreaPixels(croppedAreaPixels);\r\n  }, []);\r\n  \r\n  const showCroppedImage = useCallback(async () => {\r\n    try {\r\n      const croppedImage = await getCroppedImg(crop.previewURL, croppedAreaPixels, rotation);\r\n      setCroppedImage(croppedImage);\r\n      setCrop({ visible: false, file: croppedImage, previewURL: croppedImage, type:crop.type });\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }, [croppedAreaPixels, rotation, crop.previewURL, setCrop]);\r\n\r\n  return (\r\n    <div>\r\n      {/* 바탕사진 수정 창 */}\r\n      {crop.visible ? (\r\n        <div\r\n          style={{\r\n            position: \"absolute\",\r\n            top: 0,\r\n            width: width,\r\n            height: SCREEN_HEIGHT,\r\n            zIndex: 4,\r\n            backgroundColor: \"white\",\r\n          }}\r\n        >\r\n          <div\r\n            onClick={onCropComplete}\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              padding: \"12px 0px\",\r\n              color: ORANGE,\r\n              position: \"relative\",\r\n              zIndex: 20,\r\n              backgroundColor: \"white\",\r\n            }}\r\n          >\r\n            <div style={{ paddingLeft: 16, color: GRAY6 }} onClick={() => setCrop({ ...crop, visible: false })}>\r\n              취소\r\n            </div>\r\n            <div style={{ paddingRight: 16 }} onClick={showCroppedImage}>\r\n              완료\r\n            </div>\r\n          </div>\r\n          <Cropper\r\n            image={crop.previewURL}\r\n            crop={cropXY}\r\n            zoom={zoom}\r\n            aspect={200 / 200}\r\n            onCropChange={setCropXY}\r\n            onCropComplete={onCropComplete}\r\n            onZoomChange={setZoom}\r\n          />\r\n        </div>\r\n      ) : (\r\n        false\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import * as React from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport DialogActions from \"@mui/material/DialogActions\";\r\nimport DialogContent from \"@mui/material/DialogContent\";\r\nimport DialogContentText from \"@mui/material/DialogContentText\";\r\nimport DialogTitle from \"@mui/material/DialogTitle\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { alertDialogInit, alertDialogState } from \"./../recoil\";\r\nimport { GRAY6 } from './../../style/index';\r\n\r\nexport const AlertDialog = () => {\r\n  const [alertDialogInfo, setAlertDialogInfo] = useRecoilState(alertDialogState);\r\n\r\n  const handleClose = () => {\r\n    setAlertDialogInfo({ ...alertDialogInfo, visible:false});\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={alertDialogInfo.visible}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\"> {alertDialogInfo.title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">{alertDialogInfo.text}</DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} style={{ color: GRAY6 }}>\r\n            취소\r\n          </Button>\r\n          <Button onClick={alertDialogInfo.handleConfirm} style={{ color: \"#d32f2f\" }}>\r\n            삭제\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import { BottomHeader } from \"../components/BottomHeader\";\r\nimport { BottomTabBar } from \"../components/BottomTabBar\";\r\n// import { SearchBar } from \"../components/Input/SearchBar\";\r\nimport { CourseArea } from \"../components/CourseArea\";\r\nimport { CreateBtnCourse } from \"../components/Btn/CreateBtnCourse\";\r\nimport { CourseCreateModal } from \"./../components/modal/CourseCreateModal\";\r\nimport { CropScreen } from \"./../components/modal/CropScreen\";\r\nimport { CourseProductModal } from \"../components/modal/CourseProductModal\";\r\nimport { AlertDialog } from \"./../components/Dialog/AlertDialog\";\r\nimport { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst CourseScreen = () => {\r\n  \r\n  useEffect(() => {\r\n    const body = document.getElementsByTagName(\"body\")[0];\r\n    body.setAttribute(\"style\", \"overflow: hidden;\");\r\n    return () => body.setAttribute(\"style\", \"overflow: scroll;\");\r\n  }, []);\r\n  return (\r\n    <>\r\n      <BottomHeader />\r\n      <CourseArea />\r\n      <CreateBtnCourse />\r\n      <CourseProductModal />\r\n      <CourseCreateModal />\r\n      <CropScreen />\r\n      <BottomTabBar />\r\n      <AlertDialog />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CourseScreen;\r\n","import { BottomTabBar } from \"../components/BottomTabBar\";\r\nimport { BottomModal } from \"./../components/BottomModal\";\r\nimport { FaFilter, FaSearch } from \"react-icons/fa\";\r\nimport useWindowDimensions from \"../hook/useWindowDimensions\";\r\nimport { GRAY1, GRAY2, GRAY8, GRAY9 } from \"../style\";\r\n\r\nimport Card from \"@mui/material/Card\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardMedia from \"@mui/material/CardMedia\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { CardActionArea } from \"@mui/material\";\r\nimport { useEffect } from \"react\";\r\nimport { loadingState } from \"../components/recoil\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { BottomHeader } from \"../components/BottomHeader\";\r\n\r\nconst ShopScreen = () => {\r\n  // #region 스크롤 닫기\r\n  const [, setLoading] = useRecoilState(loadingState); //loading\r\n  const body = document.getElementsByTagName(\"body\")[0];\r\n  useEffect(() => {\r\n    body.removeAttribute(\"style\");\r\n    return () => setLoading(false);\r\n  }, [body]);\r\n  // #endregion\r\n  return (\r\n    <>\r\n      <div style={{ position: \"sticky\", height: 64 + 8, top: 0, background: GRAY2, zIndex: 2 }}>\r\n        <BottomHeader title=\"SHOP\" noProfile />\r\n      </div>\r\n      <ShopCard />\r\n      <BottomTabBar />\r\n    </>\r\n  );\r\n};;\r\nconst ShopCard = () => {\r\n  const { height, width } = useWindowDimensions();\r\n  return (\r\n    <>\r\n      <div\r\n        style={{\r\n          backgroundColor: GRAY1,\r\n          height: height - 56,\r\n          width: width,\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          display: \"flex\",\r\n        }}\r\n        \r\n        onClick={() => open(\"https://smartstore.naver.com/campustaxi/products/5976589929\")}\r\n      >\r\n        <Card sx={{ borderRadius: 12, marginBottom: 8 }}>\r\n          <CardActionArea sx={{ width: 300, height: 540, display: \"flex\", flexDirection: \"column\" }}>\r\n            <CardMedia component=\"img\" height=\"440\" image=\"/images/shopItem.png\" alt=\"green iguana\" />\r\n            <CardContent>\r\n              <Typography gutterBottom variant=\"h5\" component=\"div\">\r\n                <span style={{ fontSize: 21 }}>진공 스테인리스 LED 온도표시 스마트 터치 텀블러</span>\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                <s>15,000원</s> <span style={{ fontSize: 25, color: GRAY9 }}>10,000원</span>\r\n              </Typography>\r\n            </CardContent>\r\n          </CardActionArea>\r\n        </Card>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default ShopScreen;\r\n","import { BottomTabBar } from \"../components/BottomTabBar\";\r\nimport useSWR from \"swr\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { loadingState } from \"../components/recoil\";\r\nimport { useEffect } from \"react\";\r\nimport fetcher from \"../hook/useSWR/fetcher\";\r\nimport { ChatRoomType } from \"../types/ChatRoom\";\r\nimport { API_URL } from \"../components/common\";\r\nimport { RoomCard } from \"../components/card/RoomCard\";\r\nimport { BottomHeader } from \"../components/BottomHeader\";\r\n\r\n\r\nconst MyChatScreen = () => {\r\n  const [loading, setLoading] = useRecoilState(loadingState);\r\n\r\n  // #region 스크롤 닫기\r\n  const body = document.getElementsByTagName(\"body\")[0];\r\n  body.setAttribute('style', \"overflow-x: hidden;\");\r\n  useEffect(() => {\r\n    body.removeAttribute(\"style\");\r\n    return () => setLoading(false);\r\n  }, [body]);\r\n  // #endregion\r\n  //#region 데이터 관리\r\n  const { data, error } = useSWR(`${API_URL}/chat-rooms`, fetcher);\r\n  if ((error || !data) && !loading) setLoading(true);\r\n  if (error)\r\n    return (\r\n      <div>\r\n        <div style={{ position: \"sticky\", top: 0, zIndex: 2, height: 56, backgroundColor: \"white\" }}>\r\n          <BottomHeader title=\"내 채팅\" />\r\n        </div>\r\n        failed to load\r\n        <BottomTabBar />\r\n      </div>\r\n    );\r\n  if (!data)\r\n    return (\r\n      <div>\r\n        <div style={{ position: \"sticky\", top: 0, zIndex: 2, height: 56, backgroundColor: \"white\" }}>\r\n          <BottomHeader title=\"내 채팅\" />\r\n        </div>\r\n        <BottomTabBar />\r\n      </div>\r\n    );\r\n  if (loading) setLoading(false);\r\n  //#endregion\r\n\r\n  const chatRooms: ChatRoomType[] = data;\r\n\r\n  return (\r\n    <>\r\n      <div style={{ position: \"sticky\", top: 0, backgroundColor: \"white\", zIndex: 3 }}>\r\n        <BottomHeader title=\"내 채팅\" />\r\n      </div>\r\n      <ChatRoomArea chatRooms={chatRooms} />\r\n      <BottomTabBar />\r\n    </>\r\n  );\r\n};\r\n\r\nconst ChatRoomArea = ({ chatRooms }: { chatRooms: ChatRoomType[] }) => {\r\n  return (\r\n    <div style={{ padding: \"0 16px 96px 16px\" }}>\r\n      {chatRooms.map((room, i: number) => (\r\n        <RoomCard key={i.toString()} room={room} noClick />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyChatScreen;\r\n","import { useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport useSWR from \"swr\";\r\nimport fetcher from \"../hook/useSWR/fetcher\";\r\nimport { GRAY6, GRAY8 } from \"../style\";\r\nimport { API_URL } from \"./common\";\r\nimport { Icon } from \"./common/Icon\";\r\n\r\n\r\ntype PropType = {\r\n\ttitle: string;\r\n\tuserImg?: string | undefined | null;\r\n\troomId?: string;\r\n};\r\nexport const BackHeaderRight = ({ title, userImg = \"\", roomId }: PropType) => {\r\n\r\n\t//#region 토큰 가져오기\r\n\tconst history = useHistory();\r\n\tconst { data, error, mutate } = useSWR(`${API_URL}/users?id=${1}`, fetcher);\r\n\t//#endregion\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\tjustifyContent: \"space-evenly\",\r\n\t\t\t\t\tposition: \"sticky\",\r\n\t\t\t\t\tbackgroundColor: \"white\",\r\n\t\t\t\t\ttop: 0,\r\n\t\t\t\t\tzIndex: 5,\r\n\t\t\t\t}}\r\n\t\t\t\tclassName={\"topNotchHeader\"}\r\n\t\t\t>\r\n\t\t\t\t<div style={{ flex: 1, padding: 16 }}>\r\n\t\t\t\t\t<div style={{ width: 30 }} onClick={()=>history.goBack()}>\r\n\t\t\t\t\t\t<Icon name={\"faChevronLeft\"} color={GRAY8} type={\"light\"} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ flex: 1, display: \"flex\", justifyContent: \"center\", padding: 16, fontWeight: \"bold\" }}>\r\n\t\t\t\t\t{userImg ? <img src={userImg} width={24} height={24} style={{ borderRadius: 40, marginRight: 8 }} /> : false}\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* 차단하기 및 삭제하기 */}\r\n\t\t\t\t<div style={{ flex: 1, display: \"flex\", justifyContent: \"flex-end\", margin: \"8px 16px 8px 8px\" }}>\r\n\t\t\t\t\t\t<div style={{ padding: 8 }}>\r\n\t\t\t\t\t\t{/* <Icon name={\"ellipsis-v-alt\"} type={'light'} color={GRAY8} size={12} /> */}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};","import { useHistory, useParams } from \"react-router\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Tab, Tabs } from \"@mui/material\";\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport { BackHeader } from \"../components/BackHeader\";\r\nimport { CourseCard } from \"../components/card/CourseCard\";\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\nimport useWindowDimensions from \"../hook/useWindowDimensions\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { loadingState } from \"../components/recoil\";\r\nimport { GRAY2, GRAY4, GRAY7 } from \"../style\";\r\nimport fetcher from \"../hook/useSWR/fetcher\";\r\nimport useSWR from \"swr\";\r\nimport { API_URL } from \"../components/common\";\r\nimport { BackHeaderRight } from \"../components/BackHeaderRight\";\r\n\r\nconst MyScreen = () => {\r\n  const history = useHistory();\r\n  // const [userData] = useRecoilState(userDataState);\r\n\r\n  //#region 데이터관리\r\n  const [loading, setLoading] = useRecoilState(loadingState);\r\n  const { id } = useParams();\r\n  const { data, error, mutate } = useSWR(`${API_URL}/users?id=${id}`, fetcher);\r\n\r\n  const userData = data ? data[0] : null;\r\n  if ((error || !userData) && !loading) setLoading(true);\r\n  //#endregion\r\n  //#region 스크롤 열기\r\n  useEffect(() => {\r\n    const body = document.getElementsByTagName(\"body\")[0];\r\n    body.setAttribute(\"style\", \"overflow: scroll;\");\r\n    return () => {\r\n      body.setAttribute(\"style\", \"overflow: hidden;\");\r\n    };\r\n  }, []);\r\n  //#endregion\r\n  //#region 로딩관리\r\n  useEffect(() => {\r\n    return () => setLoading(false);\r\n  }, []);\r\n  if (error)\r\n    return (\r\n      <div>\r\n        <BackHeaderRight title={\"\"} userImg={\"\"} roomId={id} />\r\n        failed to load\r\n      </div>\r\n    );\r\n  if (!userData)\r\n    return (\r\n      <div>\r\n        <BackHeaderRight title={\"\"} userImg={\"\"} roomId={id} />\r\n        {/* loading... */}\r\n      </div>\r\n    );\r\n  if (loading) setLoading(false);\r\n  //#endregion\r\n  return (\r\n    <>\r\n      <div style={{ height: 56, position: \"fixed\" }}>\r\n        <BackHeader color={'black'}/>\r\n      </div>\r\n      <div style={{ padding: 16, paddingTop: 56 }}>\r\n        <div>\r\n          <img style={{ borderRadius: 100 }} width={80} src={userData.profile_image ?? \"\"}></img>\r\n        </div>\r\n        <div className=\"profileName\">\r\n          <div>\r\n            <div style={{ fontSize: 17, paddingTop: 8 }}>\r\n              {userData.nickname ?? \"\"}\r\n              <div style={{ color: GRAY7, fontSize: 15, paddingTop: 2 }}>{userData.kakao_email ?? \"\"}</div>\r\n            </div>\r\n            {/* <FaPenAlt style={{ color: \"343A40\", marginLeft: 5, height: 15 }} /> */}\r\n            {/* <div className=\"points\">{points} 보유중</div> */}\r\n            {/* <Button variant=\"text\">Text</Button>\r\n              <Button variant=\"contained\">Contained</Button>\r\n              <Button variant=\"outlined\">Outlined</Button> */}\r\n            {/* <div className=\"points\"> 팔로우하기</div> */}\r\n          </div>\r\n\r\n          {/* 코스제작 {courseNum} */}\r\n          {/* <div style={{ color: GRAY7, fontSize: 15 }}>\r\n            팔로잉 {userData.following && (userData.following.length ?? 0)} 팔로워 {\"userData.follower\" ?? 0}\r\n          </div> */}\r\n        </div>\r\n      </div>\r\n      <ResultTabs />\r\n    </>\r\n  );\r\n};\r\n\r\nconst ResultTabs = () => {\r\n  const [index, setIndex] = useState(0);\r\n  const handleChange = (e, i) => setIndex(i);\r\n  const handleChangeIndex = (i) => setIndex(i);\r\n\r\n  return (\r\n    <>\r\n      <Tabs\r\n        value={index}\r\n        fullWidth\r\n        onChange={handleChange}\r\n        style={{\r\n          position: \"sticky\",\r\n          top: 0,\r\n          backgroundColor: \"white\",\r\n          width: \"100%\",\r\n          zIndex: 10,\r\n          paddingTop: 0,\r\n        }}\r\n      >\r\n        <Tab label=\"이용 내역\" style={{ width: \"50%\", fontSize: 15 }} />\r\n        <Tab label=\"경로 제작\" style={{ width: \"50%\", fontSize: 15 }} />\r\n      </Tabs>\r\n      <SwipeableViews index={index} onChangeIndex={handleChangeIndex}>\r\n        <div>\r\n          <LogList />\r\n        </div>\r\n        <div>\r\n          <CourseList />\r\n        </div>\r\n      </SwipeableViews>\r\n    </>\r\n  );\r\n};\r\n\r\nconst LogList = () => {\r\n  const sampleLog = [\r\n    {\r\n      content: \"코스 글에 좋아요했습니다.\",\r\n      user_id: 5, //상대방 유저아이디\r\n      img: \"\", //아바타 처럼 둥근거 들어갈 수있을듯\r\n    },\r\n    {\r\n      content: '\"같이택시타실분...\" 코스에 좋아요했습니다.',\r\n      user_id: 5, //상대방 유저아이디\r\n      img: \"\", //아바타 처럼 둥근거 들어갈 수있을듯\r\n    },\r\n    {\r\n      content: \"카직스님이 팔로우하셨습니다.\",\r\n      user_id: 5, //상대방 유저아이디\r\n      img: \"\", //아바타 처럼 둥근거 들어갈 수있을듯\r\n    },\r\n    {\r\n      content: \"알리스타님이 코스에 좋아요했습니다.\",\r\n      user_id: 5, //상대방 유저아이디\r\n      img: \"\", //아바타 처럼 둥근거 들어갈 수있을듯\r\n    },\r\n  ];\r\n  const sampleLogList = [...sampleLog, ...sampleLog, ...sampleLog];\r\n\r\n  return (\r\n    <>\r\n      <Swiper slidesPerView={1} direction={\"vertical\"} speed={500} height={90}>\r\n        {sampleLogList.map((item, i) => (\r\n          // item.content\r\n          // item.user_id\r\n          // item.img\r\n          <SwiperSlide key={i.toString()}>\r\n            <div\r\n              style={{\r\n                margin: \"16px 16px\",\r\n                padding: \"16px 16px\",\r\n                borderColor: GRAY4,\r\n                borderWidth: 1,\r\n                borderStyle: \"solid\",\r\n                borderRadius: 16,\r\n                backgroundColor: GRAY2,\r\n              }}\r\n            >\r\n              <div>{item.content}</div>\r\n              <div>{item.user_id}</div>\r\n              <div>{item.img}</div>\r\n            </div>\r\n          </SwiperSlide>\r\n        ))}\r\n      </Swiper>\r\n    </>\r\n  );\r\n};\r\n\r\nconst CourseList = () => {\r\n  const { id } = useParams();\r\n  const { height, width } = useWindowDimensions();\r\n  const { data: list, error, mutate } = useSWR(`${API_URL}/courses?creator_id=${id}`, fetcher);\r\n\r\n  return (\r\n    <>\r\n      <Swiper slidesPerView={1} direction={\"vertical\"} speed={500} height={260}>\r\n        {list ? list.map((course, i) => (\r\n          <SwiperSlide key={i.toString()}>\r\n            <CourseCard width={width} course={course} />\r\n          </SwiperSlide>\r\n        )) : false}\r\n      </Swiper>\r\n    </>\r\n  );\r\n};\r\nexport default MyScreen;\r\n\r\n/*\r\n<To-Do-List>\r\n- 팔로잉 한 줄 두 개 style,\r\n- 가로 스크롤뷰,\r\n- 버튼 이용내역 디폴트로 클릭 된 상태로 만들기\r\n- Menu 부분 (이전페이지, 고개센터, 옵션),\r\n- 보유 포인트\r\n- 이름 편집 아이콘\r\n*/\r\n","import { CircularProgress } from \"@mui/material\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport useWindowDimensions from \"../../hook/useWindowDimensions\";\r\nimport { MessageChatType } from \"../../screen/ChatScreen\";\r\nimport { GRAY2, GRAY5, GRAY7 } from \"../../style\";\r\nimport { lastMessageMarginBottomState, userDataState } from \"../recoil\";\r\n\r\nexport const MessageChatCard = ({\r\n\tdata,\r\n\tmref,\r\n\tisLast = false,\r\n}: {\r\n\tdata: MessageChatType;\r\n\tmref?: any;\r\n\tisLast?: boolean;\r\n\t}) => {\r\n\tconsole.log(data)\r\n\tswitch (typeof data.media) {\r\n\t\t// 추후 사진/동영상 전송\r\n\t\t// case 'string':\r\n\t\t// \treturn <DefaultChat data={data} mref={mref} isLast={isLast} />;\r\n\t\tdefault:\r\n\t\t\treturn <DefaultChat data={data} mref={mref} isLast={isLast} />;\r\n\t}\r\n};\r\n\r\nconst DefaultChat = ({ data, mref, isLast = false }: { data: MessageChatType; mref?: any; isLast?: boolean }) => {\r\n\r\n\tconst [userData] = useRecoilState(userDataState);\r\n\tconst { height, width } = useWindowDimensions();\r\n\tconst [lastMessageMarginBottom] = useRecoilState(lastMessageMarginBottomState); //setLastMessageMarginBottom\r\n\tconst isMy = data.user_id ? data.user_id.nickname === userData?.nickname : true;\r\n\r\n\tconst year = data.created_at ? Number(data.created_at.slice(0, 4)) : \"\";\r\n\tconst month = data.created_at ? Number(data.created_at.slice(5, 7)): \"\";\r\n\tconst day = data.created_at ? Number(data.created_at.slice(8, 10)) : \"\";\r\n\tconst date = data.created_at ? `${year}년 ${month}월 ${day}일` : \"\"\r\n\r\n\tconst hour = data.created_at ? Number(data.created_at.slice(11, 13)) : 0;\r\n\tconst min = data.created_at ? data.created_at.slice(13, 16) : \"\";\r\n\tconst AMPM = hour < 12;\r\n\tconst time = AMPM ? `오전 ${hour}${min}` : `오후 ${hour === 12 ? 12 : hour - 12}${min}`;\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\tjustifyContent: isMy ? \"flex-end\" : \"flex-start\",\r\n\t\t\t\twidth: width - 32,\r\n\t\t\t\tpadding: \"2px 16px\",\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<div style={{ display: \"flex\", flexDirection: \"column\", alignItems: isMy ? \"flex-end\" : \"flex-start\" }}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundColor: isMy ? GRAY7 : GRAY2,\r\n\t\t\t\t\t\tpadding: \"12px 16px\",\r\n\t\t\t\t\t\tborderRadius: isMy ? \"16px 16px 0 16px \" : \"16px 16px 16px 0 \",\r\n\t\t\t\t\t\tcolor: isMy ? \"white\" : GRAY7,\r\n\t\t\t\t\t\tfontWeight: \"normal\",\r\n\t\t\t\t\t\tfontSize: 14,\r\n\t\t\t\t\t\tmaxWidth: width - 80,\r\n\t\t\t\t\t\twordBreak: \"break-all\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{data.message}\r\n\t\t\t\t</div>\r\n\t\t\t\t{data.created_at ? (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tref={mref}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tcolor: GRAY5,\r\n\t\t\t\t\t\t\tfontWeight: \"normal\",\r\n\t\t\t\t\t\t\tfontSize: 12,\r\n\t\t\t\t\t\t\tmarginTop: 4,\r\n\t\t\t\t\t\t\tpaddingBottom: isLast ? lastMessageMarginBottom : 0,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{date+\" \"+time}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tref={mref}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tcolor: GRAY5,\r\n\t\t\t\t\t\t\tfontWeight: \"normal\",\r\n\t\t\t\t\t\t\tfontSize: 12,\r\n\t\t\t\t\t\t\tmarginTop: 4,\r\n\t\t\t\t\t\t\tpaddingBottom: isLast ? lastMessageMarginBottom : 0,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CircularProgress color=\"inherit\" size={12} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};","import { forwardRef, useEffect, useRef, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { lastMessageMarginBottomState, loadingState, userDataState } from \"../components/recoil\";\r\nimport useSWR from \"swr\";\r\nimport { API_URL, postfetch } from \"../components/common\";\r\nimport fetcher from \"../hook/useSWR/fetcher\";\r\nimport { BackHeaderRight } from \"../components/BackHeaderRight\";\r\nimport { MessageChatCard } from \"../components/card/MessageChatCard\";\r\nimport { GRAY1, GRAY6, ORANGE } from \"../style\";\r\nimport { TextareaAutosize } from \"@mui/base\";\r\nimport { UserType } from \"../types/User\";\r\nimport useWindowDimensions from \"../hook/useWindowDimensions\";\r\nimport { CreatorType } from \"../types/Course\";\r\nimport { ChatRoomType } from \"../types/ChatRoom\";\r\n\r\n// 처음에만 가장 아래로 이동\r\n\r\nlet msgloading = false;\r\n\r\nexport const ChatScreen = ({ }) => {\r\n  const history = useHistory();\r\n  const textareaRef = useRef(\"\");\r\n  const isInit = useRef(true);\r\n  const messageareaRef = useRef<HTMLDivElement>(null);\r\n\r\n  //#region 스크롤 열기\r\n  const body = document.getElementsByTagName('body')[0];\r\n  useEffect(() => {\r\n    body.setAttribute(\"style\", \"overflow: scroll;\");\r\n    body.setAttribute(\"style\", \"overflow-x: hidden;\");\r\n    return () => {\r\n      body.removeAttribute(\"style\");\r\n      setLoading(false);\r\n    }\r\n  }, [])\r\n  //#endregion\r\n  //#region 데이터관리\r\n  const { id }: { id: string | undefined } = useParams();\r\n  const [loading, setLoading] = useRecoilState(loadingState);\r\n  const { data, error, mutate } = useSWR(`${API_URL}/chats?chat_room_id=${id}`, fetcher, { refreshInterval: 1000 });\r\n  const { data: dataU, error: errorU } = useSWR(`${API_URL}/users?id=${1}`, fetcher);\r\n  if ((error || !data || errorU || !dataU) && !loading) setLoading(true);\r\n  useEffect(() => {\r\n    return () => setLoading(false);\r\n  }, []);\r\n  if (error || errorU)\r\n    return (\r\n      <div>\r\n        <BackHeaderRight title={\"\"} userImg={\"\"} roomId={id} />\r\n        failed to load\r\n      </div>\r\n    );\r\n  if (!data || !dataU)\r\n    return (\r\n      <div>\r\n        <BackHeaderRight title={\"\"} userImg={\"\"} roomId={id} />\r\n        {/* loading... */}\r\n      </div>\r\n    );\r\n  if (loading) setLoading(false);\r\n  //#endregion\r\n\r\n\r\n  const userData: UserType = dataU[0];\r\n\r\n  return (\r\n    <>\r\n      <BackHeaderRight title={userData.nickname} userImg={userData.profile_image} roomId={id} />\r\n      <MessageArea list={data} isInit={isInit} messageareaRef={messageareaRef} />\r\n      <Input ref={textareaRef} list={data} mutate={mutate} />\r\n    </>\r\n  );\r\n};\r\n\r\nconst MessageArea = ({\r\n  list,\r\n  isInit,\r\n  messageareaRef,\r\n}: {\r\n  list: MessageChatType[];\r\n  isInit: any;\r\n  messageareaRef?: any;\r\n}) => {\r\n  return (\r\n    <div ref={messageareaRef} className={\"MessageArea\"} style={{ display: \"flex\", flexDirection: \"column-reverse\" }}>\r\n      <MessageList list={list} isInit={isInit} />\r\n    </div>\r\n  );\r\n};\r\nconst MessageList = ({ list, isInit }: { list: MessageChatType[]; isInit: any }) => {\r\n  const isLast = true;\r\n  const [lastMessageMarginBottom] = useRecoilState(lastMessageMarginBottomState); //setLastMessageMarginBottom\r\n  const parentRef = useRef<HTMLDivElement | null>(null);\r\n  const ref = useRef<HTMLDivElement | null>(null);\r\n\r\n  //#region 아래 여백이 변할때마다 마지막 스크롤일 경우 가장 아래로 이동하기\r\n  useEffect(() => {\r\n    if (parentRef && parentRef.current && ref && ref.current) {\r\n      if (window.pageYOffset > parentRef.current?.scrollHeight - window.innerHeight) {\r\n        // 메세지 가장 아래로 이동하기\r\n        ref.current.scrollIntoView();\r\n      }\r\n    }\r\n  }, [lastMessageMarginBottom]);\r\n  //#endregion\r\n  //#region 처음 채팅방 들어오고 데이터 받아오면 최하단으로 이동 / 맨 아래보고 있을 때 채팅 들어오면 최하단으로 이동.\r\n  useEffect(() => {\r\n    const MessageArea = document.getElementsByClassName('MessageArea')[0];\r\n    if (ref && ref.current && isInit.current && isLast && list.length > 0) {\r\n      setTimeout(() => {\r\n        window.scroll(0, 9999999);\r\n      }, 100);\r\n      isInit.current = false;\r\n    } else if (Math.abs(window.scrollY + 375 + 375 - MessageArea.scrollHeight) < 100) {\r\n      setTimeout(() => {\r\n        window.scroll(0, 9999999);\r\n      }, 100);\r\n    } \r\n  }, [list.length]);\r\n\r\n\r\n  //#endregion\r\n\r\n  return (\r\n    <div ref={parentRef} style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n      {list && list.length > 0\r\n        ? list.map((m, i) =>\r\n          isLast && i === list.length - 1 ? (\r\n            <MessageChatCard mref={ref} isLast data={m} key={i.toString()} />\r\n          ) : (\r\n            <MessageChatCard data={m} key={i.toString()} />\r\n          )\r\n        )\r\n        : false}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Input = forwardRef(({ mutate, list }: { mutate: any; list: MessageChatType[] }, ref?: any) => {\r\n  const { id: roomId }: any = useParams();\r\n  const [userData] = useRecoilState(userDataState);\r\n  const [lastMessageMarginBottom, setLastMessageMarginBottom] = useRecoilState(lastMessageMarginBottomState);\r\n  const { height, width } = useWindowDimensions();\r\n  const [text, setText] = useState(\"\");\r\n  const textRef = useRef<HTMLTextAreaElement | null>(null);\r\n  const [isConfirm, setIsConfirm] = useState(false);\r\n  //#region 토큰 가져오기\r\n  const history = useHistory();\r\n  //#endregion\r\n\r\n  //#region 텍스트 바뀔때마다 높이 비교해서 메세지 목록 맨 아래 여백조절\r\n  // -> 전체 선택후 한번에 삭제하면 안따라가서 50ms 넣음\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      if (Math.abs(ref.current.scrollHeight - lastMessageMarginBottom) > 10)\r\n        setLastMessageMarginBottom(ref.current.scrollHeight + 10);\r\n    }, 50);\r\n  }, [text]);\r\n  //#endregion\r\n  const onInput = (e: any) => {\r\n    if (e.target.value !== \"\" && !isConfirm) setIsConfirm(true);\r\n    else if (e.target.value === \"\" && isConfirm) setIsConfirm(false);\r\n    setText(e.target.value);\r\n  };\r\n  const onClickSend = async () => {\r\n    if (text === \"\") return;\r\n    setText(\"\");\r\n    setIsConfirm(false);\r\n    //#region 메세지 local mutation\r\n    mutate([...list, MessageChatInit(text)], false);\r\n    //#endregion\r\n    setTimeout(() => {\r\n      window.scroll(0, 9999999);\r\n    }, 30);\r\n    await postfetch(\"/chats\", JSON.stringify({ message: text, chat_room_id: roomId, user_id: String(userData?.id) }), true);\r\n    mutate();\r\n  };\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      style={{\r\n        position: \"fixed\",\r\n        bottom: 0,\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        width: width - 32,\r\n        padding: 16,\r\n        backgroundColor: \"white\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          flex: 1,\r\n          backgroundColor: GRAY1,\r\n          padding: 8,\r\n          marginRight: 16,\r\n          borderRadius: 10,\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        {/* 카메라 */}\r\n        {/* <Icon name={\"camera\"} size={12} /> */}\r\n        <div style={{ flex: 1, display: \"flex\" }}>\r\n          <TextareaAutosize\r\n            ref={textRef}\r\n            value={text}\r\n            onInput={onInput}\r\n            placeholder={\"메세지를 남겨 주세요!\"}\r\n            style={{\r\n              marginTop: 4,\r\n              paddingLeft: 16,\r\n              width: \"100%\",\r\n              outline: \"none\",\r\n              border: \"none\",\r\n              backgroundColor: GRAY1,\r\n              fontSize: 15,\r\n              caretColor: ORANGE,\r\n              resize: \"none\",\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div onClick={onClickSend} style={{ display: \"flex\", color: isConfirm ? ORANGE : GRAY6 }}>\r\n        보내기\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n//#region Types\r\nexport const MessageChatInit = (message: string) => {\r\n  return {\r\n    id: -1,\r\n    chat_room_id: null, //start_route => id 로 감.\r\n    message: message,\r\n    deleted_at: null,\r\n    user_id: null,\r\n    published_at: null,\r\n    created_at: null,\r\n    updated_at: null,\r\n    media: null,\r\n  };\r\n};\r\nexport type MessageChatType = {\r\n  id: number;\r\n  chat_room_id: ChatRoomType; //start_route => id 로 감.\r\n  message: string; //\"테스트 채팅!\",\r\n  deleted_at: string | null;\r\n  user_id: CreatorType;\r\n  published_at: string; // \"2021-11-20T14:06:20.000Z\",\r\n  created_at: string; //\"2021-11-20T14:06:17.000Z\",\r\n  updated_at: string; //\"2021-11-20T14:06:20.000Z\"\r\n  media: string | null;\r\n};\r\n\r\n//#endregion\r\n\r\nexport default ChatScreen;\r\n","import React, { useEffect } from \"react\";\r\nimport { BottomHeader } from \"../components/BottomHeader\";\r\nimport { BottomTabBar } from \"../components/BottomTabBar\";\r\nimport { CreateBtn } from \"../components/Btn/CreateBtn\";\r\nimport { PreRegistrationPopup } from \"../components/Dialog/PreRegistrationPopup\";\r\nimport { NMAP } from \"../components/NMap\";\r\nimport { SearchPosition } from \"../components/SearchPosition\";\r\nimport { SelectMapModal } from \"../components/SelectMapModal\";\r\nimport { BottomModal, CreateBottomModal } from \"../components/BottomModal\";\r\n\r\nconst HomeScreenPre = () => {\r\n  useEffect(() => {\r\n    const body = document.getElementsByTagName(\"body\")[0];\r\n    body.setAttribute(\"style\", \"overflow: hidden;\");\r\n    return () => body.setAttribute(\"style\", \"overflow: scroll;\");\r\n  }, []);\r\n  return (\r\n    <>\r\n      {/* <PreRegistrationPopup/> */}\r\n      <BottomHeader />\r\n      <SearchPosition />\r\n      <NMAP />\r\n      <CreateBtn />\r\n      <BottomModal />\r\n      <CreateBottomModal />\r\n      <SelectMapModal />\r\n      <BottomTabBar />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomeScreenPre;\r\n","import { RecoilRoot, useRecoilState } from \"recoil\";\r\nimport HomeScreen from \"./screen/HomeScreen\";\r\nimport { Switch, Route, BrowserRouter } from \"react-router-dom\";\r\n\r\nimport SearchScreen from \"./screen/SearchScreen\";\r\nimport CourseDetailScreen from \"./screen/CourseDetailScreen\";\r\nimport CourseScreen from \"./screen/CourseScreen\";\r\nimport ShopScreen from \"./screen/ShopScreen\";\r\nimport MyChatScreen from \"./screen/MyChatScreen\";\r\nimport UserScreen from \"./screen/UserScreen\";\r\nimport { resetServerContext } from \"react-beautiful-dnd\";\r\nimport { LinearProgress } from \"@mui/material\";\r\nimport { loadingState } from \"./components/recoil\";\r\nimport ChatScreen from \"./screen/ChatScreen\";\r\nimport HomeScreenPre from \"./screen/HomeScreenPre\";\r\n\r\n/* eslint-disable */\r\n\r\nresetServerContext();\r\n\r\nconst App = () => {\r\n  return (\r\n    <RecoilRoot>\r\n      <BrowserRouter>\r\n        <LoadingPage />\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            <HomeScreenPre />\r\n          </Route>\r\n          <Route exact path=\"/home\">\r\n            <HomeScreen />\r\n          </Route>\r\n          <Route exact path=\"/course/detail/:id\">\r\n            <CourseDetailScreen />\r\n          </Route>\r\n          <Route exact path=\"/course\">\r\n            <CourseScreen />\r\n          </Route>\r\n          <Route path=\"/search\">\r\n            <SearchScreen />\r\n          </Route>\r\n          {/* jeong */}\r\n          <Route path=\"/shop\">\r\n            <ShopScreen />\r\n          </Route>\r\n          {/* seo */}\r\n          <Route exact path=\"/mychat\">\r\n            <MyChatScreen />\r\n          </Route>\r\n          <Route exact path=\"/chat/:id\">\r\n            <ChatScreen />\r\n          </Route>\r\n          <Route exact path=\"/user/:id\">\r\n            <UserScreen />\r\n          </Route>\r\n        </Switch>\r\n      </BrowserRouter>\r\n    </RecoilRoot>\r\n  );\r\n};\r\n\r\nconst LoadingPage = () => {\r\n  const [loading] = useRecoilState(loadingState);\r\n  return <div>{loading ? <LinearProgress variant={\"indeterminate\"} color={\"info\"} /> : false}</div>;\r\n};\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}